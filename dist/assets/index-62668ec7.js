function EA(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function AA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vy={exports:{}},Lc={},Uy={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eu=Symbol.for("react.element"),IA=Symbol.for("react.portal"),CA=Symbol.for("react.fragment"),TA=Symbol.for("react.strict_mode"),SA=Symbol.for("react.profiler"),RA=Symbol.for("react.provider"),PA=Symbol.for("react.context"),NA=Symbol.for("react.forward_ref"),OA=Symbol.for("react.suspense"),bA=Symbol.for("react.memo"),DA=Symbol.for("react.lazy"),Cg=Symbol.iterator;function kA(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var jy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zy=Object.assign,Hy={};function fa(t,e,r){this.props=t,this.context=e,this.refs=Hy,this.updater=r||jy}fa.prototype.isReactComponent={};fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wy(){}Wy.prototype=fa.prototype;function T0(t,e,r){this.props=t,this.context=e,this.refs=Hy,this.updater=r||jy}var S0=T0.prototype=new Wy;S0.constructor=T0;zy(S0,fa.prototype);S0.isPureReactComponent=!0;var Tg=Array.isArray,Gy=Object.prototype.hasOwnProperty,R0={current:null},$y={key:!0,ref:!0,__self:!0,__source:!0};function Xy(t,e,r){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Gy.call(e,n)&&!$y.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:eu,type:t,key:o,ref:a,props:i,_owner:R0.current}}function MA(t,e){return{$$typeof:eu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P0(t){return typeof t=="object"&&t!==null&&t.$$typeof===eu}function LA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Sg=/\/+/g;function th(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LA(""+t.key):e.toString(36)}function gl(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case eu:case IA:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+th(a,0):n,Tg(i)?(r="",t!=null&&(r=t.replace(Sg,"$&/")+"/"),gl(i,e,r,"",function(l){return l})):i!=null&&(P0(i)&&(i=MA(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Sg,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Tg(t))for(var s=0;s<t.length;s++){o=t[s];var u=n+th(o,s);a+=gl(o,e,r,u,i)}else if(u=kA(t),typeof u=="function")for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=n+th(o,s++),a+=gl(o,e,r,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function zu(t,e,r){if(t==null)return t;var n=[],i=0;return gl(t,n,"","",function(o){return e.call(r,o,i++)}),n}function FA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},vl={transition:null},BA={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:vl,ReactCurrentOwner:R0};function Ky(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:zu,forEach:function(t,e,r){zu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return zu(t,function(){e++}),e},toArray:function(t){return zu(t,function(e){return e})||[]},only:function(t){if(!P0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=fa;ue.Fragment=CA;ue.Profiler=SA;ue.PureComponent=T0;ue.StrictMode=TA;ue.Suspense=OA;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BA;ue.act=Ky;ue.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=zy({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=R0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)Gy.call(e,u)&&!$y.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:eu,type:t.type,key:i,ref:o,props:n,_owner:a}};ue.createContext=function(t){return t={$$typeof:PA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RA,_context:t},t.Consumer=t};ue.createElement=Xy;ue.createFactory=function(t){var e=Xy.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:NA,render:t}};ue.isValidElement=P0;ue.lazy=function(t){return{$$typeof:DA,_payload:{_status:-1,_result:t},_init:FA}};ue.memo=function(t,e){return{$$typeof:bA,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=vl.transition;vl.transition={};try{t()}finally{vl.transition=e}};ue.unstable_act=Ky;ue.useCallback=function(t,e){return Jt.current.useCallback(t,e)};ue.useContext=function(t){return Jt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Jt.current.useEffect(t,e)};ue.useId=function(){return Jt.current.useId()};ue.useImperativeHandle=function(t,e,r){return Jt.current.useImperativeHandle(t,e,r)};ue.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Jt.current.useMemo(t,e)};ue.useReducer=function(t,e,r){return Jt.current.useReducer(t,e,r)};ue.useRef=function(t){return Jt.current.useRef(t)};ue.useState=function(t){return Jt.current.useState(t)};ue.useSyncExternalStore=function(t,e,r){return Jt.current.useSyncExternalStore(t,e,r)};ue.useTransition=function(){return Jt.current.useTransition()};ue.version="18.3.1";Uy.exports=ue;var U=Uy.exports;const qy=AA(U),VA=EA({__proto__:null,default:qy},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UA=U,jA=Symbol.for("react.element"),zA=Symbol.for("react.fragment"),HA=Object.prototype.hasOwnProperty,WA=UA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GA={key:!0,ref:!0,__self:!0,__source:!0};function Yy(t,e,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)HA.call(e,n)&&!GA.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:jA,type:t,key:o,ref:a,props:i,_owner:WA.current}}Lc.Fragment=zA;Lc.jsx=Yy;Lc.jsxs=Yy;Vy.exports=Lc;var S=Vy.exports,Yh={},Qy={exports:{}},yr={},Zy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,re){var oe=$.length;$.push(re);e:for(;0<oe;){var Ve=oe-1>>>1,Te=$[Ve];if(0<i(Te,re))$[Ve]=re,$[oe]=Te,oe=Ve;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var re=$[0],oe=$.pop();if(oe!==re){$[0]=oe;e:for(var Ve=0,Te=$.length,qe=Te>>>1;Ve<qe;){var on=2*(Ve+1)-1,an=$[on],sn=on+1,Hr=$[sn];if(0>i(an,oe))sn<Te&&0>i(Hr,an)?($[Ve]=Hr,$[sn]=oe,Ve=sn):($[Ve]=an,$[on]=oe,Ve=on);else if(sn<Te&&0>i(Hr,oe))$[Ve]=Hr,$[sn]=oe,Ve=sn;else break e}}return re}function i($,re){var oe=$.sortIndex-re.sortIndex;return oe!==0?oe:$.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,h=null,d=3,p=!1,m=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var re=r(l);re!==null;){if(re.callback===null)n(l);else if(re.startTime<=$)n(l),re.sortIndex=re.expirationTime,e(u,re);else break;re=r(l)}}function I($){if(w=!1,E($),!m)if(r(u)!==null)m=!0,nn(b);else{var re=r(l);re!==null&&fr(I,re.startTime-$)}}function b($,re){m=!1,w&&(w=!1,v(A),A=-1),p=!0;var oe=d;try{for(E(re),h=r(u);h!==null&&(!(h.expirationTime>re)||$&&!k());){var Ve=h.callback;if(typeof Ve=="function"){h.callback=null,d=h.priorityLevel;var Te=Ve(h.expirationTime<=re);re=t.unstable_now(),typeof Te=="function"?h.callback=Te:h===r(u)&&n(u),E(re)}else n(u);h=r(u)}if(h!==null)var qe=!0;else{var on=r(l);on!==null&&fr(I,on.startTime-re),qe=!1}return qe}finally{h=null,d=oe,p=!1}}var D=!1,C=null,A=-1,R=5,N=-1;function k(){return!(t.unstable_now()-N<R)}function M(){if(C!==null){var $=t.unstable_now();N=$;var re=!0;try{re=C(!0,$)}finally{re?O():(D=!1,C=null)}}else D=!1}var O;if(typeof y=="function")O=function(){y(M)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Ot=Oe.port2;Oe.port1.onmessage=M,O=function(){Ot.postMessage(null)}}else O=function(){x(M,0)};function nn($){C=$,D||(D=!0,O())}function fr($,re){A=x(function(){$(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,nn(b))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function($){switch(d){case 1:case 2:case 3:var re=3;break;default:re=d}var oe=d;d=re;try{return $()}finally{d=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var oe=d;d=$;try{return re()}finally{d=oe}},t.unstable_scheduleCallback=function($,re,oe){var Ve=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Ve+oe:Ve):oe=Ve,$){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=oe+Te,$={id:c++,callback:re,priorityLevel:$,startTime:oe,expirationTime:Te,sortIndex:-1},oe>Ve?($.sortIndex=oe,e(l,$),r(u)===null&&$===r(l)&&(w?(v(A),A=-1):w=!0,fr(I,oe-Ve))):($.sortIndex=Te,e(u,$),m||p||(m=!0,nn(b))),$},t.unstable_shouldYield=k,t.unstable_wrapCallback=function($){var re=d;return function(){var oe=d;d=re;try{return $.apply(this,arguments)}finally{d=oe}}}})(Jy);Zy.exports=Jy;var $A=Zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA=U,mr=$A;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e_=new Set,Is={};function no(t,e){Xo(t,e),Xo(t+"Capture",e)}function Xo(t,e){for(Is[t]=e,t=0;t<e.length;t++)e_.add(e[t])}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=Object.prototype.hasOwnProperty,KA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rg={},Pg={};function qA(t){return Qh.call(Pg,t)?!0:Qh.call(Rg,t)?!1:KA.test(t)?Pg[t]=!0:(Rg[t]=!0,!1)}function YA(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QA(t,e,r,n){if(e===null||typeof e>"u"||YA(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function er(t,e,r,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new er(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new er(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new er(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new er(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new er(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new er(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new er(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new er(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new er(t,5,!1,t.toLowerCase(),null,!1,!1)});var N0=/[\-:]([a-z])/g;function O0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(N0,O0);Pt[e]=new er(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(N0,O0);Pt[e]=new er(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(N0,O0);Pt[e]=new er(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new er(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new er(t,1,!1,t.toLowerCase(),null,!0,!0)});function b0(t,e,r,n){var i=Pt.hasOwnProperty(e)?Pt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QA(e,r,i,n)&&(r=null),n||i===null?qA(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var On=XA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hu=Symbol.for("react.element"),wo=Symbol.for("react.portal"),xo=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),Zh=Symbol.for("react.profiler"),t_=Symbol.for("react.provider"),r_=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),Jh=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),M0=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),n_=Symbol.for("react.offscreen"),Ng=Symbol.iterator;function Ba(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var We=Object.assign,rh;function Qa(t){if(rh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);rh=e&&e[1]||""}return`
`+rh+t}var nh=!1;function ih(t,e){if(!t||nh)return"";nh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{nh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Qa(t):""}function ZA(t){switch(t.tag){case 5:return Qa(t.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 2:case 15:return t=ih(t.type,!1),t;case 11:return t=ih(t.type.render,!1),t;case 1:return t=ih(t.type,!0),t;default:return""}}function td(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xo:return"Fragment";case wo:return"Portal";case Zh:return"Profiler";case D0:return"StrictMode";case Jh:return"Suspense";case ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r_:return(t.displayName||"Context")+".Consumer";case t_:return(t._context.displayName||"Context")+".Provider";case k0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M0:return e=t.displayName||null,e!==null?e:td(t.type)||"Memo";case Un:e=t._payload,t=t._init;try{return td(t(e))}catch{}}return null}function JA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return td(e);case 8:return e===D0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eI(t){var e=i_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wu(t){t._valueTracker||(t._valueTracker=eI(t))}function o_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=i_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ul(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rd(t,e){var r=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Og(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=gi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function a_(t,e){e=e.checked,e!=null&&b0(t,"checked",e,!1)}function nd(t,e){a_(t,e);var r=gi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?id(t,e.type,r):e.hasOwnProperty("defaultValue")&&id(t,e.type,gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function id(t,e,r){(e!=="number"||Ul(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Za=Array.isArray;function Fo(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+gi(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function od(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(H(92));if(Za(r)){if(1<r.length)throw Error(H(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:gi(r)}}function s_(t,e){var r=gi(e.value),n=gi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function kg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ad(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gu,l_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gu=Gu||document.createElement("div"),Gu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tI=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(t){tI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cs[e]=cs[t]})});function c_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||cs.hasOwnProperty(t)&&cs[t]?(""+e).trim():e+"px"}function f_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=c_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var rI=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sd(t,e){if(e){if(rI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function ud(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=null;function L0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cd=null,Bo=null,Vo=null;function Mg(t){if(t=nu(t)){if(typeof cd!="function")throw Error(H(280));var e=t.stateNode;e&&(e=jc(e),cd(t.stateNode,t.type,e))}}function h_(t){Bo?Vo?Vo.push(t):Vo=[t]:Bo=t}function d_(){if(Bo){var t=Bo,e=Vo;if(Vo=Bo=null,Mg(t),e)for(t=0;t<e.length;t++)Mg(e[t])}}function p_(t,e){return t(e)}function g_(){}var oh=!1;function v_(t,e,r){if(oh)return t(e,r);oh=!0;try{return p_(t,e,r)}finally{oh=!1,(Bo!==null||Vo!==null)&&(g_(),d_())}}function Ts(t,e){var r=t.stateNode;if(r===null)return null;var n=jc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(H(231,e,typeof r));return r}var fd=!1;if(xn)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){fd=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{fd=!1}function nI(t,e,r,n,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(c){this.onError(c)}}var fs=!1,jl=null,zl=!1,hd=null,iI={onError:function(t){fs=!0,jl=t}};function oI(t,e,r,n,i,o,a,s,u){fs=!1,jl=null,nI.apply(iI,arguments)}function aI(t,e,r,n,i,o,a,s,u){if(oI.apply(this,arguments),fs){if(fs){var l=jl;fs=!1,jl=null}else throw Error(H(198));zl||(zl=!0,hd=l)}}function io(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function m_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lg(t){if(io(t)!==t)throw Error(H(188))}function sI(t){var e=t.alternate;if(!e){if(e=io(t),e===null)throw Error(H(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Lg(i),t;if(o===n)return Lg(i),e;o=o.sibling}throw Error(H(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?t:e}function y_(t){return t=sI(t),t!==null?__(t):null}function __(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=__(t);if(e!==null)return e;t=t.sibling}return null}var w_=mr.unstable_scheduleCallback,Fg=mr.unstable_cancelCallback,uI=mr.unstable_shouldYield,lI=mr.unstable_requestPaint,Ze=mr.unstable_now,cI=mr.unstable_getCurrentPriorityLevel,F0=mr.unstable_ImmediatePriority,x_=mr.unstable_UserBlockingPriority,Hl=mr.unstable_NormalPriority,fI=mr.unstable_LowPriority,E_=mr.unstable_IdlePriority,Fc=null,Kr=null;function hI(t){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(Fc,t,void 0,(t.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:gI,dI=Math.log,pI=Math.LN2;function gI(t){return t>>>=0,t===0?32:31-(dI(t)/pI|0)|0}var $u=64,Xu=4194304;function Ja(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=Ja(s):(o&=a,o!==0&&(n=Ja(o)))}else a=r&~i,a!==0?n=Ja(a):o!==0&&(n=Ja(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Br(e),i=1<<r,n|=t[r],e&=~i;return n}function vI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mI(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Br(o),s=1<<a,u=i[a];u===-1?(!(s&r)||s&n)&&(i[a]=vI(s,e)):u<=e&&(t.expiredLanes|=s),o&=~s}}function dd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function A_(){var t=$u;return $u<<=1,!($u&4194240)&&($u=64),t}function ah(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function tu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Br(e),t[e]=r}function yI(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Br(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function B0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Br(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ae=0;function I_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C_,V0,T_,S_,R_,pd=!1,Ku=[],Jn=null,ei=null,ti=null,Ss=new Map,Rs=new Map,Hn=[],_I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bg(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Ss.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(e.pointerId)}}function Ua(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=nu(e),e!==null&&V0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wI(t,e,r,n,i){switch(e){case"focusin":return Jn=Ua(Jn,t,e,r,n,i),!0;case"dragenter":return ei=Ua(ei,t,e,r,n,i),!0;case"mouseover":return ti=Ua(ti,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Ss.set(o,Ua(Ss.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Rs.set(o,Ua(Rs.get(o)||null,t,e,r,n,i)),!0}return!1}function P_(t){var e=Bi(t.target);if(e!==null){var r=io(e);if(r!==null){if(e=r.tag,e===13){if(e=m_(r),e!==null){t.blockedOn=e,R_(t.priority,function(){T_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=gd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);ld=n,r.target.dispatchEvent(n),ld=null}else return e=nu(r),e!==null&&V0(e),t.blockedOn=r,!1;e.shift()}return!0}function Vg(t,e,r){ml(t)&&r.delete(e)}function xI(){pd=!1,Jn!==null&&ml(Jn)&&(Jn=null),ei!==null&&ml(ei)&&(ei=null),ti!==null&&ml(ti)&&(ti=null),Ss.forEach(Vg),Rs.forEach(Vg)}function ja(t,e){t.blockedOn===e&&(t.blockedOn=null,pd||(pd=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,xI)))}function Ps(t){function e(i){return ja(i,t)}if(0<Ku.length){ja(Ku[0],t);for(var r=1;r<Ku.length;r++){var n=Ku[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Jn!==null&&ja(Jn,t),ei!==null&&ja(ei,t),ti!==null&&ja(ti,t),Ss.forEach(e),Rs.forEach(e),r=0;r<Hn.length;r++)n=Hn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Hn.length&&(r=Hn[0],r.blockedOn===null);)P_(r),r.blockedOn===null&&Hn.shift()}var Uo=On.ReactCurrentBatchConfig,Gl=!0;function EI(t,e,r,n){var i=Ae,o=Uo.transition;Uo.transition=null;try{Ae=1,U0(t,e,r,n)}finally{Ae=i,Uo.transition=o}}function AI(t,e,r,n){var i=Ae,o=Uo.transition;Uo.transition=null;try{Ae=4,U0(t,e,r,n)}finally{Ae=i,Uo.transition=o}}function U0(t,e,r,n){if(Gl){var i=gd(t,e,r,n);if(i===null)vh(t,e,n,$l,r),Bg(t,n);else if(wI(i,t,e,r,n))n.stopPropagation();else if(Bg(t,n),e&4&&-1<_I.indexOf(t)){for(;i!==null;){var o=nu(i);if(o!==null&&C_(o),o=gd(t,e,r,n),o===null&&vh(t,e,n,$l,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else vh(t,e,n,null,r)}}var $l=null;function gd(t,e,r,n){if($l=null,t=L0(n),t=Bi(t),t!==null)if(e=io(t),e===null)t=null;else if(r=e.tag,r===13){if(t=m_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $l=t,null}function N_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cI()){case F0:return 1;case x_:return 4;case Hl:case fI:return 16;case E_:return 536870912;default:return 16}default:return 16}}var qn=null,j0=null,yl=null;function O_(){if(yl)return yl;var t,e=j0,r=e.length,n,i="value"in qn?qn.value:qn.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[o-n];n++);return yl=i.slice(t,1<n?1-n:void 0)}function _l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qu(){return!0}function Ug(){return!1}function _r(t){function e(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?qu:Ug,this.isPropagationStopped=Ug,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qu)},persist:function(){},isPersistent:qu}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z0=_r(ha),ru=We({},ha,{view:0,detail:0}),II=_r(ru),sh,uh,za,Bc=We({},ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==za&&(za&&t.type==="mousemove"?(sh=t.screenX-za.screenX,uh=t.screenY-za.screenY):uh=sh=0,za=t),sh)},movementY:function(t){return"movementY"in t?t.movementY:uh}}),jg=_r(Bc),CI=We({},Bc,{dataTransfer:0}),TI=_r(CI),SI=We({},ru,{relatedTarget:0}),lh=_r(SI),RI=We({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),PI=_r(RI),NI=We({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OI=_r(NI),bI=We({},ha,{data:0}),zg=_r(bI),DI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MI[t])?!!e[t]:!1}function H0(){return LI}var FI=We({},ru,{key:function(t){if(t.key){var e=DI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H0,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BI=_r(FI),VI=We({},Bc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hg=_r(VI),UI=We({},ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H0}),jI=_r(UI),zI=We({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),HI=_r(zI),WI=We({},Bc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GI=_r(WI),$I=[9,13,27,32],W0=xn&&"CompositionEvent"in window,hs=null;xn&&"documentMode"in document&&(hs=document.documentMode);var XI=xn&&"TextEvent"in window&&!hs,b_=xn&&(!W0||hs&&8<hs&&11>=hs),Wg=String.fromCharCode(32),Gg=!1;function D_(t,e){switch(t){case"keyup":return $I.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eo=!1;function KI(t,e){switch(t){case"compositionend":return k_(e);case"keypress":return e.which!==32?null:(Gg=!0,Wg);case"textInput":return t=e.data,t===Wg&&Gg?null:t;default:return null}}function qI(t,e){if(Eo)return t==="compositionend"||!W0&&D_(t,e)?(t=O_(),yl=j0=qn=null,Eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b_&&e.locale!=="ko"?null:e.data;default:return null}}var YI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YI[t.type]:e==="textarea"}function M_(t,e,r,n){h_(n),e=Xl(e,"onChange"),0<e.length&&(r=new z0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ds=null,Ns=null;function QI(t){$_(t,0)}function Vc(t){var e=Co(t);if(o_(e))return t}function ZI(t,e){if(t==="change")return e}var L_=!1;if(xn){var ch;if(xn){var fh="oninput"in document;if(!fh){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),fh=typeof Xg.oninput=="function"}ch=fh}else ch=!1;L_=ch&&(!document.documentMode||9<document.documentMode)}function Kg(){ds&&(ds.detachEvent("onpropertychange",F_),Ns=ds=null)}function F_(t){if(t.propertyName==="value"&&Vc(Ns)){var e=[];M_(e,Ns,t,L0(t)),v_(QI,e)}}function JI(t,e,r){t==="focusin"?(Kg(),ds=e,Ns=r,ds.attachEvent("onpropertychange",F_)):t==="focusout"&&Kg()}function eC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vc(Ns)}function tC(t,e){if(t==="click")return Vc(e)}function rC(t,e){if(t==="input"||t==="change")return Vc(e)}function nC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ur=typeof Object.is=="function"?Object.is:nC;function Os(t,e){if(Ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Qh.call(e,i)||!Ur(t[i],e[i]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yg(t,e){var r=qg(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qg(r)}}function B_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?B_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function V_(){for(var t=window,e=Ul();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ul(t.document)}return e}function G0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iC(t){var e=V_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&B_(r.ownerDocument.documentElement,r)){if(n!==null&&G0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=Yg(r,o);var a=Yg(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oC=xn&&"documentMode"in document&&11>=document.documentMode,Ao=null,vd=null,ps=null,md=!1;function Qg(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;md||Ao==null||Ao!==Ul(n)||(n=Ao,"selectionStart"in n&&G0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ps&&Os(ps,n)||(ps=n,n=Xl(vd,"onSelect"),0<n.length&&(e=new z0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ao)))}function Yu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Io={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},hh={},U_={};xn&&(U_=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Uc(t){if(hh[t])return hh[t];if(!Io[t])return t;var e=Io[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in U_)return hh[t]=e[r];return t}var j_=Uc("animationend"),z_=Uc("animationiteration"),H_=Uc("animationstart"),W_=Uc("transitionend"),G_=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(t,e){G_.set(t,e),no(e,[t])}for(var dh=0;dh<Zg.length;dh++){var ph=Zg[dh],aC=ph.toLowerCase(),sC=ph[0].toUpperCase()+ph.slice(1);wi(aC,"on"+sC)}wi(j_,"onAnimationEnd");wi(z_,"onAnimationIteration");wi(H_,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(W_,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uC=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function Jg(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,aI(n,e,void 0,t),t.currentTarget=null}function $_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Jg(i,s,l),o=u}else for(a=0;a<n.length;a++){if(s=n[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Jg(i,s,l),o=u}}}if(zl)throw t=hd,zl=!1,hd=null,t}function De(t,e){var r=e[Ed];r===void 0&&(r=e[Ed]=new Set);var n=t+"__bubble";r.has(n)||(X_(e,t,2,!1),r.add(n))}function gh(t,e,r){var n=0;e&&(n|=4),X_(r,t,n,e)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function bs(t){if(!t[Qu]){t[Qu]=!0,e_.forEach(function(r){r!=="selectionchange"&&(uC.has(r)||gh(r,!1,t),gh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qu]||(e[Qu]=!0,gh("selectionchange",!1,e))}}function X_(t,e,r,n){switch(N_(e)){case 1:var i=EI;break;case 4:i=AI;break;default:i=U0}r=i.bind(null,e,r,t),i=void 0,!fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function vh(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Bi(s),a===null)return;if(u=a.tag,u===5||u===6){n=o=a;continue e}s=s.parentNode}}n=n.return}v_(function(){var l=o,c=L0(r),h=[];e:{var d=G_.get(t);if(d!==void 0){var p=z0,m=t;switch(t){case"keypress":if(_l(r)===0)break e;case"keydown":case"keyup":p=BI;break;case"focusin":m="focus",p=lh;break;case"focusout":m="blur",p=lh;break;case"beforeblur":case"afterblur":p=lh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=TI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=jI;break;case j_:case z_:case H_:p=PI;break;case W_:p=HI;break;case"scroll":p=II;break;case"wheel":p=GI;break;case"copy":case"cut":case"paste":p=OI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Hg}var w=(e&4)!==0,x=!w&&t==="scroll",v=w?d!==null?d+"Capture":null:d;w=[];for(var y=l,E;y!==null;){E=y;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,v!==null&&(I=Ts(y,v),I!=null&&w.push(Ds(y,I,E)))),x)break;y=y.return}0<w.length&&(d=new p(d,m,null,r,c),h.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&r!==ld&&(m=r.relatedTarget||r.fromElement)&&(Bi(m)||m[En]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=l,m=m?Bi(m):null,m!==null&&(x=io(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=l),p!==m)){if(w=jg,I="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=Hg,I="onPointerLeave",v="onPointerEnter",y="pointer"),x=p==null?d:Co(p),E=m==null?d:Co(m),d=new w(I,y+"leave",p,r,c),d.target=x,d.relatedTarget=E,I=null,Bi(c)===l&&(w=new w(v,y+"enter",m,r,c),w.target=E,w.relatedTarget=x,I=w),x=I,p&&m)t:{for(w=p,v=m,y=0,E=w;E;E=po(E))y++;for(E=0,I=v;I;I=po(I))E++;for(;0<y-E;)w=po(w),y--;for(;0<E-y;)v=po(v),E--;for(;y--;){if(w===v||v!==null&&w===v.alternate)break t;w=po(w),v=po(v)}w=null}else w=null;p!==null&&ev(h,d,p,w,!1),m!==null&&x!==null&&ev(h,x,m,w,!0)}}e:{if(d=l?Co(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var b=ZI;else if($g(d))if(L_)b=rC;else{b=eC;var D=JI}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=tC);if(b&&(b=b(t,l))){M_(h,b,r,c);break e}D&&D(t,d,l),t==="focusout"&&(D=d._wrapperState)&&D.controlled&&d.type==="number"&&id(d,"number",d.value)}switch(D=l?Co(l):window,t){case"focusin":($g(D)||D.contentEditable==="true")&&(Ao=D,vd=l,ps=null);break;case"focusout":ps=vd=Ao=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,Qg(h,r,c);break;case"selectionchange":if(oC)break;case"keydown":case"keyup":Qg(h,r,c)}var C;if(W0)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Eo?D_(t,r)&&(A="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(b_&&r.locale!=="ko"&&(Eo||A!=="onCompositionStart"?A==="onCompositionEnd"&&Eo&&(C=O_()):(qn=c,j0="value"in qn?qn.value:qn.textContent,Eo=!0)),D=Xl(l,A),0<D.length&&(A=new zg(A,t,null,r,c),h.push({event:A,listeners:D}),C?A.data=C:(C=k_(r),C!==null&&(A.data=C)))),(C=XI?KI(t,r):qI(t,r))&&(l=Xl(l,"onBeforeInput"),0<l.length&&(c=new zg("onBeforeInput","beforeinput",null,r,c),h.push({event:c,listeners:l}),c.data=C))}$_(h,e)})}function Ds(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Xl(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ts(t,r),o!=null&&n.unshift(Ds(t,o,i)),o=Ts(t,e),o!=null&&n.push(Ds(t,o,i))),t=t.return}return n}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ev(t,e,r,n,i){for(var o=e._reactName,a=[];r!==null&&r!==n;){var s=r,u=s.alternate,l=s.stateNode;if(u!==null&&u===n)break;s.tag===5&&l!==null&&(s=l,i?(u=Ts(r,o),u!=null&&a.unshift(Ds(r,u,s))):i||(u=Ts(r,o),u!=null&&a.push(Ds(r,u,s)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var lC=/\r\n?/g,cC=/\u0000|\uFFFD/g;function tv(t){return(typeof t=="string"?t:""+t).replace(lC,`
`).replace(cC,"")}function Zu(t,e,r){if(e=tv(e),tv(t)!==e&&r)throw Error(H(425))}function Kl(){}var yd=null,_d=null;function wd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xd=typeof setTimeout=="function"?setTimeout:void 0,fC=typeof clearTimeout=="function"?clearTimeout:void 0,rv=typeof Promise=="function"?Promise:void 0,hC=typeof queueMicrotask=="function"?queueMicrotask:typeof rv<"u"?function(t){return rv.resolve(null).then(t).catch(dC)}:xd;function dC(t){setTimeout(function(){throw t})}function mh(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Ps(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ps(e)}function ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var da=Math.random().toString(36).slice(2),$r="__reactFiber$"+da,ks="__reactProps$"+da,En="__reactContainer$"+da,Ed="__reactEvents$"+da,pC="__reactListeners$"+da,gC="__reactHandles$"+da;function Bi(t){var e=t[$r];if(e)return e;for(var r=t.parentNode;r;){if(e=r[En]||r[$r]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=nv(t);t!==null;){if(r=t[$r])return r;t=nv(t)}return e}t=r,r=t.parentNode}return null}function nu(t){return t=t[$r]||t[En],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function jc(t){return t[ks]||null}var Ad=[],To=-1;function xi(t){return{current:t}}function Fe(t){0>To||(t.current=Ad[To],Ad[To]=null,To--)}function Re(t,e){To++,Ad[To]=t.current,t.current=e}var vi={},Ht=xi(vi),ar=xi(!1),Xi=vi;function Ko(t,e){var r=t.type.contextTypes;if(!r)return vi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function sr(t){return t=t.childContextTypes,t!=null}function ql(){Fe(ar),Fe(Ht)}function iv(t,e,r){if(Ht.current!==vi)throw Error(H(168));Re(Ht,e),Re(ar,r)}function K_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(H(108,JA(t)||"Unknown",i));return We({},r,n)}function Yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vi,Xi=Ht.current,Re(Ht,t),Re(ar,ar.current),!0}function ov(t,e,r){var n=t.stateNode;if(!n)throw Error(H(169));r?(t=K_(t,e,Xi),n.__reactInternalMemoizedMergedChildContext=t,Fe(ar),Fe(Ht),Re(Ht,t)):Fe(ar),Re(ar,r)}var hn=null,zc=!1,yh=!1;function q_(t){hn===null?hn=[t]:hn.push(t)}function vC(t){zc=!0,q_(t)}function Ei(){if(!yh&&hn!==null){yh=!0;var t=0,e=Ae;try{var r=hn;for(Ae=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}hn=null,zc=!1}catch(i){throw hn!==null&&(hn=hn.slice(t+1)),w_(F0,Ei),i}finally{Ae=e,yh=!1}}return null}var So=[],Ro=0,Ql=null,Zl=0,xr=[],Er=0,Ki=null,dn=1,pn="";function ki(t,e){So[Ro++]=Zl,So[Ro++]=Ql,Ql=t,Zl=e}function Y_(t,e,r){xr[Er++]=dn,xr[Er++]=pn,xr[Er++]=Ki,Ki=t;var n=dn;t=pn;var i=32-Br(n)-1;n&=~(1<<i),r+=1;var o=32-Br(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,dn=1<<32-Br(e)+i|r<<i|n,pn=o+t}else dn=1<<o|r<<i|n,pn=t}function $0(t){t.return!==null&&(ki(t,1),Y_(t,1,0))}function X0(t){for(;t===Ql;)Ql=So[--Ro],So[Ro]=null,Zl=So[--Ro],So[Ro]=null;for(;t===Ki;)Ki=xr[--Er],xr[Er]=null,pn=xr[--Er],xr[Er]=null,dn=xr[--Er],xr[Er]=null}var vr=null,pr=null,Be=!1,Mr=null;function Q_(t,e){var r=Ar(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function av(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vr=t,pr=ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vr=t,pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ki!==null?{id:dn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ar(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,vr=t,pr=null,!0):!1;default:return!1}}function Id(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cd(t){if(Be){var e=pr;if(e){var r=e;if(!av(t,e)){if(Id(t))throw Error(H(418));e=ri(r.nextSibling);var n=vr;e&&av(t,e)?Q_(n,r):(t.flags=t.flags&-4097|2,Be=!1,vr=t)}}else{if(Id(t))throw Error(H(418));t.flags=t.flags&-4097|2,Be=!1,vr=t}}}function sv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vr=t}function Ju(t){if(t!==vr)return!1;if(!Be)return sv(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wd(t.type,t.memoizedProps)),e&&(e=pr)){if(Id(t))throw Z_(),Error(H(418));for(;e;)Q_(t,e),e=ri(e.nextSibling)}if(sv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){pr=ri(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}pr=null}}else pr=vr?ri(t.stateNode.nextSibling):null;return!0}function Z_(){for(var t=pr;t;)t=ri(t.nextSibling)}function qo(){pr=vr=null,Be=!1}function K0(t){Mr===null?Mr=[t]:Mr.push(t)}var mC=On.ReactCurrentBatchConfig;function Ha(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,t))}return t}function el(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uv(t){var e=t._init;return e(t._payload)}function J_(t){function e(v,y){if(t){var E=v.deletions;E===null?(v.deletions=[y],v.flags|=16):E.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=ai(v,y),v.index=0,v.sibling=null,v}function o(v,y,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<y?(v.flags|=2,y):E):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function s(v,y,E,I){return y===null||y.tag!==6?(y=Ch(E,v.mode,I),y.return=v,y):(y=i(y,E),y.return=v,y)}function u(v,y,E,I){var b=E.type;return b===xo?c(v,y,E.props.children,I,E.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Un&&uv(b)===y.type)?(I=i(y,E.props),I.ref=Ha(v,y,E),I.return=v,I):(I=Tl(E.type,E.key,E.props,null,v.mode,I),I.ref=Ha(v,y,E),I.return=v,I)}function l(v,y,E,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Th(E,v.mode,I),y.return=v,y):(y=i(y,E.children||[]),y.return=v,y)}function c(v,y,E,I,b){return y===null||y.tag!==7?(y=Wi(E,v.mode,I,b),y.return=v,y):(y=i(y,E),y.return=v,y)}function h(v,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ch(""+y,v.mode,E),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hu:return E=Tl(y.type,y.key,y.props,null,v.mode,E),E.ref=Ha(v,null,y),E.return=v,E;case wo:return y=Th(y,v.mode,E),y.return=v,y;case Un:var I=y._init;return h(v,I(y._payload),E)}if(Za(y)||Ba(y))return y=Wi(y,v.mode,E,null),y.return=v,y;el(v,y)}return null}function d(v,y,E,I){var b=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return b!==null?null:s(v,y,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Hu:return E.key===b?u(v,y,E,I):null;case wo:return E.key===b?l(v,y,E,I):null;case Un:return b=E._init,d(v,y,b(E._payload),I)}if(Za(E)||Ba(E))return b!==null?null:c(v,y,E,I,null);el(v,E)}return null}function p(v,y,E,I,b){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(E)||null,s(y,v,""+I,b);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Hu:return v=v.get(I.key===null?E:I.key)||null,u(y,v,I,b);case wo:return v=v.get(I.key===null?E:I.key)||null,l(y,v,I,b);case Un:var D=I._init;return p(v,y,E,D(I._payload),b)}if(Za(I)||Ba(I))return v=v.get(E)||null,c(y,v,I,b,null);el(y,I)}return null}function m(v,y,E,I){for(var b=null,D=null,C=y,A=y=0,R=null;C!==null&&A<E.length;A++){C.index>A?(R=C,C=null):R=C.sibling;var N=d(v,C,E[A],I);if(N===null){C===null&&(C=R);break}t&&C&&N.alternate===null&&e(v,C),y=o(N,y,A),D===null?b=N:D.sibling=N,D=N,C=R}if(A===E.length)return r(v,C),Be&&ki(v,A),b;if(C===null){for(;A<E.length;A++)C=h(v,E[A],I),C!==null&&(y=o(C,y,A),D===null?b=C:D.sibling=C,D=C);return Be&&ki(v,A),b}for(C=n(v,C);A<E.length;A++)R=p(C,v,A,E[A],I),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?A:R.key),y=o(R,y,A),D===null?b=R:D.sibling=R,D=R);return t&&C.forEach(function(k){return e(v,k)}),Be&&ki(v,A),b}function w(v,y,E,I){var b=Ba(E);if(typeof b!="function")throw Error(H(150));if(E=b.call(E),E==null)throw Error(H(151));for(var D=b=null,C=y,A=y=0,R=null,N=E.next();C!==null&&!N.done;A++,N=E.next()){C.index>A?(R=C,C=null):R=C.sibling;var k=d(v,C,N.value,I);if(k===null){C===null&&(C=R);break}t&&C&&k.alternate===null&&e(v,C),y=o(k,y,A),D===null?b=k:D.sibling=k,D=k,C=R}if(N.done)return r(v,C),Be&&ki(v,A),b;if(C===null){for(;!N.done;A++,N=E.next())N=h(v,N.value,I),N!==null&&(y=o(N,y,A),D===null?b=N:D.sibling=N,D=N);return Be&&ki(v,A),b}for(C=n(v,C);!N.done;A++,N=E.next())N=p(C,v,A,N.value,I),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?A:N.key),y=o(N,y,A),D===null?b=N:D.sibling=N,D=N);return t&&C.forEach(function(M){return e(v,M)}),Be&&ki(v,A),b}function x(v,y,E,I){if(typeof E=="object"&&E!==null&&E.type===xo&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Hu:e:{for(var b=E.key,D=y;D!==null;){if(D.key===b){if(b=E.type,b===xo){if(D.tag===7){r(v,D.sibling),y=i(D,E.props.children),y.return=v,v=y;break e}}else if(D.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Un&&uv(b)===D.type){r(v,D.sibling),y=i(D,E.props),y.ref=Ha(v,D,E),y.return=v,v=y;break e}r(v,D);break}else e(v,D);D=D.sibling}E.type===xo?(y=Wi(E.props.children,v.mode,I,E.key),y.return=v,v=y):(I=Tl(E.type,E.key,E.props,null,v.mode,I),I.ref=Ha(v,y,E),I.return=v,v=I)}return a(v);case wo:e:{for(D=E.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){r(v,y.sibling),y=i(y,E.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else e(v,y);y=y.sibling}y=Th(E,v.mode,I),y.return=v,v=y}return a(v);case Un:return D=E._init,x(v,y,D(E._payload),I)}if(Za(E))return m(v,y,E,I);if(Ba(E))return w(v,y,E,I);el(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(r(v,y.sibling),y=i(y,E),y.return=v,v=y):(r(v,y),y=Ch(E,v.mode,I),y.return=v,v=y),a(v)):r(v,y)}return x}var Yo=J_(!0),e2=J_(!1),Jl=xi(null),ec=null,Po=null,q0=null;function Y0(){q0=Po=ec=null}function Q0(t){var e=Jl.current;Fe(Jl),t._currentValue=e}function Td(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function jo(t,e){ec=t,q0=Po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(or=!0),t.firstContext=null)}function Rr(t){var e=t._currentValue;if(q0!==t)if(t={context:t,memoizedValue:e,next:null},Po===null){if(ec===null)throw Error(H(308));Po=t,ec.dependencies={lanes:0,firstContext:t}}else Po=Po.next=t;return e}var Vi=null;function Z0(t){Vi===null?Vi=[t]:Vi.push(t)}function t2(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Z0(e)):(r.next=i.next,i.next=r),e.interleaved=r,An(t,n)}function An(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var jn=!1;function J0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pe&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,An(t,r)}return i=n.interleaved,i===null?(e.next=e,Z0(n)):(e.next=i.next,i.next=e),n.interleaved=e,An(t,r)}function wl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,B0(t,r)}}function lv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function tc(t,e,r,n){var i=t.updateQueue;jn=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(o!==null){var h=i.baseState;a=0,c=l=u=null,s=o;do{var d=s.lane,p=s.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=t,w=s;switch(d=e,p=r,w.tag){case 1:if(m=w.payload,typeof m=="function"){h=m.call(p,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=w.payload,d=typeof m=="function"?m.call(p,h,d):m,d==null)break e;h=We({},h,d);break e;case 2:jn=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=p,u=h):c=c.next=p,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Yi|=a,t.lanes=a,t.memoizedState=h}}function cv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(H(191,i));i.call(n)}}}var iu={},qr=xi(iu),Ms=xi(iu),Ls=xi(iu);function Ui(t){if(t===iu)throw Error(H(174));return t}function e1(t,e){switch(Re(Ls,e),Re(Ms,t),Re(qr,iu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ad(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ad(e,t)}Fe(qr),Re(qr,e)}function Qo(){Fe(qr),Fe(Ms),Fe(Ls)}function n2(t){Ui(Ls.current);var e=Ui(qr.current),r=ad(e,t.type);e!==r&&(Re(Ms,t),Re(qr,r))}function t1(t){Ms.current===t&&(Fe(qr),Fe(Ms))}var ze=xi(0);function rc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _h=[];function r1(){for(var t=0;t<_h.length;t++)_h[t]._workInProgressVersionPrimary=null;_h.length=0}var xl=On.ReactCurrentDispatcher,wh=On.ReactCurrentBatchConfig,qi=0,He=null,ot=null,vt=null,nc=!1,gs=!1,Fs=0,yC=0;function Mt(){throw Error(H(321))}function n1(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ur(t[r],e[r]))return!1;return!0}function i1(t,e,r,n,i,o){if(qi=o,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xl.current=t===null||t.memoizedState===null?EC:AC,t=r(n,i),gs){o=0;do{if(gs=!1,Fs=0,25<=o)throw Error(H(301));o+=1,vt=ot=null,e.updateQueue=null,xl.current=IC,t=r(n,i)}while(gs)}if(xl.current=ic,e=ot!==null&&ot.next!==null,qi=0,vt=ot=He=null,nc=!1,e)throw Error(H(300));return t}function o1(){var t=Fs!==0;return Fs=0,t}function Gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?He.memoizedState=vt=t:vt=vt.next=t,vt}function Pr(){if(ot===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=vt===null?He.memoizedState:vt.next;if(e!==null)vt=e,ot=t;else{if(t===null)throw Error(H(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},vt===null?He.memoizedState=vt=t:vt=vt.next=t}return vt}function Bs(t,e){return typeof e=="function"?e(t):e}function xh(t){var e=Pr(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=ot,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,u=null,l=o;do{var c=l.lane;if((qi&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=h,a=n):u=u.next=h,He.lanes|=c,Yi|=c}l=l.next}while(l!==null&&l!==o);u===null?a=n:u.next=s,Ur(n,e.memoizedState)||(or=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,He.lanes|=o,Yi|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Eh(t){var e=Pr(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Ur(o,e.memoizedState)||(or=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function i2(){}function o2(t,e){var r=He,n=Pr(),i=e(),o=!Ur(n.memoizedState,i);if(o&&(n.memoizedState=i,or=!0),n=n.queue,a1(u2.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||vt!==null&&vt.memoizedState.tag&1){if(r.flags|=2048,Vs(9,s2.bind(null,r,n,i,e),void 0,null),_t===null)throw Error(H(349));qi&30||a2(r,e,i)}return i}function a2(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function s2(t,e,r,n){e.value=r,e.getSnapshot=n,l2(e)&&c2(t)}function u2(t,e,r){return r(function(){l2(e)&&c2(t)})}function l2(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ur(t,r)}catch{return!0}}function c2(t){var e=An(t,1);e!==null&&Vr(e,t,1,-1)}function fv(t){var e=Gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:t},e.queue=t,t=t.dispatch=xC.bind(null,He,t),[e.memoizedState,t]}function Vs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function f2(){return Pr().memoizedState}function El(t,e,r,n){var i=Gr();He.flags|=t,i.memoizedState=Vs(1|e,r,void 0,n===void 0?null:n)}function Hc(t,e,r,n){var i=Pr();n=n===void 0?null:n;var o=void 0;if(ot!==null){var a=ot.memoizedState;if(o=a.destroy,n!==null&&n1(n,a.deps)){i.memoizedState=Vs(e,r,o,n);return}}He.flags|=t,i.memoizedState=Vs(1|e,r,o,n)}function hv(t,e){return El(8390656,8,t,e)}function a1(t,e){return Hc(2048,8,t,e)}function h2(t,e){return Hc(4,2,t,e)}function d2(t,e){return Hc(4,4,t,e)}function p2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g2(t,e,r){return r=r!=null?r.concat([t]):null,Hc(4,4,p2.bind(null,e,t),r)}function s1(){}function v2(t,e){var r=Pr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&n1(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function m2(t,e){var r=Pr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&n1(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function y2(t,e,r){return qi&21?(Ur(r,e)||(r=A_(),He.lanes|=r,Yi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,or=!0),t.memoizedState=r)}function _C(t,e){var r=Ae;Ae=r!==0&&4>r?r:4,t(!0);var n=wh.transition;wh.transition={};try{t(!1),e()}finally{Ae=r,wh.transition=n}}function _2(){return Pr().memoizedState}function wC(t,e,r){var n=oi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},w2(t))x2(e,r);else if(r=t2(t,e,r,n),r!==null){var i=Zt();Vr(r,t,n,i),E2(r,e,n)}}function xC(t,e,r){var n=oi(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(w2(t))x2(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,Ur(s,a)){var u=e.interleaved;u===null?(i.next=i,Z0(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}r=t2(t,e,i,n),r!==null&&(i=Zt(),Vr(r,t,n,i),E2(r,e,n))}}function w2(t){var e=t.alternate;return t===He||e!==null&&e===He}function x2(t,e){gs=nc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function E2(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,B0(t,r)}}var ic={readContext:Rr,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},EC={readContext:Rr,useCallback:function(t,e){return Gr().memoizedState=[t,e===void 0?null:e],t},useContext:Rr,useEffect:hv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,El(4194308,4,p2.bind(null,e,t),r)},useLayoutEffect:function(t,e){return El(4194308,4,t,e)},useInsertionEffect:function(t,e){return El(4,2,t,e)},useMemo:function(t,e){var r=Gr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Gr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=wC.bind(null,He,t),[n.memoizedState,t]},useRef:function(t){var e=Gr();return t={current:t},e.memoizedState=t},useState:fv,useDebugValue:s1,useDeferredValue:function(t){return Gr().memoizedState=t},useTransition:function(){var t=fv(!1),e=t[0];return t=_C.bind(null,t[1]),Gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=He,i=Gr();if(Be){if(r===void 0)throw Error(H(407));r=r()}else{if(r=e(),_t===null)throw Error(H(349));qi&30||a2(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,hv(u2.bind(null,n,o,t),[t]),n.flags|=2048,Vs(9,s2.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Gr(),e=_t.identifierPrefix;if(Be){var r=pn,n=dn;r=(n&~(1<<32-Br(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Fs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=yC++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AC={readContext:Rr,useCallback:v2,useContext:Rr,useEffect:a1,useImperativeHandle:g2,useInsertionEffect:h2,useLayoutEffect:d2,useMemo:m2,useReducer:xh,useRef:f2,useState:function(){return xh(Bs)},useDebugValue:s1,useDeferredValue:function(t){var e=Pr();return y2(e,ot.memoizedState,t)},useTransition:function(){var t=xh(Bs)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:i2,useSyncExternalStore:o2,useId:_2,unstable_isNewReconciler:!1},IC={readContext:Rr,useCallback:v2,useContext:Rr,useEffect:a1,useImperativeHandle:g2,useInsertionEffect:h2,useLayoutEffect:d2,useMemo:m2,useReducer:Eh,useRef:f2,useState:function(){return Eh(Bs)},useDebugValue:s1,useDeferredValue:function(t){var e=Pr();return ot===null?e.memoizedState=t:y2(e,ot.memoizedState,t)},useTransition:function(){var t=Eh(Bs)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:i2,useSyncExternalStore:o2,useId:_2,unstable_isNewReconciler:!1};function Dr(t,e){if(t&&t.defaultProps){e=We({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Sd(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:We({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Wc={isMounted:function(t){return(t=t._reactInternals)?io(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Zt(),i=oi(t),o=_n(n,i);o.payload=e,r!=null&&(o.callback=r),e=ni(t,o,i),e!==null&&(Vr(e,t,i,n),wl(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Zt(),i=oi(t),o=_n(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=ni(t,o,i),e!==null&&(Vr(e,t,i,n),wl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Zt(),n=oi(t),i=_n(r,n);i.tag=2,e!=null&&(i.callback=e),e=ni(t,i,n),e!==null&&(Vr(e,t,n,r),wl(e,t,n))}};function dv(t,e,r,n,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!Os(r,n)||!Os(i,o):!0}function A2(t,e,r){var n=!1,i=vi,o=e.contextType;return typeof o=="object"&&o!==null?o=Rr(o):(i=sr(e)?Xi:Ht.current,n=e.contextTypes,o=(n=n!=null)?Ko(t,i):vi),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function pv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Wc.enqueueReplaceState(e,e.state,null)}function Rd(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},J0(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Rr(o):(o=sr(e)?Xi:Ht.current,i.context=Ko(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Sd(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wc.enqueueReplaceState(i,i.state,null),tc(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var r="",n=e;do r+=ZA(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Ah(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Pd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var CC=typeof WeakMap=="function"?WeakMap:Map;function I2(t,e,r){r=_n(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ac||(ac=!0,Vd=n),Pd(t,e)},r}function C2(t,e,r){r=_n(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Pd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Pd(t,e),typeof n!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function gv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new CC;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=VC.bind(null,t,e,r),e.then(t,t))}function vv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mv(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=_n(-1,1),e.tag=2,ni(r,e,1))),r.lanes|=1),t)}var TC=On.ReactCurrentOwner,or=!1;function Qt(t,e,r,n){e.child=t===null?e2(e,null,r,n):Yo(e,t.child,r,n)}function yv(t,e,r,n,i){r=r.render;var o=e.ref;return jo(e,i),n=i1(t,e,r,n,o,i),r=o1(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,In(t,e,i)):(Be&&r&&$0(e),e.flags|=1,Qt(t,e,n,i),e.child)}function _v(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!g1(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,T2(t,e,o,n,i)):(t=Tl(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Os,r(a,n)&&t.ref===e.ref)return In(t,e,i)}return e.flags|=1,t=ai(o,n),t.ref=e.ref,t.return=e,e.child=t}function T2(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(Os(o,n)&&t.ref===e.ref)if(or=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(or=!0);else return e.lanes=t.lanes,In(t,e,i)}return Nd(t,e,r,n,i)}function S2(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Oo,dr),dr|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Oo,dr),dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Re(Oo,dr),dr|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Re(Oo,dr),dr|=n;return Qt(t,e,i,r),e.child}function R2(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Nd(t,e,r,n,i){var o=sr(r)?Xi:Ht.current;return o=Ko(e,o),jo(e,i),r=i1(t,e,r,n,o,i),n=o1(),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,In(t,e,i)):(Be&&n&&$0(e),e.flags|=1,Qt(t,e,r,i),e.child)}function wv(t,e,r,n,i){if(sr(r)){var o=!0;Yl(e)}else o=!1;if(jo(e,i),e.stateNode===null)Al(t,e),A2(e,r,n),Rd(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=Rr(l):(l=sr(r)?Xi:Ht.current,l=Ko(e,l));var c=r.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||u!==l)&&pv(e,a,n,l),jn=!1;var d=e.memoizedState;a.state=d,tc(e,n,a,i),u=e.memoizedState,s!==n||d!==u||ar.current||jn?(typeof c=="function"&&(Sd(e,r,c,n),u=e.memoizedState),(s=jn||dv(e,r,s,n,d,u,l))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=l,n=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,r2(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Dr(e.type,s),a.props=l,h=e.pendingProps,d=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Rr(u):(u=sr(r)?Xi:Ht.current,u=Ko(e,u));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==h||d!==u)&&pv(e,a,n,u),jn=!1,d=e.memoizedState,a.state=d,tc(e,n,a,i);var m=e.memoizedState;s!==h||d!==m||ar.current||jn?(typeof p=="function"&&(Sd(e,r,p,n),m=e.memoizedState),(l=jn||dv(e,r,l,n,d,m,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),a.props=n,a.state=m,a.context=u,n=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return Od(t,e,r,n,o,i)}function Od(t,e,r,n,i,o){R2(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&ov(e,r,!1),In(t,e,o);n=e.stateNode,TC.current=e;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Yo(e,t.child,null,o),e.child=Yo(e,null,s,o)):Qt(t,e,s,o),e.memoizedState=n.state,i&&ov(e,r,!0),e.child}function P2(t){var e=t.stateNode;e.pendingContext?iv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iv(t,e.context,!1),e1(t,e.containerInfo)}function xv(t,e,r,n,i){return qo(),K0(i),e.flags|=256,Qt(t,e,r,n),e.child}var bd={dehydrated:null,treeContext:null,retryLane:0};function Dd(t){return{baseLanes:t,cachePool:null,transitions:null}}function N2(t,e,r){var n=e.pendingProps,i=ze.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Re(ze,i&1),t===null)return Cd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Xc(a,n,0,null),t=Wi(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Dd(r),e.memoizedState=bd,t):u1(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return SC(t,e,a,n,s,i,r);if(o){o=n.fallback,a=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ai(i,u),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=ai(s,o):(o=Wi(o,a,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?Dd(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=bd,n}return o=t.child,t=o.sibling,n=ai(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function u1(t,e){return e=Xc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tl(t,e,r,n){return n!==null&&K0(n),Yo(e,t.child,null,r),t=u1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SC(t,e,r,n,i,o,a){if(r)return e.flags&256?(e.flags&=-257,n=Ah(Error(H(422))),tl(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=Xc({mode:"visible",children:n.children},i,0,null),o=Wi(o,i,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Yo(e,t.child,null,a),e.child.memoizedState=Dd(a),e.memoizedState=bd,o);if(!(e.mode&1))return tl(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(H(419)),n=Ah(o,n,void 0),tl(t,e,a,n)}if(s=(a&t.childLanes)!==0,or||s){if(n=_t,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,An(t,i),Vr(n,t,i,-1))}return p1(),n=Ah(Error(H(421))),tl(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UC.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,pr=ri(i.nextSibling),vr=e,Be=!0,Mr=null,t!==null&&(xr[Er++]=dn,xr[Er++]=pn,xr[Er++]=Ki,dn=t.id,pn=t.overflow,Ki=e),e=u1(e,n.children),e.flags|=4096,e)}function Ev(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Td(t.return,e,r)}function Ih(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function O2(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Qt(t,e,n.children,r),n=ze.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,r,e);else if(t.tag===19)Ev(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Re(ze,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&rc(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Ih(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rc(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Ih(e,!0,r,null,o);break;case"together":Ih(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function In(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,r=ai(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ai(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function RC(t,e,r){switch(e.tag){case 3:P2(e),qo();break;case 5:n2(e);break;case 1:sr(e.type)&&Yl(e);break;case 4:e1(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Re(Jl,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Re(ze,ze.current&1),e.flags|=128,null):r&e.child.childLanes?N2(t,e,r):(Re(ze,ze.current&1),t=In(t,e,r),t!==null?t.sibling:null);Re(ze,ze.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return O2(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(ze,ze.current),n)break;return null;case 22:case 23:return e.lanes=0,S2(t,e,r)}return In(t,e,r)}var b2,kd,D2,k2;b2=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};kd=function(){};D2=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ui(qr.current);var o=null;switch(r){case"input":i=rd(t,i),n=rd(t,n),o=[];break;case"select":i=We({},i,{value:void 0}),n=We({},n,{value:void 0}),o=[];break;case"textarea":i=od(t,i),n=od(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Kl)}sd(r,n);var a;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Is.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var u=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Is.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&De("scroll",t),o||s===u||(o=[])):(o=o||[]).push(l,u))}r&&(o=o||[]).push("style",r);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};k2=function(t,e,r,n){r!==n&&(e.flags|=4)};function Wa(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function PC(t,e,r){var n=e.pendingProps;switch(X0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return sr(e.type)&&ql(),Lt(e),null;case 3:return n=e.stateNode,Qo(),Fe(ar),Fe(Ht),r1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ju(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(zd(Mr),Mr=null))),kd(t,e),Lt(e),null;case 5:t1(e);var i=Ui(Ls.current);if(r=e.type,t!==null&&e.stateNode!=null)D2(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(H(166));return Lt(e),null}if(t=Ui(qr.current),Ju(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[$r]=e,n[ks]=o,t=(e.mode&1)!==0,r){case"dialog":De("cancel",n),De("close",n);break;case"iframe":case"object":case"embed":De("load",n);break;case"video":case"audio":for(i=0;i<es.length;i++)De(es[i],n);break;case"source":De("error",n);break;case"img":case"image":case"link":De("error",n),De("load",n);break;case"details":De("toggle",n);break;case"input":Og(n,o),De("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},De("invalid",n);break;case"textarea":Dg(n,o),De("invalid",n)}sd(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&Zu(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Zu(n.textContent,s,t),i=["children",""+s]):Is.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&De("scroll",n)}switch(r){case"input":Wu(n),bg(n,o,!0);break;case"textarea":Wu(n),kg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Kl)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[$r]=e,t[ks]=n,b2(t,e,!1,!1),e.stateNode=t;e:{switch(a=ud(r,n),r){case"dialog":De("cancel",t),De("close",t),i=n;break;case"iframe":case"object":case"embed":De("load",t),i=n;break;case"video":case"audio":for(i=0;i<es.length;i++)De(es[i],t);i=n;break;case"source":De("error",t),i=n;break;case"img":case"image":case"link":De("error",t),De("load",t),i=n;break;case"details":De("toggle",t),i=n;break;case"input":Og(t,n),i=rd(t,n),De("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=We({},n,{value:void 0}),De("invalid",t);break;case"textarea":Dg(t,n),i=od(t,n),De("invalid",t);break;default:i=n}sd(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?f_(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&l_(t,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Cs(t,u):typeof u=="number"&&Cs(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Is.hasOwnProperty(o)?u!=null&&o==="onScroll"&&De("scroll",t):u!=null&&b0(t,o,u,a))}switch(r){case"input":Wu(t),bg(t,n,!1);break;case"textarea":Wu(t),kg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+gi(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Fo(t,!!n.multiple,o,!1):n.defaultValue!=null&&Fo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)k2(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(H(166));if(r=Ui(Ls.current),Ui(qr.current),Ju(e)){if(n=e.stateNode,r=e.memoizedProps,n[$r]=e,(o=n.nodeValue!==r)&&(t=vr,t!==null))switch(t.tag){case 3:Zu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zu(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$r]=e,e.stateNode=n}return Lt(e),null;case 13:if(Fe(ze),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&pr!==null&&e.mode&1&&!(e.flags&128))Z_(),qo(),e.flags|=98560,o=!1;else if(o=Ju(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(H(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[$r]=e}else qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),o=!1}else Mr!==null&&(zd(Mr),Mr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?lt===0&&(lt=3):p1())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Qo(),kd(t,e),t===null&&bs(e.stateNode.containerInfo),Lt(e),null;case 10:return Q0(e.type._context),Lt(e),null;case 17:return sr(e.type)&&ql(),Lt(e),null;case 19:if(Fe(ze),o=e.memoizedState,o===null)return Lt(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)Wa(o,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=rc(t),a!==null){for(e.flags|=128,Wa(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Re(ze,ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ze()>Jo&&(e.flags|=128,n=!0,Wa(o,!1),e.lanes=4194304)}else{if(!n)if(t=rc(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Wa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Be)return Lt(e),null}else 2*Ze()-o.renderingStartTime>Jo&&r!==1073741824&&(e.flags|=128,n=!0,Wa(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ze(),e.sibling=null,r=ze.current,Re(ze,n?r&1|2:r&1),e):(Lt(e),null);case 22:case 23:return d1(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?dr&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function NC(t,e){switch(X0(e),e.tag){case 1:return sr(e.type)&&ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qo(),Fe(ar),Fe(Ht),r1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return t1(e),null;case 13:if(Fe(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(ze),null;case 4:return Qo(),null;case 10:return Q0(e.type._context),null;case 22:case 23:return d1(),null;case 24:return null;default:return null}}var rl=!1,Ut=!1,OC=typeof WeakSet=="function"?WeakSet:Set,K=null;function No(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Xe(t,e,n)}else r.current=null}function Md(t,e,r){try{r()}catch(n){Xe(t,e,n)}}var Av=!1;function bC(t,e){if(yd=Gl,t=V_(),G0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,u=-1,l=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(s=a+i),h!==o||n!==0&&h.nodeType!==3||(u=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===r&&++l===i&&(s=a),d===o&&++c===n&&(u=a),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}r=s===-1||u===-1?null:{start:s,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(_d={focusedElem:t,selectionRange:r},Gl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var w=m.memoizedProps,x=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Dr(e.type,w),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(I){Xe(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return m=Av,Av=!1,m}function vs(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Md(e,r,o)}i=i.next}while(i!==n)}}function Gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ld(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function M2(t){var e=t.alternate;e!==null&&(t.alternate=null,M2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$r],delete e[ks],delete e[Ed],delete e[pC],delete e[gC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L2(t){return t.tag===5||t.tag===3||t.tag===4}function Iv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Kl));else if(n!==4&&(t=t.child,t!==null))for(Fd(t,e,r),t=t.sibling;t!==null;)Fd(t,e,r),t=t.sibling}function Bd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Bd(t,e,r),t=t.sibling;t!==null;)Bd(t,e,r),t=t.sibling}var At=null,kr=!1;function Ln(t,e,r){for(r=r.child;r!==null;)F2(t,e,r),r=r.sibling}function F2(t,e,r){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(Fc,r)}catch{}switch(r.tag){case 5:Ut||No(r,e);case 6:var n=At,i=kr;At=null,Ln(t,e,r),At=n,kr=i,At!==null&&(kr?(t=At,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):At.removeChild(r.stateNode));break;case 18:At!==null&&(kr?(t=At,r=r.stateNode,t.nodeType===8?mh(t.parentNode,r):t.nodeType===1&&mh(t,r),Ps(t)):mh(At,r.stateNode));break;case 4:n=At,i=kr,At=r.stateNode.containerInfo,kr=!0,Ln(t,e,r),At=n,kr=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Md(r,e,a),i=i.next}while(i!==n)}Ln(t,e,r);break;case 1:if(!Ut&&(No(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Xe(r,e,s)}Ln(t,e,r);break;case 21:Ln(t,e,r);break;case 22:r.mode&1?(Ut=(n=Ut)||r.memoizedState!==null,Ln(t,e,r),Ut=n):Ln(t,e,r);break;default:Ln(t,e,r)}}function Cv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new OC),e.forEach(function(n){var i=jC.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Or(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:At=s.stateNode,kr=!1;break e;case 3:At=s.stateNode.containerInfo,kr=!0;break e;case 4:At=s.stateNode.containerInfo,kr=!0;break e}s=s.return}if(At===null)throw Error(H(160));F2(o,a,i),At=null,kr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Xe(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B2(e,t),e=e.sibling}function B2(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Or(e,t),Wr(t),n&4){try{vs(3,t,t.return),Gc(3,t)}catch(w){Xe(t,t.return,w)}try{vs(5,t,t.return)}catch(w){Xe(t,t.return,w)}}break;case 1:Or(e,t),Wr(t),n&512&&r!==null&&No(r,r.return);break;case 5:if(Or(e,t),Wr(t),n&512&&r!==null&&No(r,r.return),t.flags&32){var i=t.stateNode;try{Cs(i,"")}catch(w){Xe(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&a_(i,o),ud(s,a);var l=ud(s,o);for(a=0;a<u.length;a+=2){var c=u[a],h=u[a+1];c==="style"?f_(i,h):c==="dangerouslySetInnerHTML"?l_(i,h):c==="children"?Cs(i,h):b0(i,c,h,l)}switch(s){case"input":nd(i,o);break;case"textarea":s_(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Fo(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?Fo(i,!!o.multiple,o.defaultValue,!0):Fo(i,!!o.multiple,o.multiple?[]:"",!1))}i[ks]=o}catch(w){Xe(t,t.return,w)}}break;case 6:if(Or(e,t),Wr(t),n&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(w){Xe(t,t.return,w)}}break;case 3:if(Or(e,t),Wr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ps(e.containerInfo)}catch(w){Xe(t,t.return,w)}break;case 4:Or(e,t),Wr(t);break;case 13:Or(e,t),Wr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(f1=Ze())),n&4&&Cv(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Ut=(l=Ut)||c,Or(e,t),Ut=l):Or(e,t),Wr(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(K=t,c=t.child;c!==null;){for(h=K=c;K!==null;){switch(d=K,p=d.child,d.tag){case 0:case 11:case 14:case 15:vs(4,d,d.return);break;case 1:No(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(w){Xe(n,r,w)}}break;case 5:No(d,d.return);break;case 22:if(d.memoizedState!==null){Sv(h);continue}}p!==null?(p.return=d,K=p):Sv(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=c_("display",a))}catch(w){Xe(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(w){Xe(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Or(e,t),Wr(t),n&4&&Cv(t);break;case 21:break;default:Or(e,t),Wr(t)}}function Wr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(L2(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Cs(i,""),n.flags&=-33);var o=Iv(t);Bd(t,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=Iv(t);Fd(t,s,a);break;default:throw Error(H(161))}}catch(u){Xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DC(t,e,r){K=t,V2(t)}function V2(t,e,r){for(var n=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||rl;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||Ut;s=rl;var l=Ut;if(rl=a,(Ut=u)&&!l)for(K=i;K!==null;)a=K,u=a.child,a.tag===22&&a.memoizedState!==null?Rv(i):u!==null?(u.return=a,K=u):Rv(i);for(;o!==null;)K=o,V2(o),o=o.sibling;K=i,rl=s,Ut=l}Tv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):Tv(t)}}function Tv(t){for(;K!==null;){var e=K;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||Gc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ut)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Dr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&cv(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}cv(e,a,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ps(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ut||e.flags&512&&Ld(e)}catch(d){Xe(e,e.return,d)}}if(e===t){K=null;break}if(r=e.sibling,r!==null){r.return=e.return,K=r;break}K=e.return}}function Sv(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var r=e.sibling;if(r!==null){r.return=e.return,K=r;break}K=e.return}}function Rv(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Gc(4,e)}catch(u){Xe(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){Xe(e,i,u)}}var o=e.return;try{Ld(e)}catch(u){Xe(e,o,u)}break;case 5:var a=e.return;try{Ld(e)}catch(u){Xe(e,a,u)}}}catch(u){Xe(e,e.return,u)}if(e===t){K=null;break}var s=e.sibling;if(s!==null){s.return=e.return,K=s;break}K=e.return}}var kC=Math.ceil,oc=On.ReactCurrentDispatcher,l1=On.ReactCurrentOwner,Cr=On.ReactCurrentBatchConfig,pe=0,_t=null,et=null,St=0,dr=0,Oo=xi(0),lt=0,Us=null,Yi=0,$c=0,c1=0,ms=null,rr=null,f1=0,Jo=1/0,fn=null,ac=!1,Vd=null,ii=null,nl=!1,Yn=null,sc=0,ys=0,Ud=null,Il=-1,Cl=0;function Zt(){return pe&6?Ze():Il!==-1?Il:Il=Ze()}function oi(t){return t.mode&1?pe&2&&St!==0?St&-St:mC.transition!==null?(Cl===0&&(Cl=A_()),Cl):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:N_(t.type)),t):1}function Vr(t,e,r,n){if(50<ys)throw ys=0,Ud=null,Error(H(185));tu(t,r,n),(!(pe&2)||t!==_t)&&(t===_t&&(!(pe&2)&&($c|=r),lt===4&&Wn(t,St)),ur(t,n),r===1&&pe===0&&!(e.mode&1)&&(Jo=Ze()+500,zc&&Ei()))}function ur(t,e){var r=t.callbackNode;mI(t,e);var n=Wl(t,t===_t?St:0);if(n===0)r!==null&&Fg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Fg(r),e===1)t.tag===0?vC(Pv.bind(null,t)):q_(Pv.bind(null,t)),hC(function(){!(pe&6)&&Ei()}),r=null;else{switch(I_(n)){case 1:r=F0;break;case 4:r=x_;break;case 16:r=Hl;break;case 536870912:r=E_;break;default:r=Hl}r=X2(r,U2.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function U2(t,e){if(Il=-1,Cl=0,pe&6)throw Error(H(327));var r=t.callbackNode;if(zo()&&t.callbackNode!==r)return null;var n=Wl(t,t===_t?St:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=uc(t,n);else{e=n;var i=pe;pe|=2;var o=z2();(_t!==t||St!==e)&&(fn=null,Jo=Ze()+500,Hi(t,e));do try{FC();break}catch(s){j2(t,s)}while(1);Y0(),oc.current=o,pe=i,et!==null?e=0:(_t=null,St=0,e=lt)}if(e!==0){if(e===2&&(i=dd(t),i!==0&&(n=i,e=jd(t,i))),e===1)throw r=Us,Hi(t,0),Wn(t,n),ur(t,Ze()),r;if(e===6)Wn(t,n);else{if(i=t.current.alternate,!(n&30)&&!MC(i)&&(e=uc(t,n),e===2&&(o=dd(t),o!==0&&(n=o,e=jd(t,o))),e===1))throw r=Us,Hi(t,0),Wn(t,n),ur(t,Ze()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(H(345));case 2:Mi(t,rr,fn);break;case 3:if(Wn(t,n),(n&130023424)===n&&(e=f1+500-Ze(),10<e)){if(Wl(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xd(Mi.bind(null,t,rr,fn),e);break}Mi(t,rr,fn);break;case 4:if(Wn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Br(n);o=1<<a,a=e[a],a>i&&(i=a),n&=~o}if(n=i,n=Ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kC(n/1960))-n,10<n){t.timeoutHandle=xd(Mi.bind(null,t,rr,fn),n);break}Mi(t,rr,fn);break;case 5:Mi(t,rr,fn);break;default:throw Error(H(329))}}}return ur(t,Ze()),t.callbackNode===r?U2.bind(null,t):null}function jd(t,e){var r=ms;return t.current.memoizedState.isDehydrated&&(Hi(t,e).flags|=256),t=uc(t,e),t!==2&&(e=rr,rr=r,e!==null&&zd(e)),t}function zd(t){rr===null?rr=t:rr.push.apply(rr,t)}function MC(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Ur(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~c1,e&=~$c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Br(e),n=1<<r;t[r]=-1,e&=~n}}function Pv(t){if(pe&6)throw Error(H(327));zo();var e=Wl(t,0);if(!(e&1))return ur(t,Ze()),null;var r=uc(t,e);if(t.tag!==0&&r===2){var n=dd(t);n!==0&&(e=n,r=jd(t,n))}if(r===1)throw r=Us,Hi(t,0),Wn(t,e),ur(t,Ze()),r;if(r===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mi(t,rr,fn),ur(t,Ze()),null}function h1(t,e){var r=pe;pe|=1;try{return t(e)}finally{pe=r,pe===0&&(Jo=Ze()+500,zc&&Ei())}}function Qi(t){Yn!==null&&Yn.tag===0&&!(pe&6)&&zo();var e=pe;pe|=1;var r=Cr.transition,n=Ae;try{if(Cr.transition=null,Ae=1,t)return t()}finally{Ae=n,Cr.transition=r,pe=e,!(pe&6)&&Ei()}}function d1(){dr=Oo.current,Fe(Oo)}function Hi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,fC(r)),et!==null)for(r=et.return;r!==null;){var n=r;switch(X0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ql();break;case 3:Qo(),Fe(ar),Fe(Ht),r1();break;case 5:t1(n);break;case 4:Qo();break;case 13:Fe(ze);break;case 19:Fe(ze);break;case 10:Q0(n.type._context);break;case 22:case 23:d1()}r=r.return}if(_t=t,et=t=ai(t.current,null),St=dr=e,lt=0,Us=null,c1=$c=Yi=0,rr=ms=null,Vi!==null){for(e=0;e<Vi.length;e++)if(r=Vi[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}Vi=null}return t}function j2(t,e){do{var r=et;try{if(Y0(),xl.current=ic,nc){for(var n=He.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}nc=!1}if(qi=0,vt=ot=He=null,gs=!1,Fs=0,l1.current=null,r===null||r.return===null){lt=1,Us=e,et=null;break}e:{var o=t,a=r.return,s=r,u=e;if(e=St,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=vv(a);if(p!==null){p.flags&=-257,mv(p,a,s,o,e),p.mode&1&&gv(o,l,e),e=p,u=l;var m=e.updateQueue;if(m===null){var w=new Set;w.add(u),e.updateQueue=w}else m.add(u);break e}else{if(!(e&1)){gv(o,l,e),p1();break e}u=Error(H(426))}}else if(Be&&s.mode&1){var x=vv(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),mv(x,a,s,o,e),K0(Zo(u,s));break e}}o=u=Zo(u,s),lt!==4&&(lt=2),ms===null?ms=[o]:ms.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=I2(o,u,e);lv(o,v);break e;case 1:s=u;var y=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ii===null||!ii.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=C2(o,s,e);lv(o,I);break e}}o=o.return}while(o!==null)}W2(r)}catch(b){e=b,et===r&&r!==null&&(et=r=r.return);continue}break}while(1)}function z2(){var t=oc.current;return oc.current=ic,t===null?ic:t}function p1(){(lt===0||lt===3||lt===2)&&(lt=4),_t===null||!(Yi&268435455)&&!($c&268435455)||Wn(_t,St)}function uc(t,e){var r=pe;pe|=2;var n=z2();(_t!==t||St!==e)&&(fn=null,Hi(t,e));do try{LC();break}catch(i){j2(t,i)}while(1);if(Y0(),pe=r,oc.current=n,et!==null)throw Error(H(261));return _t=null,St=0,lt}function LC(){for(;et!==null;)H2(et)}function FC(){for(;et!==null&&!uI();)H2(et)}function H2(t){var e=$2(t.alternate,t,dr);t.memoizedProps=t.pendingProps,e===null?W2(t):et=e,l1.current=null}function W2(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=NC(r,e),r!==null){r.flags&=32767,et=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,et=null;return}}else if(r=PC(r,e,dr),r!==null){et=r;return}if(e=e.sibling,e!==null){et=e;return}et=e=t}while(e!==null);lt===0&&(lt=5)}function Mi(t,e,r){var n=Ae,i=Cr.transition;try{Cr.transition=null,Ae=1,BC(t,e,r,n)}finally{Cr.transition=i,Ae=n}return null}function BC(t,e,r,n){do zo();while(Yn!==null);if(pe&6)throw Error(H(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(yI(t,o),t===_t&&(et=_t=null,St=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||nl||(nl=!0,X2(Hl,function(){return zo(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Cr.transition,Cr.transition=null;var a=Ae;Ae=1;var s=pe;pe|=4,l1.current=null,bC(t,r),B2(r,t),iC(_d),Gl=!!yd,_d=yd=null,t.current=r,DC(r),lI(),pe=s,Ae=a,Cr.transition=o}else t.current=r;if(nl&&(nl=!1,Yn=t,sc=i),o=t.pendingLanes,o===0&&(ii=null),hI(r.stateNode),ur(t,Ze()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(ac)throw ac=!1,t=Vd,Vd=null,t;return sc&1&&t.tag!==0&&zo(),o=t.pendingLanes,o&1?t===Ud?ys++:(ys=0,Ud=t):ys=0,Ei(),null}function zo(){if(Yn!==null){var t=I_(sc),e=Cr.transition,r=Ae;try{if(Cr.transition=null,Ae=16>t?16:t,Yn===null)var n=!1;else{if(t=Yn,Yn=null,sc=0,pe&6)throw Error(H(331));var i=pe;for(pe|=4,K=t.current;K!==null;){var o=K,a=o.child;if(K.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(K=l;K!==null;){var c=K;switch(c.tag){case 0:case 11:case 15:vs(8,c,o)}var h=c.child;if(h!==null)h.return=c,K=h;else for(;K!==null;){c=K;var d=c.sibling,p=c.return;if(M2(c),c===l){K=null;break}if(d!==null){d.return=p,K=d;break}K=p}}}var m=o.alternate;if(m!==null){var w=m.child;if(w!==null){m.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}K=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,K=a;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:vs(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,K=v;break e}K=o.return}}var y=t.current;for(K=y;K!==null;){a=K;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,K=E;else e:for(a=y;K!==null;){if(s=K,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Gc(9,s)}}catch(b){Xe(s,s.return,b)}if(s===a){K=null;break e}var I=s.sibling;if(I!==null){I.return=s.return,K=I;break e}K=s.return}}if(pe=i,Ei(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(Fc,t)}catch{}n=!0}return n}finally{Ae=r,Cr.transition=e}}return!1}function Nv(t,e,r){e=Zo(r,e),e=I2(t,e,1),t=ni(t,e,1),e=Zt(),t!==null&&(tu(t,1,e),ur(t,e))}function Xe(t,e,r){if(t.tag===3)Nv(t,t,r);else for(;e!==null;){if(e.tag===3){Nv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ii===null||!ii.has(n))){t=Zo(r,t),t=C2(e,t,1),e=ni(e,t,1),t=Zt(),e!==null&&(tu(e,1,t),ur(e,t));break}}e=e.return}}function VC(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&r,_t===t&&(St&r)===r&&(lt===4||lt===3&&(St&130023424)===St&&500>Ze()-f1?Hi(t,0):c1|=r),ur(t,e)}function G2(t,e){e===0&&(t.mode&1?(e=Xu,Xu<<=1,!(Xu&130023424)&&(Xu=4194304)):e=1);var r=Zt();t=An(t,e),t!==null&&(tu(t,e,r),ur(t,r))}function UC(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),G2(t,r)}function jC(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(e),G2(t,r)}var $2;$2=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ar.current)or=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return or=!1,RC(t,e,r);or=!!(t.flags&131072)}else or=!1,Be&&e.flags&1048576&&Y_(e,Zl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Al(t,e),t=e.pendingProps;var i=Ko(e,Ht.current);jo(e,r),i=i1(null,e,n,t,i,r);var o=o1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sr(n)?(o=!0,Yl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,J0(e),i.updater=Wc,e.stateNode=i,i._reactInternals=e,Rd(e,n,t,r),e=Od(null,e,n,!0,o,r)):(e.tag=0,Be&&o&&$0(e),Qt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Al(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=HC(n),t=Dr(n,t),i){case 0:e=Nd(null,e,n,t,r);break e;case 1:e=wv(null,e,n,t,r);break e;case 11:e=yv(null,e,n,t,r);break e;case 14:e=_v(null,e,n,Dr(n.type,t),r);break e}throw Error(H(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dr(n,i),Nd(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dr(n,i),wv(t,e,n,i,r);case 3:e:{if(P2(e),t===null)throw Error(H(387));n=e.pendingProps,o=e.memoizedState,i=o.element,r2(t,e),tc(e,n,null,r);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Zo(Error(H(423)),e),e=xv(t,e,n,r,i);break e}else if(n!==i){i=Zo(Error(H(424)),e),e=xv(t,e,n,r,i);break e}else for(pr=ri(e.stateNode.containerInfo.firstChild),vr=e,Be=!0,Mr=null,r=e2(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qo(),n===i){e=In(t,e,r);break e}Qt(t,e,n,r)}e=e.child}return e;case 5:return n2(e),t===null&&Cd(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,wd(n,i)?a=null:o!==null&&wd(n,o)&&(e.flags|=32),R2(t,e),Qt(t,e,a,r),e.child;case 6:return t===null&&Cd(e),null;case 13:return N2(t,e,r);case 4:return e1(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Yo(e,null,n,r):Qt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dr(n,i),yv(t,e,n,i,r);case 7:return Qt(t,e,e.pendingProps,r),e.child;case 8:return Qt(t,e,e.pendingProps.children,r),e.child;case 12:return Qt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Re(Jl,n._currentValue),n._currentValue=a,o!==null)if(Ur(o.value,a)){if(o.children===i.children&&!ar.current){e=In(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=_n(-1,r&-r),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Td(o.return,r,e),s.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(H(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),Td(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Qt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,jo(e,r),i=Rr(i),n=n(i),e.flags|=1,Qt(t,e,n,r),e.child;case 14:return n=e.type,i=Dr(n,e.pendingProps),i=Dr(n.type,i),_v(t,e,n,i,r);case 15:return T2(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dr(n,i),Al(t,e),e.tag=1,sr(n)?(t=!0,Yl(e)):t=!1,jo(e,r),A2(e,n,i),Rd(e,n,i,r),Od(null,e,n,!0,t,r);case 19:return O2(t,e,r);case 22:return S2(t,e,r)}throw Error(H(156,e.tag))};function X2(t,e){return w_(t,e)}function zC(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(t,e,r,n){return new zC(t,e,r,n)}function g1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HC(t){if(typeof t=="function")return g1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===k0)return 11;if(t===M0)return 14}return 2}function ai(t,e){var r=t.alternate;return r===null?(r=Ar(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Tl(t,e,r,n,i,o){var a=2;if(n=t,typeof t=="function")g1(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xo:return Wi(r.children,i,o,e);case D0:a=8,i|=8;break;case Zh:return t=Ar(12,r,e,i|2),t.elementType=Zh,t.lanes=o,t;case Jh:return t=Ar(13,r,e,i),t.elementType=Jh,t.lanes=o,t;case ed:return t=Ar(19,r,e,i),t.elementType=ed,t.lanes=o,t;case n_:return Xc(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case t_:a=10;break e;case r_:a=9;break e;case k0:a=11;break e;case M0:a=14;break e;case Un:a=16,n=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Ar(a,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Wi(t,e,r,n){return t=Ar(7,t,n,e),t.lanes=r,t}function Xc(t,e,r,n){return t=Ar(22,t,n,e),t.elementType=n_,t.lanes=r,t.stateNode={isHidden:!1},t}function Ch(t,e,r){return t=Ar(6,t,null,e),t.lanes=r,t}function Th(t,e,r){return e=Ar(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WC(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ah(0),this.expirationTimes=ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ah(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function v1(t,e,r,n,i,o,a,s,u){return t=new WC(t,e,r,s,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ar(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},J0(o),t}function GC(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function K2(t){if(!t)return vi;t=t._reactInternals;e:{if(io(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var r=t.type;if(sr(r))return K_(t,r,e)}return e}function q2(t,e,r,n,i,o,a,s,u){return t=v1(r,n,!0,t,i,o,a,s,u),t.context=K2(null),r=t.current,n=Zt(),i=oi(r),o=_n(n,i),o.callback=e??null,ni(r,o,i),t.current.lanes=i,tu(t,i,n),ur(t,n),t}function Kc(t,e,r,n){var i=e.current,o=Zt(),a=oi(i);return r=K2(r),e.context===null?e.context=r:e.pendingContext=r,e=_n(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ni(i,e,a),t!==null&&(Vr(t,i,a,o),wl(t,i,a)),a}function lc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ov(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function m1(t,e){Ov(t,e),(t=t.alternate)&&Ov(t,e)}function $C(){return null}var Y2=typeof reportError=="function"?reportError:function(t){console.error(t)};function y1(t){this._internalRoot=t}qc.prototype.render=y1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Kc(t,e,null,null)};qc.prototype.unmount=y1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){Kc(null,t,null,null)}),e[En]=null}};function qc(t){this._internalRoot=t}qc.prototype.unstable_scheduleHydration=function(t){if(t){var e=S_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Hn.length&&e!==0&&e<Hn[r].priority;r++);Hn.splice(r,0,t),r===0&&P_(t)}};function _1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bv(){}function XC(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var l=lc(a);o.call(l)}}var a=q2(e,n,t,0,null,!1,!1,"",bv);return t._reactRootContainer=a,t[En]=a.current,bs(t.nodeType===8?t.parentNode:t),Qi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var l=lc(u);s.call(l)}}var u=v1(t,0,!1,null,null,!1,!1,"",bv);return t._reactRootContainer=u,t[En]=u.current,bs(t.nodeType===8?t.parentNode:t),Qi(function(){Kc(e,u,r,n)}),u}function Qc(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=lc(a);s.call(u)}}Kc(e,a,t,i)}else a=XC(r,e,t,i,n);return lc(a)}C_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ja(e.pendingLanes);r!==0&&(B0(e,r|1),ur(e,Ze()),!(pe&6)&&(Jo=Ze()+500,Ei()))}break;case 13:Qi(function(){var n=An(t,1);if(n!==null){var i=Zt();Vr(n,t,1,i)}}),m1(t,1)}};V0=function(t){if(t.tag===13){var e=An(t,134217728);if(e!==null){var r=Zt();Vr(e,t,134217728,r)}m1(t,134217728)}};T_=function(t){if(t.tag===13){var e=oi(t),r=An(t,e);if(r!==null){var n=Zt();Vr(r,t,e,n)}m1(t,e)}};S_=function(){return Ae};R_=function(t,e){var r=Ae;try{return Ae=t,e()}finally{Ae=r}};cd=function(t,e,r){switch(e){case"input":if(nd(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=jc(n);if(!i)throw Error(H(90));o_(n),nd(n,i)}}}break;case"textarea":s_(t,r);break;case"select":e=r.value,e!=null&&Fo(t,!!r.multiple,e,!1)}};p_=h1;g_=Qi;var KC={usingClientEntryPoint:!1,Events:[nu,Co,jc,h_,d_,h1]},Ga={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qC={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=y_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||$C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{Fc=il.inject(qC),Kr=il}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KC;yr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_1(e))throw Error(H(200));return GC(t,e,null,r)};yr.createRoot=function(t,e){if(!_1(t))throw Error(H(299));var r=!1,n="",i=Y2;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=v1(t,1,!1,null,null,r,!1,n,i),t[En]=e.current,bs(t.nodeType===8?t.parentNode:t),new y1(e)};yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=y_(e),t=t===null?null:t.stateNode,t};yr.flushSync=function(t){return Qi(t)};yr.hydrate=function(t,e,r){if(!Yc(e))throw Error(H(200));return Qc(null,t,e,!0,r)};yr.hydrateRoot=function(t,e,r){if(!_1(t))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=Y2;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=q2(e,null,t,1,r??null,i,!1,o,a),t[En]=e.current,bs(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new qc(e)};yr.render=function(t,e,r){if(!Yc(e))throw Error(H(200));return Qc(null,t,e,!1,r)};yr.unmountComponentAtNode=function(t){if(!Yc(t))throw Error(H(40));return t._reactRootContainer?(Qi(function(){Qc(null,null,t,!1,function(){t._reactRootContainer=null,t[En]=null})}),!0):!1};yr.unstable_batchedUpdates=h1;yr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Yc(r))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Qc(t,e,r,!1,n)};yr.version="18.3.1-next-f1338f8080-20240426";function Q2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q2)}catch(t){console.error(t)}}Q2(),Qy.exports=yr;var YC=Qy.exports,Dv=YC;Yh.createRoot=Dv.createRoot,Yh.hydrateRoot=Dv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function js(){return js=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},js.apply(this,arguments)}var Qn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qn||(Qn={}));const kv="popstate";function QC(t){t===void 0&&(t={});function e(n,i){let{pathname:o,search:a,hash:s}=n.location;return Hd("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:cc(i)}return JC(e,r,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Z2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZC(){return Math.random().toString(36).substr(2,8)}function Mv(t,e){return{usr:t.state,key:t.key,idx:e}}function Hd(t,e,r,n){return r===void 0&&(r=null),js({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pa(e):e,{state:r,key:e&&e.key||n||ZC()})}function cc(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function pa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function JC(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=Qn.Pop,u=null,l=c();l==null&&(l=0,a.replaceState(js({},a.state,{idx:l}),""));function c(){return(a.state||{idx:null}).idx}function h(){s=Qn.Pop;let x=c(),v=x==null?null:x-l;l=x,u&&u({action:s,location:w.location,delta:v})}function d(x,v){s=Qn.Push;let y=Hd(w.location,x,v);r&&r(y,x),l=c()+1;let E=Mv(y,l),I=w.createHref(y);try{a.pushState(E,"",I)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(I)}o&&u&&u({action:s,location:w.location,delta:1})}function p(x,v){s=Qn.Replace;let y=Hd(w.location,x,v);r&&r(y,x),l=c();let E=Mv(y,l),I=w.createHref(y);a.replaceState(E,"",I),o&&u&&u({action:s,location:w.location,delta:0})}function m(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof x=="string"?x:cc(x);return y=y.replace(/ $/,"%20"),Ke(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let w={get action(){return s},get location(){return t(i,a)},listen(x){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(kv,h),u=x,()=>{i.removeEventListener(kv,h),u=null}},createHref(x){return e(i,x)},createURL:m,encodeLocation(x){let v=m(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:p,go(x){return a.go(x)}};return w}var Lv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lv||(Lv={}));function eT(t,e,r){return r===void 0&&(r="/"),tT(t,e,r,!1)}function tT(t,e,r,n){let i=typeof e=="string"?pa(e):e,o=ea(i.pathname||"/",r);if(o==null)return null;let a=J2(t);rT(a);let s=null;for(let u=0;s==null&&u<a.length;++u){let l=dT(o);s=fT(a[u],l,n)}return s}function J2(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let u={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Ke(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let l=si([n,u.relativePath]),c=r.concat(u);o.children&&o.children.length>0&&(Ke(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),J2(o.children,e,c,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:lT(l,o.index),routesMeta:c})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let u of ew(o.path))i(o,a,u)}),e}function ew(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=ew(n.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&s.push(...a),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function rT(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:cT(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const nT=/^:[\w-]+$/,iT=3,oT=2,aT=1,sT=10,uT=-2,Fv=t=>t==="*";function lT(t,e){let r=t.split("/"),n=r.length;return r.some(Fv)&&(n+=uT),e&&(n+=oT),r.filter(i=>!Fv(i)).reduce((i,o)=>i+(nT.test(o)?iT:o===""?aT:sT),n)}function cT(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function fT(t,e,r){r===void 0&&(r=!1);let{routesMeta:n}=t,i={},o="/",a=[];for(let s=0;s<n.length;++s){let u=n[s],l=s===n.length-1,c=o==="/"?e:e.slice(o.length)||"/",h=fc({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!h&&l&&r&&!n[n.length-1].route.index&&(h=fc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:si([o,h.pathname]),pathnameBase:mT(si([o,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(o=si([o,h.pathnameBase]))}return a}function fc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=hT(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((l,c,h)=>{let{paramName:d,isOptional:p}=c;if(d==="*"){let w=s[h]||"";a=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const m=s[h];return p&&!m?l[d]=void 0:l[d]=(m||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:t}}function hT(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Z2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(n.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function dT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Z2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ea(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function pT(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?pa(t):t;return{pathname:r?r.startsWith("/")?r:gT(r,e):e,search:yT(n),hash:_T(i)}}function gT(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Sh(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vT(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function tw(t,e){let r=vT(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rw(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=pa(t):(i=js({},t),Ke(!i.pathname||!i.pathname.includes("?"),Sh("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),Sh("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),Sh("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=r;else{let h=e.length-1;if(!n&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}s=h>=0?e[h]:"/"}let u=pT(i,s),l=a&&a!=="/"&&a.endsWith("/"),c=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const si=t=>t.join("/").replace(/\/\/+/g,"/"),mT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_T=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nw=["post","put","patch","delete"];new Set(nw);const xT=["get",...nw];new Set(xT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zs(){return zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zs.apply(this,arguments)}const Zc=U.createContext(null),iw=U.createContext(null),Ai=U.createContext(null),Jc=U.createContext(null),oo=U.createContext({outlet:null,matches:[],isDataRoute:!1}),ow=U.createContext(null);function ET(t,e){let{relative:r}=e===void 0?{}:e;ou()||Ke(!1);let{basename:n,navigator:i}=U.useContext(Ai),{hash:o,pathname:a,search:s}=ef(t,{relative:r}),u=a;return n!=="/"&&(u=a==="/"?n:si([n,a])),i.createHref({pathname:u,search:s,hash:o})}function ou(){return U.useContext(Jc)!=null}function ga(){return ou()||Ke(!1),U.useContext(Jc).location}function aw(t){U.useContext(Ai).static||U.useLayoutEffect(t)}function au(){let{isDataRoute:t}=U.useContext(oo);return t?MT():AT()}function AT(){ou()||Ke(!1);let t=U.useContext(Zc),{basename:e,future:r,navigator:n}=U.useContext(Ai),{matches:i}=U.useContext(oo),{pathname:o}=ga(),a=JSON.stringify(tw(i,r.v7_relativeSplatPath)),s=U.useRef(!1);return aw(()=>{s.current=!0}),U.useCallback(function(l,c){if(c===void 0&&(c={}),!s.current)return;if(typeof l=="number"){n.go(l);return}let h=rw(l,JSON.parse(a),o,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:si([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,a,o,t])}function ef(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=U.useContext(Ai),{matches:i}=U.useContext(oo),{pathname:o}=ga(),a=JSON.stringify(tw(i,n.v7_relativeSplatPath));return U.useMemo(()=>rw(t,JSON.parse(a),o,r==="path"),[t,a,o,r])}function IT(t,e){return CT(t,e)}function CT(t,e,r,n){ou()||Ke(!1);let{navigator:i}=U.useContext(Ai),{matches:o}=U.useContext(oo),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let l=ga(),c;if(e){var h;let x=typeof e=="string"?pa(e):e;u==="/"||(h=x.pathname)!=null&&h.startsWith(u)||Ke(!1),c=x}else c=l;let d=c.pathname||"/",p=d;if(u!=="/"){let x=u.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(x.length).join("/")}let m=eT(t,{pathname:p}),w=NT(m&&m.map(x=>Object.assign({},x,{params:Object.assign({},s,x.params),pathname:si([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:si([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,r,n);return e&&w?U.createElement(Jc.Provider,{value:{location:zs({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Qn.Pop}},w):w}function TT(){let t=kT(),e=wT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),r?U.createElement("pre",{style:i},r):null,o)}const ST=U.createElement(TT,null);class RT extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?U.createElement(oo.Provider,{value:this.props.routeContext},U.createElement(ow.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PT(t){let{routeContext:e,match:r,children:n}=t,i=U.useContext(Zc);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),U.createElement(oo.Provider,{value:e},n)}function NT(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=(i=r)==null?void 0:i.errors;if(s!=null){let c=a.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);c>=0||Ke(!1),a=a.slice(0,Math.min(a.length,c+1))}let u=!1,l=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=c),h.route.id){let{loaderData:d,errors:p}=r,m=h.route.loader&&d[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){u=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,h,d)=>{let p,m=!1,w=null,x=null;r&&(p=s&&h.route.id?s[h.route.id]:void 0,w=h.route.errorElement||ST,u&&(l<0&&d===0?(LT("route-fallback",!1),m=!0,x=null):l===d&&(m=!0,x=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,d+1)),y=()=>{let E;return p?E=w:m?E=x:h.route.Component?E=U.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=c,U.createElement(PT,{match:h,routeContext:{outlet:c,matches:v,isDataRoute:r!=null},children:E})};return r&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?U.createElement(RT,{location:r.location,revalidation:r.revalidation,component:w,error:p,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var sw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sw||{}),hc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hc||{});function OT(t){let e=U.useContext(Zc);return e||Ke(!1),e}function bT(t){let e=U.useContext(iw);return e||Ke(!1),e}function DT(t){let e=U.useContext(oo);return e||Ke(!1),e}function uw(t){let e=DT(),r=e.matches[e.matches.length-1];return r.route.id||Ke(!1),r.route.id}function kT(){var t;let e=U.useContext(ow),r=bT(hc.UseRouteError),n=uw(hc.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function MT(){let{router:t}=OT(sw.UseNavigateStable),e=uw(hc.UseNavigateStable),r=U.useRef(!1);return aw(()=>{r.current=!0}),U.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,zs({fromRouteId:e},o)))},[t,e])}const Bv={};function LT(t,e,r){!e&&!Bv[t]&&(Bv[t]=!0)}function FT(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function cn(t){Ke(!1)}function BT(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Qn.Pop,navigator:o,static:a=!1,future:s}=t;ou()&&Ke(!1);let u=e.replace(/^\/*/,"/"),l=U.useMemo(()=>({basename:u,navigator:o,static:a,future:zs({v7_relativeSplatPath:!1},s)}),[u,s,o,a]);typeof n=="string"&&(n=pa(n));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:m="default"}=n,w=U.useMemo(()=>{let x=ea(c,u);return x==null?null:{location:{pathname:x,search:h,hash:d,state:p,key:m},navigationType:i}},[u,c,h,d,p,m,i]);return w==null?null:U.createElement(Ai.Provider,{value:l},U.createElement(Jc.Provider,{children:r,value:w}))}function VT(t){let{children:e,location:r}=t;return IT(Wd(e),r)}new Promise(()=>{});function Wd(t,e){e===void 0&&(e=[]);let r=[];return U.Children.forEach(t,(n,i)=>{if(!U.isValidElement(n))return;let o=[...e,i];if(n.type===U.Fragment){r.push.apply(r,Wd(n.props.children,o));return}n.type!==cn&&Ke(!1),!n.props.index||!n.props.children||Ke(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Wd(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dc.apply(this,arguments)}function lw(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function UT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jT(t,e){return t.button===0&&(!e||e==="_self")&&!UT(t)}const zT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HT=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],WT="6";try{window.__reactRouterVersion=WT}catch{}const GT=U.createContext({isTransitioning:!1}),$T="startTransition",Vv=VA[$T];function XT(t){let{basename:e,children:r,future:n,window:i}=t,o=U.useRef();o.current==null&&(o.current=QC({window:i,v5Compat:!0}));let a=o.current,[s,u]=U.useState({action:a.action,location:a.location}),{v7_startTransition:l}=n||{},c=U.useCallback(h=>{l&&Vv?Vv(()=>u(h)):u(h)},[u,l]);return U.useLayoutEffect(()=>a.listen(c),[a,c]),U.useEffect(()=>FT(n),[n]),U.createElement(BT,{basename:e,children:r,location:s.location,navigationType:s.action,navigator:a,future:n})}const KT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sl=U.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:s,target:u,to:l,preventScrollReset:c,viewTransition:h}=e,d=lw(e,zT),{basename:p}=U.useContext(Ai),m,w=!1;if(typeof l=="string"&&qT.test(l)&&(m=l,KT))try{let E=new URL(window.location.href),I=l.startsWith("//")?new URL(E.protocol+l):new URL(l),b=ea(I.pathname,p);I.origin===E.origin&&b!=null?l=b+I.search+I.hash:w=!0}catch{}let x=ET(l,{relative:i}),v=QT(l,{replace:a,state:s,target:u,preventScrollReset:c,relative:i,viewTransition:h});function y(E){n&&n(E),E.defaultPrevented||v(E)}return U.createElement("a",dc({},d,{href:m||x,onClick:w||o?n:y,ref:r,target:u}))}),$a=U.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:o="",end:a=!1,style:s,to:u,viewTransition:l,children:c}=e,h=lw(e,HT),d=ef(u,{relative:h.relative}),p=ga(),m=U.useContext(iw),{navigator:w,basename:x}=U.useContext(Ai),v=m!=null&&ZT(d)&&l===!0,y=w.encodeLocation?w.encodeLocation(d).pathname:d.pathname,E=p.pathname,I=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(E=E.toLowerCase(),I=I?I.toLowerCase():null,y=y.toLowerCase()),I&&x&&(I=ea(I,x)||I);const b=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let D=E===y||!a&&E.startsWith(y)&&E.charAt(b)==="/",C=I!=null&&(I===y||!a&&I.startsWith(y)&&I.charAt(y.length)==="/"),A={isActive:D,isPending:C,isTransitioning:v},R=D?n:void 0,N;typeof o=="function"?N=o(A):N=[o,D?"active":null,C?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(A):s;return U.createElement(Sl,dc({},h,{"aria-current":R,className:N,ref:r,style:k,to:u,viewTransition:l}),typeof c=="function"?c(A):c)});var Gd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gd||(Gd={}));var Uv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Uv||(Uv={}));function YT(t){let e=U.useContext(Zc);return e||Ke(!1),e}function QT(t,e){let{target:r,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:s}=e===void 0?{}:e,u=au(),l=ga(),c=ef(t,{relative:a});return U.useCallback(h=>{if(jT(h,r)){h.preventDefault();let d=n!==void 0?n:cc(l)===cc(c);u(t,{replace:d,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[l,u,c,n,i,r,t,o,a,s])}function ZT(t,e){e===void 0&&(e={});let r=U.useContext(GT);r==null&&Ke(!1);let{basename:n}=YT(Gd.useViewTransitionState),i=ef(t,{relative:e.relative});if(!r.isTransitioning)return!1;let o=ea(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=ea(r.nextLocation.pathname,n)||r.nextLocation.pathname;return fc(i.pathname,a)!=null||fc(i.pathname,o)!=null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},JT=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],a=t[r++],s=t[r++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const o=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},fw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,h=(o&3)<<4|s>>4;let d=(s&15)<<2|l>>6,p=l&63;u||(p=64,a||(d=64)),n.push(r[c],r[h],r[d],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],s=i<t.length?r[t.charAt(i)]:0;++i;const l=i<t.length?r[t.charAt(i)]:64;++i;const h=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||s==null||l==null||h==null)throw new eS;const d=o<<2|s>>4;if(n.push(d),l!==64){const p=s<<4&240|l>>2;if(n.push(p),h!==64){const m=l<<6&192|h;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tS=function(t){const e=cw(t);return fw.encodeByteArray(e,!0)},pc=function(t){return tS(t).replace(/\./g,"")},hw=function(t){try{return fw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=()=>rS().__FIREBASE_DEFAULTS__,iS=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hw(t[1]);return e&&JSON.parse(e)},tf=()=>{try{return nS()||iS()||oS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dw=t=>{var e,r;return(r=(e=tf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},aS=t=>{const e=dw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},pw=()=>{var t;return(t=tf())===null||t===void 0?void 0:t.config},gw=t=>{var e;return(e=tf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),s="";return[pc(JSON.stringify(r)),pc(JSON.stringify(a)),s].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function cS(){var t;const e=(t=tf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pS(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gS(){return!cS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vS(){try{return typeof indexedDB=="object"}catch{return!1}}function mS(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="FirebaseError";class bn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=yS,Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?_S(o,n):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new bn(i,s,n)}}function _S(t,e){return t.replace(wS,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const wS=/\{\$([^}]+)}/g;function xS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gc(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],a=e[i];if(jv(o)&&jv(a)){if(!gc(o,a))return!1}else if(o!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function jv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ts(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,o]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function rs(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function ES(t,e){const r=new AS(t,e);return r.subscribe.bind(r)}class AS{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");IS(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Rh),i.error===void 0&&(i.error=Rh),i.complete===void 0&&(i.complete=Rh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IS(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Rh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class Zi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new sS;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SS(e))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=Li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Li){return this.instances.has(e)}getOptions(e=Li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);n===s&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:TS(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Li){return this.component?this.component.multipleInstances?e:Li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TS(t){return t===Li?void 0:t}function SS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new CS(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const PS={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},NS=ce.INFO,OS={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},bS=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=OS[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class w1{constructor(e){this.name=e,this._logLevel=NS,this._logHandler=bS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const DS=(t,e)=>e.some(r=>t instanceof r);let zv,Hv;function kS(){return zv||(zv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MS(){return Hv||(Hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vw=new WeakMap,$d=new WeakMap,mw=new WeakMap,Ph=new WeakMap,x1=new WeakMap;function LS(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{r(ui(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&vw.set(r,t)}).catch(()=>{}),x1.set(e,t),e}function FS(t){if($d.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});$d.set(t,e)}let Xd={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return $d.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mw.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ui(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BS(t){Xd=t(Xd)}function VS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Nh(this),e,...r);return mw.set(n,e.sort?e.sort():[e]),ui(n)}:MS().includes(t)?function(...e){return t.apply(Nh(this),e),ui(vw.get(this))}:function(...e){return ui(t.apply(Nh(this),e))}}function US(t){return typeof t=="function"?VS(t):(t instanceof IDBTransaction&&FS(t),DS(t,kS())?new Proxy(t,Xd):t)}function ui(t){if(t instanceof IDBRequest)return LS(t);if(Ph.has(t))return Ph.get(t);const e=US(t);return e!==t&&(Ph.set(t,e),x1.set(e,t)),e}const Nh=t=>x1.get(t);function jS(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=ui(a);return n&&a.addEventListener("upgradeneeded",u=>{n(ui(a.result),u.oldVersion,u.newVersion,ui(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),s.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}const zS=["get","getKey","getAll","getAllKeys","count"],HS=["put","add","delete","clear"],Oh=new Map;function Wv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=HS.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||zS.includes(r)))return;const o=async function(a,...s){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(s.shift())),(await Promise.all([l[r](...s),i&&u.done]))[0]};return Oh.set(e,o),o}BS(t=>({...t,get:(e,r,n)=>Wv(e,r)||t.get(e,r,n),has:(e,r)=>!!Wv(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(GS(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function GS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kd="@firebase/app",Gv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new w1("@firebase/app"),$S="@firebase/app-compat",XS="@firebase/analytics-compat",KS="@firebase/analytics",qS="@firebase/app-check-compat",YS="@firebase/app-check",QS="@firebase/auth",ZS="@firebase/auth-compat",JS="@firebase/database",e3="@firebase/data-connect",t3="@firebase/database-compat",r3="@firebase/functions",n3="@firebase/functions-compat",i3="@firebase/installations",o3="@firebase/installations-compat",a3="@firebase/messaging",s3="@firebase/messaging-compat",u3="@firebase/performance",l3="@firebase/performance-compat",c3="@firebase/remote-config",f3="@firebase/remote-config-compat",h3="@firebase/storage",d3="@firebase/storage-compat",p3="@firebase/firestore",g3="@firebase/vertexai-preview",v3="@firebase/firestore-compat",m3="firebase",y3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="[DEFAULT]",_3={[Kd]:"fire-core",[$S]:"fire-core-compat",[KS]:"fire-analytics",[XS]:"fire-analytics-compat",[YS]:"fire-app-check",[qS]:"fire-app-check-compat",[QS]:"fire-auth",[ZS]:"fire-auth-compat",[JS]:"fire-rtdb",[e3]:"fire-data-connect",[t3]:"fire-rtdb-compat",[r3]:"fire-fn",[n3]:"fire-fn-compat",[i3]:"fire-iid",[o3]:"fire-iid-compat",[a3]:"fire-fcm",[s3]:"fire-fcm-compat",[u3]:"fire-perf",[l3]:"fire-perf-compat",[c3]:"fire-rc",[f3]:"fire-rc-compat",[h3]:"fire-gcs",[d3]:"fire-gcs-compat",[p3]:"fire-fst",[v3]:"fire-fst-compat",[g3]:"fire-vertex","fire-js":"fire-js",[m3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Map,w3=new Map,Yd=new Map;function $v(t,e){try{t.container.addComponent(e)}catch(r){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ta(t){const e=t.name;if(Yd.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,t);for(const r of vc.values())$v(r,t);for(const r of w3.values())$v(r,t);return!0}function E1(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function gn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new su("app","Firebase",x3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=y3;function yw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:qd,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(r||(r=pw()),!r)throw li.create("no-options");const o=vc.get(i);if(o){if(gc(r,o.options)&&gc(n,o.config))return o;throw li.create("duplicate-app",{appName:i})}const a=new RS(i);for(const u of Yd.values())a.addComponent(u);const s=new E3(r,n,a);return vc.set(i,s),s}function _w(t=qd){const e=vc.get(t);if(!e&&t===qd&&pw())return yw();if(!e)throw li.create("no-app",{appName:t});return e}function ci(t,e,r){var n;let i=(n=_3[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const s=[`Unable to register library "${i}" with version "${e}":`];o&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(s.join(" "));return}ta(new Zi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="firebase-heartbeat-database",I3=1,Hs="firebase-heartbeat-store";let bh=null;function ww(){return bh||(bh=jS(A3,I3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hs)}catch(r){console.warn(r)}}}}).catch(t=>{throw li.create("idb-open",{originalErrorMessage:t.message})})),bh}async function C3(t){try{const r=(await ww()).transaction(Hs),n=await r.objectStore(Hs).get(xw(t));return await r.done,n}catch(e){if(e instanceof bn)Cn.warn(e.message);else{const r=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cn.warn(r.message)}}}async function Xv(t,e){try{const n=(await ww()).transaction(Hs,"readwrite");await n.objectStore(Hs).put(e,xw(t)),await n.done}catch(r){if(r instanceof bn)Cn.warn(r.message);else{const n=li.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Cn.warn(n.message)}}}function xw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=1024,S3=30*24*60*60*1e3;class R3{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new N3(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Kv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const s=new Date(a.date).valueOf();return Date.now()-s<=S3}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Cn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Kv(),{heartbeatsToSend:n,unsentEntries:i}=P3(this._heartbeatsCache.heartbeats),o=pc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return Cn.warn(r),""}}}function Kv(){return new Date().toISOString().substring(0,10)}function P3(t,e=T3){const r=[];let n=t.slice();for(const i of t){const o=r.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),qv(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),qv(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class N3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vS()?mS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await C3(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qv(t){return pc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){ta(new Zi("platform-logger",e=>new WS(e),"PRIVATE")),ta(new Zi("heartbeat",e=>new R3(e),"PRIVATE")),ci(Kd,Gv,t),ci(Kd,Gv,"esm2017"),ci("fire-js","")}O3("");var b3="firebase",D3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(b3,D3,"app");var Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,Ew;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function R(){}R.prototype=A.prototype,C.D=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(N,k,M){for(var O=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)O[Oe-2]=arguments[Oe];return A.prototype[k].apply(N,O)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,A,R){R||(R=0);var N=Array(16);if(typeof A=="string")for(var k=0;16>k;++k)N[k]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(k=0;16>k;++k)N[k]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],k=C.g[2];var M=C.g[3],O=A+(M^R&(k^M))+N[0]+3614090360&4294967295;A=R+(O<<7&4294967295|O>>>25),O=M+(k^A&(R^k))+N[1]+3905402710&4294967295,M=A+(O<<12&4294967295|O>>>20),O=k+(R^M&(A^R))+N[2]+606105819&4294967295,k=M+(O<<17&4294967295|O>>>15),O=R+(A^k&(M^A))+N[3]+3250441966&4294967295,R=k+(O<<22&4294967295|O>>>10),O=A+(M^R&(k^M))+N[4]+4118548399&4294967295,A=R+(O<<7&4294967295|O>>>25),O=M+(k^A&(R^k))+N[5]+1200080426&4294967295,M=A+(O<<12&4294967295|O>>>20),O=k+(R^M&(A^R))+N[6]+2821735955&4294967295,k=M+(O<<17&4294967295|O>>>15),O=R+(A^k&(M^A))+N[7]+4249261313&4294967295,R=k+(O<<22&4294967295|O>>>10),O=A+(M^R&(k^M))+N[8]+1770035416&4294967295,A=R+(O<<7&4294967295|O>>>25),O=M+(k^A&(R^k))+N[9]+2336552879&4294967295,M=A+(O<<12&4294967295|O>>>20),O=k+(R^M&(A^R))+N[10]+4294925233&4294967295,k=M+(O<<17&4294967295|O>>>15),O=R+(A^k&(M^A))+N[11]+2304563134&4294967295,R=k+(O<<22&4294967295|O>>>10),O=A+(M^R&(k^M))+N[12]+1804603682&4294967295,A=R+(O<<7&4294967295|O>>>25),O=M+(k^A&(R^k))+N[13]+4254626195&4294967295,M=A+(O<<12&4294967295|O>>>20),O=k+(R^M&(A^R))+N[14]+2792965006&4294967295,k=M+(O<<17&4294967295|O>>>15),O=R+(A^k&(M^A))+N[15]+1236535329&4294967295,R=k+(O<<22&4294967295|O>>>10),O=A+(k^M&(R^k))+N[1]+4129170786&4294967295,A=R+(O<<5&4294967295|O>>>27),O=M+(R^k&(A^R))+N[6]+3225465664&4294967295,M=A+(O<<9&4294967295|O>>>23),O=k+(A^R&(M^A))+N[11]+643717713&4294967295,k=M+(O<<14&4294967295|O>>>18),O=R+(M^A&(k^M))+N[0]+3921069994&4294967295,R=k+(O<<20&4294967295|O>>>12),O=A+(k^M&(R^k))+N[5]+3593408605&4294967295,A=R+(O<<5&4294967295|O>>>27),O=M+(R^k&(A^R))+N[10]+38016083&4294967295,M=A+(O<<9&4294967295|O>>>23),O=k+(A^R&(M^A))+N[15]+3634488961&4294967295,k=M+(O<<14&4294967295|O>>>18),O=R+(M^A&(k^M))+N[4]+3889429448&4294967295,R=k+(O<<20&4294967295|O>>>12),O=A+(k^M&(R^k))+N[9]+568446438&4294967295,A=R+(O<<5&4294967295|O>>>27),O=M+(R^k&(A^R))+N[14]+3275163606&4294967295,M=A+(O<<9&4294967295|O>>>23),O=k+(A^R&(M^A))+N[3]+4107603335&4294967295,k=M+(O<<14&4294967295|O>>>18),O=R+(M^A&(k^M))+N[8]+1163531501&4294967295,R=k+(O<<20&4294967295|O>>>12),O=A+(k^M&(R^k))+N[13]+2850285829&4294967295,A=R+(O<<5&4294967295|O>>>27),O=M+(R^k&(A^R))+N[2]+4243563512&4294967295,M=A+(O<<9&4294967295|O>>>23),O=k+(A^R&(M^A))+N[7]+1735328473&4294967295,k=M+(O<<14&4294967295|O>>>18),O=R+(M^A&(k^M))+N[12]+2368359562&4294967295,R=k+(O<<20&4294967295|O>>>12),O=A+(R^k^M)+N[5]+4294588738&4294967295,A=R+(O<<4&4294967295|O>>>28),O=M+(A^R^k)+N[8]+2272392833&4294967295,M=A+(O<<11&4294967295|O>>>21),O=k+(M^A^R)+N[11]+1839030562&4294967295,k=M+(O<<16&4294967295|O>>>16),O=R+(k^M^A)+N[14]+4259657740&4294967295,R=k+(O<<23&4294967295|O>>>9),O=A+(R^k^M)+N[1]+2763975236&4294967295,A=R+(O<<4&4294967295|O>>>28),O=M+(A^R^k)+N[4]+1272893353&4294967295,M=A+(O<<11&4294967295|O>>>21),O=k+(M^A^R)+N[7]+4139469664&4294967295,k=M+(O<<16&4294967295|O>>>16),O=R+(k^M^A)+N[10]+3200236656&4294967295,R=k+(O<<23&4294967295|O>>>9),O=A+(R^k^M)+N[13]+681279174&4294967295,A=R+(O<<4&4294967295|O>>>28),O=M+(A^R^k)+N[0]+3936430074&4294967295,M=A+(O<<11&4294967295|O>>>21),O=k+(M^A^R)+N[3]+3572445317&4294967295,k=M+(O<<16&4294967295|O>>>16),O=R+(k^M^A)+N[6]+76029189&4294967295,R=k+(O<<23&4294967295|O>>>9),O=A+(R^k^M)+N[9]+3654602809&4294967295,A=R+(O<<4&4294967295|O>>>28),O=M+(A^R^k)+N[12]+3873151461&4294967295,M=A+(O<<11&4294967295|O>>>21),O=k+(M^A^R)+N[15]+530742520&4294967295,k=M+(O<<16&4294967295|O>>>16),O=R+(k^M^A)+N[2]+3299628645&4294967295,R=k+(O<<23&4294967295|O>>>9),O=A+(k^(R|~M))+N[0]+4096336452&4294967295,A=R+(O<<6&4294967295|O>>>26),O=M+(R^(A|~k))+N[7]+1126891415&4294967295,M=A+(O<<10&4294967295|O>>>22),O=k+(A^(M|~R))+N[14]+2878612391&4294967295,k=M+(O<<15&4294967295|O>>>17),O=R+(M^(k|~A))+N[5]+4237533241&4294967295,R=k+(O<<21&4294967295|O>>>11),O=A+(k^(R|~M))+N[12]+1700485571&4294967295,A=R+(O<<6&4294967295|O>>>26),O=M+(R^(A|~k))+N[3]+2399980690&4294967295,M=A+(O<<10&4294967295|O>>>22),O=k+(A^(M|~R))+N[10]+4293915773&4294967295,k=M+(O<<15&4294967295|O>>>17),O=R+(M^(k|~A))+N[1]+2240044497&4294967295,R=k+(O<<21&4294967295|O>>>11),O=A+(k^(R|~M))+N[8]+1873313359&4294967295,A=R+(O<<6&4294967295|O>>>26),O=M+(R^(A|~k))+N[15]+4264355552&4294967295,M=A+(O<<10&4294967295|O>>>22),O=k+(A^(M|~R))+N[6]+2734768916&4294967295,k=M+(O<<15&4294967295|O>>>17),O=R+(M^(k|~A))+N[13]+1309151649&4294967295,R=k+(O<<21&4294967295|O>>>11),O=A+(k^(R|~M))+N[4]+4149444226&4294967295,A=R+(O<<6&4294967295|O>>>26),O=M+(R^(A|~k))+N[11]+3174756917&4294967295,M=A+(O<<10&4294967295|O>>>22),O=k+(A^(M|~R))+N[2]+718787259&4294967295,k=M+(O<<15&4294967295|O>>>17),O=R+(M^(k|~A))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(k+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+M&4294967295}n.prototype.u=function(C,A){A===void 0&&(A=C.length);for(var R=A-this.blockSize,N=this.B,k=this.h,M=0;M<A;){if(k==0)for(;M<=R;)i(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<A;)if(N[k++]=C.charCodeAt(M++),k==this.blockSize){i(this,N),k=0;break}}else for(;M<A;)if(N[k++]=C[M++],k==this.blockSize){i(this,N),k=0;break}}this.h=k,this.o+=A},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;var R=8*this.o;for(A=C.length-8;A<C.length;++A)C[A]=R&255,R/=256;for(this.u(C),C=Array(16),A=R=0;4>A;++A)for(var N=0;32>N;N+=8)C[R++]=this.g[A]>>>N&255;return C};function o(C,A){var R=s;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function a(C,A){this.h=A;for(var R=[],N=!0,k=C.length-1;0<=k;k--){var M=C[k]|0;N&&M==A||(R[k]=M,N=!1)}this.g=R}var s={};function u(C){return-128<=C&&128>C?o(C,function(A){return new a([A|0],0>A?-1:0)}):new a([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return x(l(-C));for(var A=[],R=1,N=0;C>=R;N++)A[N]=C/R|0,R*=4294967296;return new a(A,0)}function c(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return x(c(C.substring(1),A));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=l(Math.pow(A,8)),N=h,k=0;k<C.length;k+=8){var M=Math.min(8,C.length-k),O=parseInt(C.substring(k,k+M),A);8>M?(M=l(Math.pow(A,M)),N=N.j(M).add(l(O))):(N=N.j(R),N=N.add(l(O)))}return N}var h=u(0),d=u(1),p=u(16777216);t=a.prototype,t.m=function(){if(w(this))return-x(this).m();for(var C=0,A=1,R=0;R<this.g.length;R++){var N=this.i(R);C+=(0<=N?N:4294967296+N)*A,A*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(w(this))return"-"+x(this).toString(C);for(var A=l(Math.pow(C,6)),R=this,N="";;){var k=I(R,A).g;R=v(R,k.j(A));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=k,m(R))return M+N;for(;6>M.length;)M="0"+M;N=M+N}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=v(this,C),w(C)?-1:m(C)?0:1};function x(C){for(var A=C.g.length,R=[],N=0;N<A;N++)R[N]=~C.g[N];return new a(R,~C.h).add(d)}t.abs=function(){return w(this)?x(this):this},t.add=function(C){for(var A=Math.max(this.g.length,C.g.length),R=[],N=0,k=0;k<=A;k++){var M=N+(this.i(k)&65535)+(C.i(k)&65535),O=(M>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);N=O>>>16,M&=65535,O&=65535,R[k]=O<<16|M}return new a(R,R[R.length-1]&-2147483648?-1:0)};function v(C,A){return C.add(x(A))}t.j=function(C){if(m(this)||m(C))return h;if(w(this))return w(C)?x(this).j(x(C)):x(x(this).j(C));if(w(C))return x(this.j(x(C)));if(0>this.l(p)&&0>C.l(p))return l(this.m()*C.m());for(var A=this.g.length+C.g.length,R=[],N=0;N<2*A;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var k=0;k<C.g.length;k++){var M=this.i(N)>>>16,O=this.i(N)&65535,Oe=C.i(k)>>>16,Ot=C.i(k)&65535;R[2*N+2*k]+=O*Ot,y(R,2*N+2*k),R[2*N+2*k+1]+=M*Ot,y(R,2*N+2*k+1),R[2*N+2*k+1]+=O*Oe,y(R,2*N+2*k+1),R[2*N+2*k+2]+=M*Oe,y(R,2*N+2*k+2)}for(N=0;N<A;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=A;N<2*A;N++)R[N]=0;return new a(R,0)};function y(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function E(C,A){this.g=C,this.h=A}function I(C,A){if(m(A))throw Error("division by zero");if(m(C))return new E(h,h);if(w(C))return A=I(x(C),A),new E(x(A.g),x(A.h));if(w(A))return A=I(C,x(A)),new E(x(A.g),A.h);if(30<C.g.length){if(w(C)||w(A))throw Error("slowDivide_ only works with positive integers.");for(var R=d,N=A;0>=N.l(C);)R=b(R),N=b(N);var k=D(R,1),M=D(N,1);for(N=D(N,2),R=D(R,2);!m(N);){var O=M.add(N);0>=O.l(C)&&(k=k.add(R),M=O),N=D(N,1),R=D(R,1)}return A=v(C,k.j(A)),new E(k,A)}for(k=h;0<=C.l(A);){for(R=Math.max(1,Math.floor(C.m()/A.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),M=l(R),O=M.j(A);w(O)||0<O.l(C);)R-=N,M=l(R),O=M.j(A);m(M)&&(M=d),k=k.add(M),C=v(C,O)}return new E(k,C)}t.A=function(C){return I(this,C).h},t.and=function(C){for(var A=Math.max(this.g.length,C.g.length),R=[],N=0;N<A;N++)R[N]=this.i(N)&C.i(N);return new a(R,this.h&C.h)},t.or=function(C){for(var A=Math.max(this.g.length,C.g.length),R=[],N=0;N<A;N++)R[N]=this.i(N)|C.i(N);return new a(R,this.h|C.h)},t.xor=function(C){for(var A=Math.max(this.g.length,C.g.length),R=[],N=0;N<A;N++)R[N]=this.i(N)^C.i(N);return new a(R,this.h^C.h)};function b(C){for(var A=C.g.length+1,R=[],N=0;N<A;N++)R[N]=C.i(N)<<1|C.i(N-1)>>>31;return new a(R,C.h)}function D(C,A){var R=A>>5;A%=32;for(var N=C.g.length-R,k=[],M=0;M<N;M++)k[M]=0<A?C.i(M+R)>>>A|C.i(M+R+1)<<32-A:C.i(M+R);return new a(k,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Ew=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=c,Gi=a}).apply(typeof Yv<"u"?Yv:typeof self<"u"?self:typeof window<"u"?window:{});var ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Aw,ns,Iw,Rl,Qd,Cw,Tw,Sw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,_){return f==Array.prototype||f==Object.prototype||(f[g]=_.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof ol=="object"&&ol];for(var g=0;g<f.length;++g){var _=f[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=r(this);function i(f,g){if(g)e:{var _=n;f=f.split(".");for(var T=0;T<f.length-1;T++){var L=f[T];if(!(L in _))break e;_=_[L]}f=f[f.length-1],T=_[f],g=g(T),g!=T&&g!=null&&e(_,f,{configurable:!0,writable:!0,value:g})}}function o(f,g){f instanceof String&&(f+="");var _=0,T=!1,L={next:function(){if(!T&&_<f.length){var B=_++;return{value:g(B,f[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(f){return f||function(){return o(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function u(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function l(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function c(f,g,_){return f.call.apply(f.bind,arguments)}function h(f,g,_){if(!f)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),f.apply(g,L)}}return function(){return f.apply(g,arguments)}}function d(f,g,_){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,d.apply(null,arguments)}function p(f,g){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),f.apply(this,T)}}function m(f,g){function _(){}_.prototype=g.prototype,f.aa=g.prototype,f.prototype=new _,f.prototype.constructor=f,f.Qb=function(T,L,B){for(var G=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)G[Se-2]=arguments[Se];return g.prototype[L].apply(T,G)}}function w(f){const g=f.length;if(0<g){const _=Array(g);for(let T=0;T<g;T++)_[T]=f[T];return _}return[]}function x(f,g){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(u(T)){const L=f.length||0,B=T.length||0;f.length=L+B;for(let G=0;G<B;G++)f[L+G]=T[G]}else f.push(T)}}class v{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function y(f){return/^[\s\xa0]*$/.test(f)}function E(){var f=s.navigator;return f&&(f=f.userAgent)?f:""}function I(f){return I[" "](f),f}I[" "]=function(){};var b=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function D(f,g,_){for(const T in f)g.call(_,f[T],T,f)}function C(f,g){for(const _ in f)g.call(void 0,f[_],_,f)}function A(f){const g={};for(const _ in f)g[_]=f[_];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(f,g){let _,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(_ in T)f[_]=T[_];for(let B=0;B<R.length;B++)_=R[B],Object.prototype.hasOwnProperty.call(T,_)&&(f[_]=T[_])}}function k(f){var g=1;f=f.split(":");const _=[];for(;0<g&&f.length;)_.push(f.shift()),g--;return f.length&&_.push(f.join(":")),_}function M(f){s.setTimeout(()=>{throw f},0)}function O(){var f=re;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class Oe{constructor(){this.h=this.g=null}add(g,_){const T=Ot.get();T.set(g,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Ot=new v(()=>new nn,f=>f.reset());class nn{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fr,$=!1,re=new Oe,oe=()=>{const f=s.Promise.resolve(void 0);fr=()=>{f.then(Ve)}};var Ve=()=>{for(var f;f=O();){try{f.h.call(f.g)}catch(_){M(_)}var g=Ot;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}$=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qe(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}qe.prototype.h=function(){this.defaultPrevented=!0};var on=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const _=()=>{};s.addEventListener("test",_,g),s.removeEventListener("test",_,g)}catch{}return f}();function an(f,g){if(qe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var _=this.type=f.type,T=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(b){e:{try{I(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=f.fromElement:_=="mouseout"&&(g=f.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:sn[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&an.aa.h.call(this)}}m(an,qe);var sn={2:"touch",3:"pen",4:"mouse"};an.prototype.h=function(){an.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Hr="closure_listenable_"+(1e6*Math.random()|0),$E=0;function XE(f,g,_,T,L){this.listener=f,this.proxy=null,this.src=g,this.type=_,this.capture=!!T,this.ha=L,this.key=++$E,this.da=this.fa=!1}function Iu(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Cu(f){this.src=f,this.g={},this.h=0}Cu.prototype.add=function(f,g,_,T,L){var B=f.toString();f=this.g[B],f||(f=this.g[B]=[],this.h++);var G=bf(f,g,T,L);return-1<G?(g=f[G],_||(g.fa=!1)):(g=new XE(g,this.src,B,!!T,L),g.fa=_,f.push(g)),g};function Of(f,g){var _=g.type;if(_ in f.g){var T=f.g[_],L=Array.prototype.indexOf.call(T,g,void 0),B;(B=0<=L)&&Array.prototype.splice.call(T,L,1),B&&(Iu(g),f.g[_].length==0&&(delete f.g[_],f.h--))}}function bf(f,g,_,T){for(var L=0;L<f.length;++L){var B=f[L];if(!B.da&&B.listener==g&&B.capture==!!_&&B.ha==T)return L}return-1}var Df="closure_lm_"+(1e6*Math.random()|0),kf={};function Cp(f,g,_,T,L){if(T&&T.once)return Sp(f,g,_,T,L);if(Array.isArray(g)){for(var B=0;B<g.length;B++)Cp(f,g[B],_,T,L);return null}return _=Bf(_),f&&f[Hr]?f.K(g,_,l(T)?!!T.capture:!!T,L):Tp(f,g,_,!1,T,L)}function Tp(f,g,_,T,L,B){if(!g)throw Error("Invalid event type");var G=l(L)?!!L.capture:!!L,Se=Lf(f);if(Se||(f[Df]=Se=new Cu(f)),_=Se.add(g,_,T,G,B),_.proxy)return _;if(T=KE(),_.proxy=T,T.src=f,T.listener=_,f.addEventListener)on||(L=G),L===void 0&&(L=!1),f.addEventListener(g.toString(),T,L);else if(f.attachEvent)f.attachEvent(Pp(g.toString()),T);else if(f.addListener&&f.removeListener)f.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function KE(){function f(_){return g.call(f.src,f.listener,_)}const g=qE;return f}function Sp(f,g,_,T,L){if(Array.isArray(g)){for(var B=0;B<g.length;B++)Sp(f,g[B],_,T,L);return null}return _=Bf(_),f&&f[Hr]?f.L(g,_,l(T)?!!T.capture:!!T,L):Tp(f,g,_,!0,T,L)}function Rp(f,g,_,T,L){if(Array.isArray(g))for(var B=0;B<g.length;B++)Rp(f,g[B],_,T,L);else T=l(T)?!!T.capture:!!T,_=Bf(_),f&&f[Hr]?(f=f.i,g=String(g).toString(),g in f.g&&(B=f.g[g],_=bf(B,_,T,L),-1<_&&(Iu(B[_]),Array.prototype.splice.call(B,_,1),B.length==0&&(delete f.g[g],f.h--)))):f&&(f=Lf(f))&&(g=f.g[g.toString()],f=-1,g&&(f=bf(g,_,T,L)),(_=-1<f?g[f]:null)&&Mf(_))}function Mf(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[Hr])Of(g.i,f);else{var _=f.type,T=f.proxy;g.removeEventListener?g.removeEventListener(_,T,f.capture):g.detachEvent?g.detachEvent(Pp(_),T):g.addListener&&g.removeListener&&g.removeListener(T),(_=Lf(g))?(Of(_,f),_.h==0&&(_.src=null,g[Df]=null)):Iu(f)}}}function Pp(f){return f in kf?kf[f]:kf[f]="on"+f}function qE(f,g){if(f.da)f=!0;else{g=new an(g,this);var _=f.listener,T=f.ha||f.src;f.fa&&Mf(f),f=_.call(T,g)}return f}function Lf(f){return f=f[Df],f instanceof Cu?f:null}var Ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bf(f){return typeof f=="function"?f:(f[Ff]||(f[Ff]=function(g){return f.handleEvent(g)}),f[Ff])}function bt(){Te.call(this),this.i=new Cu(this),this.M=this,this.F=null}m(bt,Te),bt.prototype[Hr]=!0,bt.prototype.removeEventListener=function(f,g,_,T){Rp(this,f,g,_,T)};function $t(f,g){var _,T=f.F;if(T)for(_=[];T;T=T.F)_.push(T);if(f=f.M,T=g.type||g,typeof g=="string")g=new qe(g,f);else if(g instanceof qe)g.target=g.target||f;else{var L=g;g=new qe(T,f),N(g,L)}if(L=!0,_)for(var B=_.length-1;0<=B;B--){var G=g.g=_[B];L=Tu(G,T,!0,g)&&L}if(G=g.g=f,L=Tu(G,T,!0,g)&&L,L=Tu(G,T,!1,g)&&L,_)for(B=0;B<_.length;B++)G=g.g=_[B],L=Tu(G,T,!1,g)&&L}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var _=f.g[g],T=0;T<_.length;T++)Iu(_[T]);delete f.g[g],f.h--}}this.F=null},bt.prototype.K=function(f,g,_,T){return this.i.add(String(f),g,!1,_,T)},bt.prototype.L=function(f,g,_,T){return this.i.add(String(f),g,!0,_,T)};function Tu(f,g,_,T){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,B=0;B<g.length;++B){var G=g[B];if(G&&!G.da&&G.capture==_){var Se=G.listener,wt=G.ha||G.src;G.fa&&Of(f.i,G),L=Se.call(wt,T)!==!1&&L}}return L&&!T.defaultPrevented}function Np(f,g,_){if(typeof f=="function")_&&(f=d(f,_));else if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:s.setTimeout(f,g||0)}function Op(f){f.g=Np(()=>{f.g=null,f.i&&(f.i=!1,Op(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class YE extends Te{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Op(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ca(f){Te.call(this),this.h=f,this.g={}}m(Ca,Te);var bp=[];function Dp(f){D(f.g,function(g,_){this.g.hasOwnProperty(_)&&Mf(g)},f),f.g={}}Ca.prototype.N=function(){Ca.aa.N.call(this),Dp(this)},Ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vf=s.JSON.stringify,QE=s.JSON.parse,ZE=class{stringify(f){return s.JSON.stringify(f,void 0)}parse(f){return s.JSON.parse(f,void 0)}};function Uf(){}Uf.prototype.h=null;function kp(f){return f.h||(f.h=f.i())}function Mp(){}var Ta={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jf(){qe.call(this,"d")}m(jf,qe);function zf(){qe.call(this,"c")}m(zf,qe);var Ri={},Lp=null;function Su(){return Lp=Lp||new bt}Ri.La="serverreachability";function Fp(f){qe.call(this,Ri.La,f)}m(Fp,qe);function Sa(f){const g=Su();$t(g,new Fp(g))}Ri.STAT_EVENT="statevent";function Bp(f,g){qe.call(this,Ri.STAT_EVENT,f),this.stat=g}m(Bp,qe);function Xt(f){const g=Su();$t(g,new Bp(g,f))}Ri.Ma="timingevent";function Vp(f,g){qe.call(this,Ri.Ma,f),this.size=g}m(Vp,qe);function Ra(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){f()},g)}function Pa(){this.g=!0}Pa.prototype.xa=function(){this.g=!1};function JE(f,g,_,T,L,B){f.info(function(){if(f.g)if(B)for(var G="",Se=B.split("&"),wt=0;wt<Se.length;wt++){var ge=Se[wt].split("=");if(1<ge.length){var Dt=ge[0];ge=ge[1];var kt=Dt.split("_");G=2<=kt.length&&kt[1]=="type"?G+(Dt+"="+ge+"&"):G+(Dt+"=redacted&")}}else G=null;else G=B;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+g+`
`+_+`
`+G})}function eA(f,g,_,T,L,B,G){f.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+g+`
`+_+`
`+B+" "+G})}function lo(f,g,_,T){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+rA(f,_)+(T?" "+T:"")})}function tA(f,g){f.info(function(){return"TIMEOUT: "+g})}Pa.prototype.info=function(){};function rA(f,g){if(!f.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(f=0;f<_.length;f++)if(Array.isArray(_[f])){var T=_[f];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return Vf(_)}catch{return g}}var Ru={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Up={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hf;function Pu(){}m(Pu,Uf),Pu.prototype.g=function(){return new XMLHttpRequest},Pu.prototype.i=function(){return{}},Hf=new Pu;function Dn(f,g,_,T){this.j=f,this.i=g,this.l=_,this.R=T||1,this.U=new Ca(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jp}function jp(){this.i=null,this.g="",this.h=!1}var zp={},Wf={};function Gf(f,g,_){f.L=1,f.v=Du(un(g)),f.m=_,f.P=!0,Hp(f,null)}function Hp(f,g){f.F=Date.now(),Nu(f),f.A=un(f.v);var _=f.A,T=f.R;Array.isArray(T)||(T=[String(T)]),ng(_.i,"t",T),f.C=0,_=f.j.J,f.h=new jp,f.g=xg(f.j,_?g:null,!f.m),0<f.O&&(f.M=new YE(d(f.Y,f,f.g),f.O)),g=f.U,_=f.g,T=f.ca;var L="readystatechange";Array.isArray(L)||(L&&(bp[0]=L.toString()),L=bp);for(var B=0;B<L.length;B++){var G=Cp(_,L[B],T||g.handleEvent,!1,g.h||g);if(!G)break;g.g[G.key]=G}g=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),Sa(),JE(f.i,f.u,f.A,f.l,f.R,f.m)}Dn.prototype.ca=function(f){f=f.target;const g=this.M;g&&ln(f)==3?g.j():this.Y(f)},Dn.prototype.Y=function(f){try{if(f==this.g)e:{const kt=ln(this.g);var g=this.g.Ba();const ho=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||cg(this.g)))){this.J||kt!=4||g==7||(g==8||0>=ho?Sa(3):Sa(2)),$f(this);var _=this.g.Z();this.X=_;t:if(Wp(this)){var T=cg(this.g);f="";var L=T.length,B=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pi(this),Na(this);var G="";break t}this.h.i=new s.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,f+=this.h.i.decode(T[g],{stream:!(B&&g==L-1)});T.length=0,this.h.g+=f,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=_==200,eA(this.i,this.u,this.A,this.l,this.R,kt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,wt=this.g;if((Se=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Se)){var ge=Se;break t}}ge=null}if(_=ge)lo(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xf(this,_);else{this.o=!1,this.s=3,Xt(12),Pi(this),Na(this);break e}}if(this.P){_=!0;let Nr;for(;!this.J&&this.C<G.length;)if(Nr=nA(this,G),Nr==Wf){kt==4&&(this.s=4,Xt(14),_=!1),lo(this.i,this.l,null,"[Incomplete Response]");break}else if(Nr==zp){this.s=4,Xt(15),lo(this.i,this.l,G,"[Invalid Chunk]"),_=!1;break}else lo(this.i,this.l,Nr,null),Xf(this,Nr);if(Wp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||G.length!=0||this.h.h||(this.s=1,Xt(16),_=!1),this.o=this.o&&_,!_)lo(this.i,this.l,G,"[Invalid Chunked Response]"),Pi(this),Na(this);else if(0<G.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Jf(Dt),Dt.M=!0,Xt(11))}}else lo(this.i,this.l,G,null),Xf(this,G);kt==4&&Pi(this),this.o&&!this.J&&(kt==4?mg(this.j,this):(this.o=!1,Nu(this)))}else wA(this.g),_==400&&0<G.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),Pi(this),Na(this)}}}catch{}finally{}};function Wp(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function nA(f,g){var _=f.C,T=g.indexOf(`
`,_);return T==-1?Wf:(_=Number(g.substring(_,T)),isNaN(_)?zp:(T+=1,T+_>g.length?Wf:(g=g.slice(T,T+_),f.C=T+_,g)))}Dn.prototype.cancel=function(){this.J=!0,Pi(this)};function Nu(f){f.S=Date.now()+f.I,Gp(f,f.I)}function Gp(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ra(d(f.ba,f),g)}function $f(f){f.B&&(s.clearTimeout(f.B),f.B=null)}Dn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(tA(this.i,this.A),this.L!=2&&(Sa(),Xt(17)),Pi(this),this.s=2,Na(this)):Gp(this,this.S-f)};function Na(f){f.j.G==0||f.J||mg(f.j,f)}function Pi(f){$f(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,Dp(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function Xf(f,g){try{var _=f.j;if(_.G!=0&&(_.g==f||Kf(_.h,f))){if(!f.K&&Kf(_.h,f)&&_.G==3){try{var T=_.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<f.F)Vu(_),Fu(_);else break e;Zf(_),Xt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ra(d(_.Za,_),6e3));if(1>=Kp(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Oi(_,11)}else if((f.K||_.g==f)&&Vu(_),!y(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let ge=L[g];if(_.T=ge[0],ge=ge[1],_.G==2)if(ge[0]=="c"){_.K=ge[1],_.ia=ge[2];const Dt=ge[3];Dt!=null&&(_.la=Dt,_.j.info("VER="+_.la));const kt=ge[4];kt!=null&&(_.Aa=kt,_.j.info("SVER="+_.Aa));const ho=ge[5];ho!=null&&typeof ho=="number"&&0<ho&&(T=1.5*ho,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Nr=f.g;if(Nr){const ju=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ju){var B=T.h;B.g||ju.indexOf("spdy")==-1&&ju.indexOf("quic")==-1&&ju.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(qf(B,B.h),B.h=null))}if(T.D){const eh=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;eh&&(T.ya=eh,be(T.I,T.D,eh))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-f.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var G=f;if(T.qa=wg(T,T.J?T.ia:null,T.W),G.K){qp(T.h,G);var Se=G,wt=T.L;wt&&(Se.I=wt),Se.B&&($f(Se),Nu(Se)),T.g=G}else gg(T);0<_.i.length&&Bu(_)}else ge[0]!="stop"&&ge[0]!="close"||Oi(_,7);else _.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Oi(_,7):Qf(_):ge[0]!="noop"&&_.l&&_.l.ta(ge),_.v=0)}}Sa(4)}catch{}}var iA=class{constructor(f,g){this.g=f,this.map=g}};function $p(f){this.l=f||10,s.PerformanceNavigationTiming?(f=s.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xp(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Kp(f){return f.h?1:f.g?f.g.size:0}function Kf(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function qf(f,g){f.g?f.g.add(g):f.h=g}function qp(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}$p.prototype.cancel=function(){if(this.i=Yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Yp(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const _ of f.g.values())g=g.concat(_.D);return g}return w(f.i)}function oA(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var g=[],_=f.length,T=0;T<_;T++)g.push(f[T]);return g}g=[],_=0;for(T in f)g[_++]=f[T];return g}function aA(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var g=[];f=f.length;for(var _=0;_<f;_++)g.push(_);return g}g=[],_=0;for(const T in f)g[_++]=T;return g}}}function Qp(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var _=aA(f),T=oA(f),L=T.length,B=0;B<L;B++)g.call(void 0,T[B],_&&_[B],f)}var Zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sA(f,g){if(f){f=f.split("&");for(var _=0;_<f.length;_++){var T=f[_].indexOf("="),L=null;if(0<=T){var B=f[_].substring(0,T);L=f[_].substring(T+1)}else B=f[_];g(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ni(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ni){this.h=f.h,Ou(this,f.j),this.o=f.o,this.g=f.g,bu(this,f.s),this.l=f.l;var g=f.i,_=new Da;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Jp(this,_),this.m=f.m}else f&&(g=String(f).match(Zp))?(this.h=!1,Ou(this,g[1]||"",!0),this.o=Oa(g[2]||""),this.g=Oa(g[3]||"",!0),bu(this,g[4]),this.l=Oa(g[5]||"",!0),Jp(this,g[6]||"",!0),this.m=Oa(g[7]||"")):(this.h=!1,this.i=new Da(null,this.h))}Ni.prototype.toString=function(){var f=[],g=this.j;g&&f.push(ba(g,eg,!0),":");var _=this.g;return(_||g=="file")&&(f.push("//"),(g=this.o)&&f.push(ba(g,eg,!0),"@"),f.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&f.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&f.push("/"),f.push(ba(_,_.charAt(0)=="/"?cA:lA,!0))),(_=this.i.toString())&&f.push("?",_),(_=this.m)&&f.push("#",ba(_,hA)),f.join("")};function un(f){return new Ni(f)}function Ou(f,g,_){f.j=_?Oa(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function bu(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function Jp(f,g,_){g instanceof Da?(f.i=g,dA(f.i,f.h)):(_||(g=ba(g,fA)),f.i=new Da(g,f.h))}function be(f,g,_){f.i.set(g,_)}function Du(f){return be(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Oa(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ba(f,g,_){return typeof f=="string"?(f=encodeURI(f).replace(g,uA),_&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function uA(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var eg=/[#\/\?@]/g,lA=/[#\?:]/g,cA=/[#\?]/g,fA=/[#\?@]/g,hA=/#/g;function Da(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function kn(f){f.g||(f.g=new Map,f.h=0,f.i&&sA(f.i,function(g,_){f.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=Da.prototype,t.add=function(f,g){kn(this),this.i=null,f=co(this,f);var _=this.g.get(f);return _||this.g.set(f,_=[]),_.push(g),this.h+=1,this};function tg(f,g){kn(f),g=co(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function rg(f,g){return kn(f),g=co(f,g),f.g.has(g)}t.forEach=function(f,g){kn(this),this.g.forEach(function(_,T){_.forEach(function(L){f.call(g,L,T,this)},this)},this)},t.na=function(){kn(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let T=0;T<g.length;T++){const L=f[T];for(let B=0;B<L.length;B++)_.push(g[T])}return _},t.V=function(f){kn(this);let g=[];if(typeof f=="string")rg(this,f)&&(g=g.concat(this.g.get(co(this,f))));else{f=Array.from(this.g.values());for(let _=0;_<f.length;_++)g=g.concat(f[_])}return g},t.set=function(f,g){return kn(this),this.i=null,f=co(this,f),rg(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},t.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function ng(f,g,_){tg(f,g),0<_.length&&(f.i=null,f.g.set(co(f,g),w(_)),f.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var T=g[_];const B=encodeURIComponent(String(T)),G=this.V(T);for(T=0;T<G.length;T++){var L=B;G[T]!==""&&(L+="="+encodeURIComponent(String(G[T]))),f.push(L)}}return this.i=f.join("&")};function co(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function dA(f,g){g&&!f.j&&(kn(f),f.i=null,f.g.forEach(function(_,T){var L=T.toLowerCase();T!=L&&(tg(this,T),ng(this,L,_))},f)),f.j=g}function pA(f,g){const _=new Pa;if(s.Image){const T=new Image;T.onload=p(Mn,_,"TestLoadImage: loaded",!0,g,T),T.onerror=p(Mn,_,"TestLoadImage: error",!1,g,T),T.onabort=p(Mn,_,"TestLoadImage: abort",!1,g,T),T.ontimeout=p(Mn,_,"TestLoadImage: timeout",!1,g,T),s.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=f}else g(!1)}function gA(f,g){const _=new Pa,T=new AbortController,L=setTimeout(()=>{T.abort(),Mn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:T.signal}).then(B=>{clearTimeout(L),B.ok?Mn(_,"TestPingServer: ok",!0,g):Mn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Mn(_,"TestPingServer: error",!1,g)})}function Mn(f,g,_,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(_)}catch{}}function vA(){this.g=new ZE}function mA(f,g,_){const T=_||"";try{Qp(f,function(L,B){let G=L;l(L)&&(G=Vf(L)),g.push(T+B+"="+encodeURIComponent(G))})}catch(L){throw g.push(T+"type="+encodeURIComponent("_badmap")),L}}function ku(f){this.l=f.Ub||null,this.j=f.eb||!1}m(ku,Uf),ku.prototype.g=function(){return new Mu(this.l,this.j)},ku.prototype.i=function(f){return function(){return f}}({});function Mu(f,g){bt.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Mu,bt),t=Mu.prototype,t.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,Ma(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||s).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ka(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ma(this)),this.g&&(this.readyState=3,Ma(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ig(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ig(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?ka(this):Ma(this),this.readyState==3&&ig(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,ka(this))},t.Qa=function(f){this.g&&(this.response=f,ka(this))},t.ga=function(){this.g&&ka(this)};function ka(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ma(f)}t.setRequestHeader=function(f,g){this.u.append(f,g)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,f.push(_[0]+": "+_[1]),_=g.next();return f.join(`\r
`)};function Ma(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Mu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function og(f){let g="";return D(f,function(_,T){g+=T,g+=":",g+=_,g+=`\r
`}),g}function Yf(f,g,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=og(_),typeof f=="string"?_!=null&&encodeURIComponent(String(_)):be(f,g,_))}function $e(f){bt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m($e,bt);var yA=/^https?$/i,_A=["POST","PUT"];t=$e.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,g,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hf.g(),this.v=this.o?kp(this.o):kp(Hf),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(B){ag(this,B);return}if(f=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)_.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())_.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),L=s.FormData&&f instanceof s.FormData,!(0<=Array.prototype.indexOf.call(_A,g,void 0))||T||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,G]of _)this.g.setRequestHeader(B,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lg(this),this.u=!0,this.g.send(f),this.u=!1}catch(B){ag(this,B)}};function ag(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,sg(f),Lu(f)}function sg(f){f.A||(f.A=!0,$t(f,"complete"),$t(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,$t(this,"complete"),$t(this,"abort"),Lu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lu(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ug(this):this.bb())},t.bb=function(){ug(this)};function ug(f){if(f.h&&typeof a<"u"&&(!f.v[1]||ln(f)!=4||f.Z()!=2)){if(f.u&&ln(f)==4)Np(f.Ea,0,f);else if($t(f,"readystatechange"),ln(f)==4){f.h=!1;try{const G=f.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var T;if(T=G===0){var L=String(f.D).match(Zp)[1]||null;!L&&s.self&&s.self.location&&(L=s.self.location.protocol.slice(0,-1)),T=!yA.test(L?L.toLowerCase():"")}_=T}if(_)$t(f,"complete"),$t(f,"success");else{f.m=6;try{var B=2<ln(f)?f.g.statusText:""}catch{B=""}f.l=B+" ["+f.Z()+"]",sg(f)}}finally{Lu(f)}}}}function Lu(f,g){if(f.g){lg(f);const _=f.g,T=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||$t(f,"ready");try{_.onreadystatechange=T}catch{}}}function lg(f){f.I&&(s.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function ln(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),QE(g)}};function cg(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function wA(f){const g={};f=(f.g&&2<=ln(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<f.length;T++){if(y(f[T]))continue;var _=k(f[T]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=g[L]||[];g[L]=B,B.push(_)}C(g,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function La(f,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[f]||g}function fg(f){this.Aa=0,this.i=[],this.j=new Pa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=La("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=La("baseRetryDelayMs",5e3,f),this.cb=La("retryDelaySeedMs",1e4,f),this.Wa=La("forwardChannelMaxRetries",2,f),this.wa=La("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new $p(f&&f.concurrentRequestLimit),this.Da=new vA,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fg.prototype,t.la=8,t.G=1,t.connect=function(f,g,_,T){Xt(0),this.W=f,this.H=g||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=wg(this,null,this.W),Bu(this)};function Qf(f){if(hg(f),f.G==3){var g=f.U++,_=un(f.I);if(be(_,"SID",f.K),be(_,"RID",g),be(_,"TYPE","terminate"),Fa(f,_),g=new Dn(f,f.j,g),g.L=2,g.v=Du(un(_)),_=!1,s.navigator&&s.navigator.sendBeacon)try{_=s.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&s.Image&&(new Image().src=g.v,_=!0),_||(g.g=xg(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Nu(g)}_g(f)}function Fu(f){f.g&&(Jf(f),f.g.cancel(),f.g=null)}function hg(f){Fu(f),f.u&&(s.clearTimeout(f.u),f.u=null),Vu(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&s.clearTimeout(f.s),f.s=null)}function Bu(f){if(!Xp(f.h)&&!f.s){f.s=!0;var g=f.Ga;fr||oe(),$||(fr(),$=!0),re.add(g,f),f.B=0}}function xA(f,g){return Kp(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ra(d(f.Ga,f,g),yg(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const L=new Dn(this,this.j,f);let B=this.o;if(this.S&&(B?(B=A(B),N(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=pg(this,L,g),_=un(this.I),be(_,"RID",f),be(_,"CVER",22),this.D&&be(_,"X-HTTP-Session-Id",this.D),Fa(this,_),B&&(this.O?g="headers="+encodeURIComponent(String(og(B)))+"&"+g:this.m&&Yf(_,this.m,B)),qf(this.h,L),this.Ua&&be(_,"TYPE","init"),this.P?(be(_,"$req",g),be(_,"SID","null"),L.T=!0,Gf(L,_,null)):Gf(L,_,g),this.G=2}}else this.G==3&&(f?dg(this,f):this.i.length==0||Xp(this.h)||dg(this))};function dg(f,g){var _;g?_=g.l:_=f.U++;const T=un(f.I);be(T,"SID",f.K),be(T,"RID",_),be(T,"AID",f.T),Fa(f,T),f.m&&f.o&&Yf(T,f.m,f.o),_=new Dn(f,f.j,_,f.B+1),f.m===null&&(_.H=f.o),g&&(f.i=g.D.concat(f.i)),g=pg(f,_,1e3),_.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),qf(f.h,_),Gf(_,T,g)}function Fa(f,g){f.H&&D(f.H,function(_,T){be(g,T,_)}),f.l&&Qp({},function(_,T){be(g,T,_)})}function pg(f,g,_){_=Math.min(f.i.length,_);var T=f.l?d(f.l.Na,f.l,f):null;e:{var L=f.i;let B=-1;for(;;){const G=["count="+_];B==-1?0<_?(B=L[0].g,G.push("ofs="+B)):B=0:G.push("ofs="+B);let Se=!0;for(let wt=0;wt<_;wt++){let ge=L[wt].g;const Dt=L[wt].map;if(ge-=B,0>ge)B=Math.max(0,L[wt].g-100),Se=!1;else try{mA(Dt,G,"req"+ge+"_")}catch{T&&T(Dt)}}if(Se){T=G.join("&");break e}}}return f=f.i.splice(0,_),g.D=f,T}function gg(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;fr||oe(),$||(fr(),$=!0),re.add(g,f),f.v=0}}function Zf(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ra(d(f.Fa,f),yg(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,vg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ra(d(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),Fu(this),vg(this))};function Jf(f){f.A!=null&&(s.clearTimeout(f.A),f.A=null)}function vg(f){f.g=new Dn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=un(f.qa);be(g,"RID","rpc"),be(g,"SID",f.K),be(g,"AID",f.T),be(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&be(g,"TO",f.ja),be(g,"TYPE","xmlhttp"),Fa(f,g),f.m&&f.o&&Yf(g,f.m,f.o),f.L&&(f.g.I=f.L);var _=f.g;f=f.ia,_.L=1,_.v=Du(un(g)),_.m=null,_.P=!0,Hp(_,f)}t.Za=function(){this.C!=null&&(this.C=null,Fu(this),Zf(this),Xt(19))};function Vu(f){f.C!=null&&(s.clearTimeout(f.C),f.C=null)}function mg(f,g){var _=null;if(f.g==g){Vu(f),Jf(f),f.g=null;var T=2}else if(Kf(f.h,g))_=g.D,qp(f.h,g),T=1;else return;if(f.G!=0){if(g.o)if(T==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=f.B;T=Su(),$t(T,new Vp(T,_)),Bu(f)}else gg(f);else if(L=g.s,L==3||L==0&&0<g.X||!(T==1&&xA(f,g)||T==2&&Zf(f)))switch(_&&0<_.length&&(g=f.h,g.i=g.i.concat(_)),L){case 1:Oi(f,5);break;case 4:Oi(f,10);break;case 3:Oi(f,6);break;default:Oi(f,2)}}}function yg(f,g){let _=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(_*=2),_*g}function Oi(f,g){if(f.j.info("Error code "+g),g==2){var _=d(f.fb,f),T=f.Xa;const L=!T;T=new Ni(T||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ou(T,"https"),Du(T),L?pA(T.toString(),_):gA(T.toString(),_)}else Xt(2);f.G=0,f.l&&f.l.sa(g),_g(f),hg(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function _g(f){if(f.G=0,f.ka=[],f.l){const g=Yp(f.h);(g.length!=0||f.i.length!=0)&&(x(f.ka,g),x(f.ka,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.ra()}}function wg(f,g,_){var T=_ instanceof Ni?un(_):new Ni(_);if(T.g!="")g&&(T.g=g+"."+T.g),bu(T,T.s);else{var L=s.location;T=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var B=new Ni(null);T&&Ou(B,T),g&&(B.g=g),L&&bu(B,L),_&&(B.l=_),T=B}return _=f.D,g=f.ya,_&&g&&be(T,_,g),be(T,"VER",f.la),Fa(f,T),T}function xg(f,g,_){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new $e(new ku({eb:_})):new $e(f.pa),g.Ha(f.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eg(){}t=Eg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Uu(){}Uu.prototype.g=function(f,g){return new hr(f,g)};function hr(f,g){bt.call(this),this.g=new fg(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!y(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!y(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new fo(this)}m(hr,bt),hr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hr.prototype.close=function(){Qf(this.g)},hr.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var _={};_.__data__=f,f=_}else this.u&&(_={},_.__data__=Vf(f),f=_);g.i.push(new iA(g.Ya++,f)),g.G==3&&Bu(g)},hr.prototype.N=function(){this.g.l=null,delete this.j,Qf(this.g),delete this.g,hr.aa.N.call(this)};function Ag(f){jf.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const _ in g){f=_;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}m(Ag,jf);function Ig(){zf.call(this),this.status=1}m(Ig,zf);function fo(f){this.g=f}m(fo,Eg),fo.prototype.ua=function(){$t(this.g,"a")},fo.prototype.ta=function(f){$t(this.g,new Ag(f))},fo.prototype.sa=function(f){$t(this.g,new Ig)},fo.prototype.ra=function(){$t(this.g,"b")},Uu.prototype.createWebChannel=Uu.prototype.g,hr.prototype.send=hr.prototype.o,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,Sw=function(){return new Uu},Tw=function(){return Su()},Cw=Ri,Qd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ru.NO_ERROR=0,Ru.TIMEOUT=8,Ru.HTTP_ERROR=6,Rl=Ru,Up.COMPLETE="complete",Iw=Up,Mp.EventType=Ta,Ta.OPEN="a",Ta.CLOSE="b",Ta.ERROR="c",Ta.MESSAGE="d",bt.prototype.listen=bt.prototype.K,ns=Mp,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Aw=$e}).apply(typeof ol<"u"?ol:typeof self<"u"?self:typeof window<"u"?window:{});const Qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ma="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new w1("@firebase/firestore");function Xa(){return Ji.logLevel}function q(t,...e){if(Ji.logLevel<=ce.DEBUG){const r=e.map(A1);Ji.debug(`Firestore (${ma}): ${t}`,...r)}}function Tn(t,...e){if(Ji.logLevel<=ce.ERROR){const r=e.map(A1);Ji.error(`Firestore (${ma}): ${t}`,...r)}}function ra(t,...e){if(Ji.logLevel<=ce.WARN){const r=e.map(A1);Ji.warn(`Firestore (${ma}): ${t}`,...r)}}function A1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: `+t;throw Tn(e),new Error(e)}function Ie(t,e){t||te()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends bn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Vt.UNAUTHENTICATED))}shutdown(){}}class M3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class L3{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ie(this.o===void 0);let n=this.i;const i=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let o=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wn,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},s=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>s(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?s(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wn)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ie(typeof n.accessToken=="string"),new Rw(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Vt(e)}}class F3{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class B3{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new F3(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ie(this.o===void 0);const n=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ie(typeof r.token=="string"),this.R=r.token,new V3(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=j3(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%e.length))}return n}}function me(t,e){return t<e?-1:t>e?1:0}function na(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new ft(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new ft(0,0))}static max(){return new ne(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,r,n){r===void 0?r=0:r>e.length&&te(),n===void 0?n=e.length-r:n>e.length-r&&te(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Ws.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ws?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=e.get(i),a=r.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Le extends Ws{construct(e,r,n){return new Le(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new X(j.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Le(r)}static emptyPath(){return new Le([])}}const z3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Ws{construct(e,r,n){return new Ct(e,r,n)}static isValidIdentifier(e){return z3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new X(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(n+=s,i++):(o(),i++)}if(o(),a)throw new X(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(r)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Le.fromString(e))}static fromName(e){return new Q(Le.fromString(e).popFirst(5))}static empty(){return new Q(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Le.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Le(e.slice()))}}function H3(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(n===1e9?new ft(r+1,0):new ft(r,n));return new mi(i,Q.empty(),e)}function W3(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new mi(ne.min(),Q.empty(),-1)}static max(){return new mi(ne.max(),Q.empty(),-1)}}function G3(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Q.comparator(t.documentKey,e.documentKey),r!==0?r:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==$3)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new z((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof z?r:z.resolve(r)}catch(r){return z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):z.reject(r)}static resolve(e){return new z((r,n)=>{r(e)})}static reject(e){return new z((r,n)=>{n(e)})}static waitFor(e){return new z((r,n)=>{let i=0,o=0,a=!1;e.forEach(s=>{++i,s.next(()=>{++o,a&&o===i&&r()},u=>n(u))}),a=!0,o===i&&r()})}static or(e){let r=z.resolve(!1);for(const n of e)r=r.next(i=>i?z.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new z((n,i)=>{const o=e.length,a=new Array(o);let s=0;for(let u=0;u<o;u++){const l=u;r(e[l]).next(c=>{a[l]=c,++s,s===o&&n(a)},c=>i(c))}})}static doWhile(e,r){return new z((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}function K3(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}I1.oe=-1;function rf(t){return t==null}function mc(t){return t===0&&1/t==-1/0}function q3(t){return typeof t=="number"&&Number.isInteger(t)&&!mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function ao(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Nw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,r){this.comparator=e,this.root=r||It.EMPTY}insert(e,r){return new Ge(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new al(this.root,e,this.comparator,!1)}getReverseIterator(){return new al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new al(this.root,e,this.comparator,!0)}}class al{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??It.RED,this.left=i??It.EMPTY,this.right=o??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new It(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return It.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,r,n,i,o){return this}insert(e,r,n){return new It(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Rt(this.comparator);return r.data=e,r}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new gr([])}unionWith(e){let r=new Rt(Ct.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new gr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ow("Invalid base64 string: "+o):o}}(e);return new Nt(r)}static fromUint8Array(e){const r=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new Nt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const Y3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(Ie(!!t),typeof t=="string"){let e=0;const r=Y3.exec(t);if(Ie(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function eo(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function T1(t){const e=t.mapValue.fields.__previous_value__;return C1(e)?T1(e):e}function Gs(t){const e=yi(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,r,n,i,o,a,s,u,l){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=l}}class $s{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new $s("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $s&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function to(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?C1(t)?4:J3(t)?9007199254740991:Z3(t)?10:11:te()}function en(t,e){if(t===e)return!0;const r=to(t);if(r!==to(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gs(t).isEqual(Gs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=yi(i.timestampValue),s=yi(o.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return eo(i.bytesValue).isEqual(eo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Qe(i.geoPointValue.latitude)===Qe(o.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Qe(i.integerValue)===Qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=Qe(i.doubleValue),s=Qe(o.doubleValue);return a===s?mc(a)===mc(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],en);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},s=o.mapValue.fields||{};if(Zv(a)!==Zv(s))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(s[u]===void 0||!en(a[u],s[u])))return!1;return!0}(t,e);default:return te()}}function Xs(t,e){return(t.values||[]).find(r=>en(r,e))!==void 0}function ia(t,e){if(t===e)return 0;const r=to(t),n=to(e);if(r!==n)return me(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(o,a){const s=Qe(o.integerValue||o.doubleValue),u=Qe(a.integerValue||a.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(t,e);case 3:return em(t.timestampValue,e.timestampValue);case 4:return em(Gs(t),Gs(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(o,a){const s=eo(o),u=eo(a);return s.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const s=o.split("/"),u=a.split("/");for(let l=0;l<s.length&&l<u.length;l++){const c=me(s[l],u[l]);if(c!==0)return c}return me(s.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const s=me(Qe(o.latitude),Qe(a.latitude));return s!==0?s:me(Qe(o.longitude),Qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tm(t.arrayValue,e.arrayValue);case 10:return function(o,a){var s,u,l,c;const h=o.fields||{},d=a.fields||{},p=(s=h.value)===null||s===void 0?void 0:s.arrayValue,m=(u=d.value)===null||u===void 0?void 0:u.arrayValue,w=me(((l=p==null?void 0:p.values)===null||l===void 0?void 0:l.length)||0,((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0);return w!==0?w:tm(p,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===sl.mapValue&&a===sl.mapValue)return 0;if(o===sl.mapValue)return 1;if(a===sl.mapValue)return-1;const s=o.fields||{},u=Object.keys(s),l=a.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let h=0;h<u.length&&h<c.length;++h){const d=me(u[h],c[h]);if(d!==0)return d;const p=ia(s[u[h]],l[c[h]]);if(p!==0)return p}return me(u.length,c.length)}(t.mapValue,e.mapValue);default:throw te()}}function em(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const r=yi(t),n=yi(e),i=me(r.seconds,n.seconds);return i!==0?i:me(r.nanos,n.nanos)}function tm(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const o=ia(r[i],n[i]);if(o)return o}return me(r.length,n.length)}function oa(t){return Zd(t)}function Zd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=yi(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return eo(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Q.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=Zd(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of n)o?o=!1:i+=",",i+=`${a}:${Zd(r.fields[a])}`;return i+"}"}(t.mapValue):te()}function rm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jd(t){return!!t&&"integerValue"in t}function S1(t){return!!t&&"arrayValue"in t}function nm(t){return!!t&&"nullValue"in t}function im(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function Z3(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function _s(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ao(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=_s(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=_s(t.arrayValue.values[r]);return e}return Object.assign({},t)}function J3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Pl(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=_s(r)}setAll(e){let r=Ct.emptyPath(),n={},i=[];e.forEach((a,s)=>{if(!r.isImmediateParentOf(s)){const u=this.getFieldsMap(r);this.applyChanges(u,n,i),n={},i=[],r=s.popLast()}a?n[s.lastSegment()]=_s(a):i.push(s.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());Pl(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return en(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){ao(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new nr(_s(this.value))}}function bw(t){const e=[];return ao(t.fields,(r,n)=>{const i=new Ct([r]);if(Pl(n)){const o=bw(n.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,r,n,i,o,a,s){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=a,this.documentState=s}static newInvalidDocument(e){return new jt(e,0,ne.min(),ne.min(),ne.min(),nr.empty(),0)}static newFoundDocument(e,r,n,i){return new jt(e,1,r,ne.min(),n,i,0)}static newNoDocument(e,r){return new jt(e,2,r,ne.min(),ne.min(),nr.empty(),0)}static newUnknownDocument(e,r){return new jt(e,3,r,ne.min(),ne.min(),nr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,r){this.position=e,this.inclusive=r}}function om(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?n=Q.comparator(Q.fromName(a.referenceValue),r.key):n=ia(a,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function am(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!en(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,r="asc"){this.field=e,this.dir=r}}function e4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{}class tt extends Dw{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new r4(e,r,n):r==="array-contains"?new o4(e,n):r==="in"?new a4(e,n):r==="not-in"?new s4(e,n):r==="array-contains-any"?new u4(e,n):new tt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new n4(e,n):new i4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(ia(r,this.value)):r!==null&&to(this.value)===to(r)&&this.matchesComparison(ia(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends Dw{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new jr(e,r)}matches(e){return kw(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kw(t){return t.op==="and"}function Mw(t){return t4(t)&&kw(t)}function t4(t){for(const e of t.filters)if(e instanceof jr)return!1;return!0}function e0(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+oa(t.value);if(Mw(t))return t.filters.map(e=>e0(e)).join(",");{const e=t.filters.map(r=>e0(r)).join(",");return`${t.op}(${e})`}}function Lw(t,e){return t instanceof tt?function(n,i){return i instanceof tt&&n.op===i.op&&n.field.isEqual(i.field)&&en(n.value,i.value)}(t,e):t instanceof jr?function(n,i){return i instanceof jr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,a,s)=>o&&Lw(a,i.filters[s]),!0):!1}(t,e):void te()}function Fw(t){return t instanceof tt?function(r){return`${r.field.canonicalString()} ${r.op} ${oa(r.value)}`}(t):t instanceof jr?function(r){return r.op.toString()+" {"+r.getFilters().map(Fw).join(" ,")+"}"}(t):"Filter"}class r4 extends tt{constructor(e,r,n){super(e,r,n),this.key=Q.fromName(n.referenceValue)}matches(e){const r=Q.comparator(e.key,this.key);return this.matchesComparison(r)}}class n4 extends tt{constructor(e,r){super(e,"in",r),this.keys=Bw("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class i4 extends tt{constructor(e,r){super(e,"not-in",r),this.keys=Bw("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Bw(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Q.fromName(n.referenceValue))}class o4 extends tt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return S1(r)&&Xs(r.arrayValue,this.value)}}class a4 extends tt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Xs(this.value.arrayValue,r)}}class s4 extends tt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Xs(this.value.arrayValue,r)}}class u4 extends tt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!S1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Xs(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,r=null,n=[],i=[],o=null,a=null,s=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.ue=null}}function sm(t,e=null,r=[],n=[],i=null,o=null,a=null){return new l4(t,e,r,n,i,o,a)}function R1(t){const e=ie(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>e0(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),rf(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>oa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>oa(n)).join(",")),e.ue=r}return e.ue}function P1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!e4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Lw(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!am(t.startAt,e.startAt)&&am(t.endAt,e.endAt)}function t0(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,r=null,n=[],i=[],o=null,a="F",s=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function c4(t,e,r,n,i,o,a,s){return new ya(t,e,r,n,i,o,a,s)}function nf(t){return new ya(t)}function um(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vw(t){return t.collectionGroup!==null}function ws(t){const e=ie(t);if(e.ce===null){e.ce=[];const r=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let s=new Rt(Ct.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(s=s.add(l.field))})}),s})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ks(o,n))}),r.has(Ct.keyField().canonicalString())||e.ce.push(new Ks(Ct.keyField(),n))}return e.ce}function Yr(t){const e=ie(t);return e.le||(e.le=f4(e,ws(t))),e.le}function f4(t,e){if(t.limitType==="F")return sm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ks(i.field,o)});const r=t.endAt?new yc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new yc(t.startAt.position,t.startAt.inclusive):null;return sm(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function r0(t,e){const r=t.filters.concat([e]);return new ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function n0(t,e,r){return new ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function of(t,e){return P1(Yr(t),Yr(e))&&t.limitType===e.limitType}function Uw(t){return`${R1(Yr(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>Fw(i)).join(", ")}]`),rf(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>oa(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>oa(i)).join(",")),`Target(${n})`}(Yr(t))}; limitType=${t.limitType})`}function af(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):Q.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of ws(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,s,u){const l=om(a,s,u);return a.inclusive?l<=0:l<0}(n.startAt,ws(n),i)||n.endAt&&!function(a,s,u){const l=om(a,s,u);return a.inclusive?l>=0:l>0}(n.endAt,ws(n),i))}(t,e)}function h4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jw(t){return(e,r)=>{let n=!1;for(const i of ws(t)){const o=d4(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function d4(t,e,r){const n=t.field.isKeyField()?Q.comparator(e.key,r.key):function(o,a,s){const u=a.data.field(o),l=s.data.field(o);return u!==null&&l!==null?ia(u,l):te()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return Nw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=new Ge(Q.comparator);function Sn(){return p4}const zw=new Ge(Q.comparator);function is(...t){let e=zw;for(const r of t)e=e.insert(r.key,r);return e}function Hw(t){let e=zw;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ji(){return xs()}function Ww(){return xs()}function xs(){return new _a(t=>t.toString(),(t,e)=>t.isEqual(e))}const g4=new Ge(Q.comparator),v4=new Rt(Q.comparator);function le(...t){let e=v4;for(const r of t)e=e.add(r);return e}const m4=new Rt(me);function y4(){return m4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function Gw(t){return{integerValue:""+t}}function _4(t,e){return q3(e)?Gw(e):N1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this._=void 0}}function w4(t,e,r){return t instanceof qs?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&C1(o)&&(o=T1(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(r,e):t instanceof Ys?Xw(t,e):t instanceof Qs?Kw(t,e):function(i,o){const a=$w(i,o),s=lm(a)+lm(i.Pe);return Jd(a)&&Jd(i.Pe)?Gw(s):N1(i.serializer,s)}(t,e)}function x4(t,e,r){return t instanceof Ys?Xw(t,e):t instanceof Qs?Kw(t,e):r}function $w(t,e){return t instanceof _c?function(n){return Jd(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class qs extends sf{}class Ys extends sf{constructor(e){super(),this.elements=e}}function Xw(t,e){const r=qw(e);for(const n of t.elements)r.some(i=>en(i,n))||r.push(n);return{arrayValue:{values:r}}}class Qs extends sf{constructor(e){super(),this.elements=e}}function Kw(t,e){let r=qw(e);for(const n of t.elements)r=r.filter(i=>!en(i,n));return{arrayValue:{values:r}}}class _c extends sf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function lm(t){return Qe(t.integerValue||t.doubleValue)}function qw(t){return S1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,r){this.field=e,this.transform=r}}function A4(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Ys&&i instanceof Ys||n instanceof Qs&&i instanceof Qs?na(n.elements,i.elements,en):n instanceof _c&&i instanceof _c?en(n.Pe,i.Pe):n instanceof qs&&i instanceof qs}(t.transform,e.transform)}class I4{constructor(e,r){this.version=e,this.transformResults=r}}class Tr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uf{}function Yw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new O1(t.key,Tr.none()):new fu(t.key,t.data,Tr.none());{const r=t.data,n=nr.empty();let i=new Rt(Ct.comparator);for(let o of e.fields)if(!i.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?n.delete(o):n.set(o,a),i=i.add(o)}return new Ii(t.key,n,new gr(i.toArray()),Tr.none())}}function C4(t,e,r){t instanceof fu?function(i,o,a){const s=i.value.clone(),u=fm(i.fieldTransforms,o,a.transformResults);s.setAll(u),o.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,r):t instanceof Ii?function(i,o,a){if(!Nl(i.precondition,o))return void o.convertToUnknownDocument(a.version);const s=fm(i.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(Qw(i)),u.setAll(s),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Es(t,e,r,n){return t instanceof fu?function(o,a,s,u){if(!Nl(o.precondition,a))return s;const l=o.value.clone(),c=hm(o.fieldTransforms,u,a);return l.setAll(c),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ii?function(o,a,s,u){if(!Nl(o.precondition,a))return s;const l=hm(o.fieldTransforms,u,a),c=a.data;return c.setAll(Qw(o)),c.setAll(l),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),s===null?null:s.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(o,a,s){return Nl(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,r)}function T4(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=$w(n.transform,i||null);o!=null&&(r===null&&(r=nr.empty()),r.set(n.field,o))}return r||null}function cm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&na(n,i,(o,a)=>A4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fu extends uf{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ii extends uf{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Qw(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function fm(t,e,r){const n=new Map;Ie(t.length===r.length);for(let i=0;i<r.length;i++){const o=t[i],a=o.transform,s=e.data.field(o.field);n.set(o.field,x4(a,s,r[i]))}return n}function hm(t,e,r){const n=new Map;for(const i of t){const o=i.transform,a=r.data.field(i.field);n.set(i.field,w4(o,a,e))}return n}class O1 extends uf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S4 extends uf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&C4(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Es(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Es(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Ww();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let s=this.applyToLocalView(a,o.mutatedFields);s=r.has(i.key)?null:s;const u=Yw(a,s);u!==null&&n.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ne.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),le())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(r,n)=>cm(r,n))&&na(this.baseMutations,e.baseMutations,(r,n)=>cm(r,n))}}class b1{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Ie(e.mutations.length===n.length);let i=function(){return g4}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new b1(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,fe;function O4(t){switch(t){default:return te();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function Zw(t){if(t===void 0)return Tn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Je.OK:return j.OK;case Je.CANCELLED:return j.CANCELLED;case Je.UNKNOWN:return j.UNKNOWN;case Je.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Je.INTERNAL:return j.INTERNAL;case Je.UNAVAILABLE:return j.UNAVAILABLE;case Je.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Je.NOT_FOUND:return j.NOT_FOUND;case Je.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Je.ABORTED:return j.ABORTED;case Je.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Je.DATA_LOSS:return j.DATA_LOSS;default:return te()}}(fe=Je||(Je={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new Gi([4294967295,4294967295],0);function dm(t){const e=b4().encode(t),r=new Ew;return r.update(e),new Uint8Array(r.digest())}function pm(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Gi([r,n],0),new Gi([i,o],0)]}class D1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new os(`Invalid padding: ${r}`);if(n<0)throw new os(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new os(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new os(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Gi.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Gi.fromNumber(n)));return i.compare(D4)===1&&(i=new Gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=dm(e),[n,i]=pm(r);for(let o=0;o<this.hashCount;o++){const a=this.Ee(n,i,o);if(!this.de(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new D1(o,i,r);return n.forEach(s=>a.insert(s)),a}insert(e){if(this.Ie===0)return;const r=dm(e),[n,i]=pm(r);for(let o=0;o<this.hashCount;o++){const a=this.Ee(n,i,o);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class os extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new lf(ne.min(),i,new Ge(me),Sn(),le())}}class hu{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new hu(n,r,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class Jw{constructor(e,r){this.targetId=e,this.me=r}}class ex{constructor(e,r,n=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class gm{constructor(){this.fe=0,this.ge=mm(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),r=le(),n=le();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:te()}}),new hu(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=mm()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class k4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sn(),this.qe=vm(),this.Qe=new Ge(me)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:te()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const o=i.target;if(t0(o))if(n===0){const a=new Q(o.path);this.Ue(r,a,jt.newNoDocument(a,ne.min()))}else Ie(n===1);else{const a=this.Ye(r);if(a!==n){const s=this.Ze(e),u=s?this.Xe(s,e,a):1;if(u!==0){this.je(r);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,l)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let a,s;try{a=eo(n).toUint8Array()}catch(u){if(u instanceof Ow)return ra("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{s=new D1(a,i,o)}catch(u){return ra(u instanceof os?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return s.Ie===0?null:s}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const a=this.Le.tt(),s=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(s)||(this.Ue(r,o,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((o,a)=>{const s=this.Je(a);if(s){if(o.current&&t0(s.target)){const u=new Q(s.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,jt.newNoDocument(u,e))}o.be&&(r.set(a,o.ve()),o.Ce())}});let n=le();this.qe.forEach((o,a)=>{let s=!0;a.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(n=n.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new lf(e,r,this.Qe,this.ke,n);return this.ke=Sn(),this.qe=vm(),this.Qe=new Ge(me),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new gm,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Rt(me),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||q("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gm),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function vm(){return new Ge(Q.comparator)}function mm(){return new Ge(Q.comparator)}const M4=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),L4=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),F4=(()=>({and:"AND",or:"OR"}))();class B4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function i0(t,e){return t.useProto3Json||rf(e)?e:{value:e}}function wc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function V4(t,e){return wc(t,e.toTimestamp())}function Qr(t){return Ie(!!t),ne.fromTimestamp(function(r){const n=yi(r);return new ft(n.seconds,n.nanos)}(t))}function k1(t,e){return o0(t,e).canonicalString()}function o0(t,e){const r=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function rx(t){const e=Le.fromString(t);return Ie(sx(e)),e}function a0(t,e){return k1(t.databaseId,e.path)}function Dh(t,e){const r=rx(e);if(r.get(1)!==t.databaseId.projectId)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Q(ix(r))}function nx(t,e){return k1(t.databaseId,e)}function U4(t){const e=rx(t);return e.length===4?Le.emptyPath():ix(e)}function s0(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ix(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ym(t,e,r){return{name:a0(t,e),fields:r.value.mapValue.fields}}function j4(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(Ie(c===void 0||typeof c=="string"),Nt.fromBase64String(c||"")):(Ie(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Nt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(l){const c=l.code===void 0?j.UNKNOWN:Zw(l.code);return new X(c,l.message||"")}(a);r=new ex(n,i,o,s||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Dh(t,n.document.name),o=Qr(n.document.updateTime),a=n.document.createTime?Qr(n.document.createTime):ne.min(),s=new nr({mapValue:{fields:n.document.fields}}),u=jt.newFoundDocument(i,o,a,s),l=n.targetIds||[],c=n.removedTargetIds||[];r=new Ol(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Dh(t,n.document),o=n.readTime?Qr(n.readTime):ne.min(),a=jt.newNoDocument(i,o),s=n.removedTargetIds||[];r=new Ol([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Dh(t,n.document),o=n.removedTargetIds||[];r=new Ol([],o,i,null)}else{if(!("filter"in e))return te();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,a=new N4(i,o),s=n.targetId;r=new Jw(s,a)}}return r}function z4(t,e){let r;if(e instanceof fu)r={update:ym(t,e.key,e.value)};else if(e instanceof O1)r={delete:a0(t,e.key)};else if(e instanceof Ii)r={update:ym(t,e.key,e.data),updateMask:Q4(e.fieldMask)};else{if(!(e instanceof S4))return te();r={verify:a0(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,a){const s=a.transform;if(s instanceof qs)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Ys)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Qs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof _c)return{fieldPath:a.field.canonicalString(),increment:s.Pe};throw te()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:V4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:te()}(t,e.precondition)),r}function H4(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(r=>function(i,o){let a=i.updateTime?Qr(i.updateTime):Qr(o);return a.isEqual(ne.min())&&(a=Qr(o)),new I4(a,i.transformResults||[])}(r,e))):[]}function W4(t,e){return{documents:[nx(t,e.path)]}}function G4(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=nx(t,i);const o=function(l){if(l.length!==0)return ax(jr.create(l,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:yo(d.field),direction:K4(d.dir)}}(c))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const s=i0(t,e.limit);return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:r,parent:i}}function $4(t){let e=U4(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Ie(n===1);const c=r.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let o=[];r.where&&(o=function(h){const d=ox(h);return d instanceof jr&&Mw(d)?d.getFilters():[d]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(d=>function(m){return new Ks(_o(m.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(r.orderBy));let s=null;r.limit&&(s=function(h){let d;return d=typeof h=="object"?h.value:h,rf(d)?null:d}(r.limit));let u=null;r.startAt&&(u=function(h){const d=!!h.before,p=h.values||[];return new yc(p,d)}(r.startAt));let l=null;return r.endAt&&(l=function(h){const d=!h.before,p=h.values||[];return new yc(p,d)}(r.endAt)),c4(e,i,a,o,s,"F",u,l)}function X4(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function ox(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=_o(r.unaryFilter.field);return tt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=_o(r.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_o(r.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_o(r.unaryFilter.field);return tt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(r){return tt.create(_o(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return jr.create(r.compositeFilter.filters.map(n=>ox(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(r.compositeFilter.op))}(t):te()}function K4(t){return M4[t]}function q4(t){return L4[t]}function Y4(t){return F4[t]}function yo(t){return{fieldPath:t.canonicalString()}}function _o(t){return Ct.fromServerFormat(t.fieldPath)}function ax(t){return t instanceof tt?function(r){if(r.op==="=="){if(im(r.value))return{unaryFilter:{field:yo(r.field),op:"IS_NAN"}};if(nm(r.value))return{unaryFilter:{field:yo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(im(r.value))return{unaryFilter:{field:yo(r.field),op:"IS_NOT_NAN"}};if(nm(r.value))return{unaryFilter:{field:yo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(r.field),op:q4(r.op),value:r.value}}}(t):t instanceof jr?function(r){const n=r.getFilters().map(i=>ax(i));return n.length===1?n[0]:{compositeFilter:{op:Y4(r.op),filters:n}}}(t):te()}function Q4(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function sx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,r,n,i,o=ne.min(),a=ne.min(),s=Nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=u}withSequenceNumber(e){return new Zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.ct=e}}function J4(t){const e=$4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?n0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(){this.un=new t8}addToCollectionParentIndex(e,r){return this.un.add(r),z.resolve()}getCollectionParents(e,r){return z.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return z.resolve()}deleteFieldIndex(e,r){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,r){return z.resolve()}getDocumentsMatchingTarget(e,r){return z.resolve(null)}getIndexType(e,r){return z.resolve(0)}getFieldIndexes(e,r){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,r){return z.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,r){return z.resolve(mi.min())}updateCollectionGroup(e,r,n){return z.resolve()}updateIndexEntries(e,r){return z.resolve()}}class t8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Rt(Le.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Rt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new aa(0)}static kn(){return new aa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this.changes=new _a(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?z.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Es(n.mutation,i,gr.empty(),ft.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,le()).next(()=>n))}getLocalViewOfDocuments(e,r,n=le()){const i=ji();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let a=is();return o.forEach((s,u)=>{a=a.insert(s,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=ji();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,le()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,s)=>{r.set(a,s)})})}computeViews(e,r,n,i){let o=Sn();const a=xs(),s=function(){return xs()}();return r.forEach((u,l)=>{const c=n.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Ii)?o=o.insert(l.key,l):c!==void 0?(a.set(l.key,c.mutation.getFieldMask()),Es(c.mutation,l,c.mutation.getFieldMask(),ft.now())):a.set(l.key,gr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,c)=>a.set(l,c)),r.forEach((l,c)=>{var h;return s.set(l,new n8(c,(h=a.get(l))!==null&&h!==void 0?h:null))}),s))}recalculateAndSaveOverlays(e,r){const n=xs();let i=new Ge((a,s)=>a-s),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const s of a)s.keys().forEach(u=>{const l=r.get(u);if(l===null)return;let c=n.get(u)||gr.empty();c=s.applyToLocalView(l,c),n.set(u,c);const h=(i.get(s.batchId)||le()).add(u);i=i.insert(s.batchId,h)})}).next(()=>{const a=[],s=i.getReverseIterator();for(;s.hasNext();){const u=s.getNext(),l=u.key,c=u.value,h=Ww();c.forEach(d=>{if(!o.has(d)){const p=Yw(r.get(d),n.get(d));p!==null&&h.set(d,p),o=o.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,l,h))}return z.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Vw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):z.resolve(ji());let s=-1,u=o;return a.next(l=>z.forEach(l,(c,h)=>(s<h.largestBatchId&&(s=h.largestBatchId),o.get(c)?z.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(c=>({batchId:s,changes:Hw(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Q(r)).next(n=>{let i=is();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let a=is();return this.indexManager.getCollectionParents(e,o).next(s=>z.forEach(s,u=>{const l=function(h,d){return new ya(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,n,i).next(c=>{c.forEach((h,d)=>{a=a.insert(h,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(a=>{o.forEach((u,l)=>{const c=l.getKey();a.get(c)===null&&(a=a.insert(c,jt.newInvalidDocument(c)))});let s=is();return a.forEach((u,l)=>{const c=o.get(u);c!==void 0&&Es(c.mutation,l,gr.empty(),ft.now()),af(r,l)&&(s=s.insert(u,l))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return z.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Qr(i.createTime)}}(r)),z.resolve()}getNamedQuery(e,r){return z.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:J4(i.bundledQuery),readTime:Qr(i.readTime)}}(r)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this.overlays=new Ge(Q.comparator),this.Ir=new Map}getOverlay(e,r){return z.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ji();return z.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.ht(e,r,o)}),z.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(n)),z.resolve()}getOverlaysForCollection(e,r,n){const i=ji(),o=r.length+1,a=new Q(r.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const u=s.getNext().value,l=u.getKey();if(!r.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>n&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new Ge((l,c)=>l-c);const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===r&&l.largestBatchId>n){let c=o.get(l.largestBatchId);c===null&&(c=ji(),o=o.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const s=ji(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>s.set(l,c)),!(s.size()>=i)););return z.resolve(s)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new P4(r,n));let o=this.Ir.get(r);o===void 0&&(o=le(),this.Ir.set(r,o)),this.Ir.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.Tr=new Rt(gt.Er),this.dr=new Rt(gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new gt(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new gt(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Q(new Le([])),n=new gt(r,e),i=new gt(r,e+1),o=[];return this.dr.forEachInRange([n,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Q(new Le([])),n=new gt(r,e),i=new gt(r,e+1);let o=le();return this.dr.forEachInRange([n,i],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new gt(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class gt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Q.comparator(e.key,r.key)||me(e.wr,r.wr)}static Ar(e,r){return me(e.wr,r.wr)||Q.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Rt(gt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new R4(o,r,n,i);this.mutationQueue.push(a);for(const s of i)this.br=this.br.add(new gt(s.key,o)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,r){return z.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new gt(r,0),i=new gt(r,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([n,i],a=>{const s=this.Dr(a.wr);o.push(s)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Rt(me);return r.forEach(i=>{const o=new gt(i,0),a=new gt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],s=>{n=n.add(s.wr)})}),z.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;Q.isDocumentKey(o)||(o=o.child(""));const a=new gt(new Q(o),0);let s=new Rt(me);return this.br.forEachWhile(u=>{const l=u.key.path;return!!n.isPrefixOf(l)&&(l.length===i&&(s=s.add(u.wr)),!0)},a),z.resolve(this.Cr(s))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Ie(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return z.forEach(r.mutations,i=>{const o=new gt(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new gt(r,0),i=this.br.firstAfterOrEqual(n);return z.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.Mr=e,this.docs=function(){return new Ge(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return z.resolve(n?n.document.mutableCopy():jt.newInvalidDocument(r))}getEntries(e,r){let n=Sn();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():jt.newInvalidDocument(i))}),z.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=Sn();const a=r.path,s=new Q(a.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||G3(W3(c),n)<=0||(i.has(c.key)||af(r,c))&&(o=o.insert(c.key,c.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,r,n,i){te()}Or(e,r){return z.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new c8(this)}getSize(e){return z.resolve(this.size)}}class c8 extends r8{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),z.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.persistence=e,this.Nr=new _a(r=>R1(r),P1),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new M1,this.targetCount=0,this.kr=aa.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),z.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new aa(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,z.resolve()}updateTargetData(e,r){return this.Kn(r),z.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.Nr.forEach((a,s)=>{s.sequenceNumber<=r&&n.get(s.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return z.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),z.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),z.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return z.resolve(n)}containsKey(e,r){return z.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,r){this.qr={},this.overlays={},this.Qr=new I1(0),this.Kr=!1,this.Kr=!0,this.$r=new s8,this.referenceDelegate=e(this),this.Ur=new f8(this),this.indexManager=new e8,this.remoteDocumentCache=function(i){return new l8(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new Z4(r),this.Gr=new o8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new a8,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new u8(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){q("MemoryPersistence","Starting transaction:",e);const i=new d8(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,r){return z.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class d8 extends X3{constructor(e){super(),this.currentSequenceNumber=e}}class L1{constructor(e){this.persistence=e,this.Jr=new M1,this.Yr=null}static Zr(e){return new L1(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),z.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),z.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),z.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,n=>{const i=Q.fromPath(n);return this.ei(e,i).next(o=>{o||r.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return z.or([()=>z.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=le(),i=le();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new F1(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gS()?8:K3(Wt())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.Yi(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,r,i,n).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new p8;return this.Xi(e,r,a).next(s=>{if(o.result=s,this.zi)return this.es(e,r,a,s.size)})}).next(()=>o.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(Xa()<=ce.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",mo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Xa()<=ce.DEBUG&&q("QueryEngine","Query:",mo(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Xa()<=ce.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",mo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(r))):z.resolve())}Yi(e,r){if(um(r))return z.resolve(null);let n=Yr(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=n0(r,null,"F"),n=Yr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const a=le(...o);return this.Ji.getDocuments(e,a).next(s=>this.indexManager.getMinOffset(e,n).next(u=>{const l=this.ts(r,s);return this.ns(r,l,a,u.readTime)?this.Yi(e,n0(r,null,"F")):this.rs(e,l,r,u)}))})))}Zi(e,r,n,i){return um(r)||i.isEqual(ne.min())?z.resolve(null):this.Ji.getDocuments(e,n).next(o=>{const a=this.ts(r,o);return this.ns(r,a,n,i)?z.resolve(null):(Xa()<=ce.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mo(r)),this.rs(e,a,r,H3(i,-1)).next(s=>s))})}ts(e,r){let n=new Rt(jw(e));return r.forEach((i,o)=>{af(e,o)&&(n=n.add(o))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,r,n){return Xa()<=ce.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",mo(r)),this.Ji.getDocumentsMatchingQuery(e,r,mi.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new Ge(me),this._s=new _a(o=>R1(o),P1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i8(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function m8(t,e,r,n){return new v8(t,e,r,n)}async function ux(t,e){const r=ie(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const a=[],s=[];let u=le();for(const l of i){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of o){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return r.localDocuments.getDocuments(n,u).next(l=>({hs:l,removedBatchIds:a,addedBatchIds:s}))})})}function y8(t,e){const r=ie(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.cs.newChangeBuffer({trackRemovals:!0});return function(s,u,l,c){const h=l.batch,d=h.keys();let p=z.resolve();return d.forEach(m=>{p=p.next(()=>c.getEntry(u,m)).next(w=>{const x=l.docVersions.get(m);Ie(x!==null),w.version.compareTo(x)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),c.addEntry(w)))})}),p.next(()=>s.mutationQueue.removeMutationBatch(u,h))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(s){let u=le();for(let l=0;l<s.mutationResults.length;++l)s.mutationResults[l].transformResults.length>0&&(u=u.add(s.batch.mutations[l].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function lx(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function _8(t,e){const r=ie(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const s=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;s.push(r.Ur.removeMatchingKeys(o,c.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(o,c.addedDocuments,h)));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Nt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,n)),i=i.insert(h,p),function(w,x,v){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,p,c)&&s.push(r.Ur.updateTargetData(o,p))});let u=Sn(),l=le();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&s.push(r.persistence.referenceDelegate.updateLimboDocument(o,c))}),s.push(w8(o,a,e.documentUpdates).next(c=>{u=c.Ps,l=c.Is})),!n.isEqual(ne.min())){const c=r.Ur.getLastRemoteSnapshotVersion(o).next(h=>r.Ur.setTargetsMetadata(o,o.currentSequenceNumber,n));s.push(c)}return z.waitFor(s).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(r.os=i,o))}function w8(t,e,r){let n=le(),i=le();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let a=Sn();return r.forEach((s,u)=>{const l=o.get(s);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(s)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(s,u.readTime),a=a.insert(s,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),a=a.insert(s,u)):q("LocalStore","Ignoring outdated watch update for ",s,". Current version:",l.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function x8(t,e){const r=ie(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function E8(t,e){const r=ie(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(o=>o?(i=o,z.resolve(i)):r.Ur.allocateTargetId(n).next(a=>(i=new Zn(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function u0(t,e,r){const n=ie(t),i=n.os.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!cu(a))throw a;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function _m(t,e,r){const n=ie(t);let i=ne.min(),o=le();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,l,c){const h=ie(u),d=h._s.get(c);return d!==void 0?z.resolve(h.os.get(d)):h.Ur.getTargetData(l,c)}(n,a,Yr(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,s.targetId).next(u=>{o=u})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?i:ne.min(),r?o:le())).next(s=>(A8(n,h4(e),s),{documents:s,Ts:o})))}function A8(t,e,r){let n=t.us.get(e)||ne.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.us.set(e,n)}class wm{constructor(){this.activeTargetIds=y4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I8{constructor(){this.so=new wm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wm,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul=null;function kh(){return ul===null?ul=function(){return 268435456+Math.round(2147483648*Math.random())}():ul++,"0x"+ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class R8 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(r,n,i,o,a){const s=kh(),u=this.xo(r,n.toUriEncodedString());q("RestConnection",`Sending RPC '${r}' ${s}:`,u,i);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,a),this.No(r,u,l,i).then(c=>(q("RestConnection",`Received RPC '${r}' ${s}: `,c),c),c=>{throw ra("RestConnection",`RPC '${r}' ${s} failed with error: `,c,"url: ",u,"request:",i),c})}Lo(r,n,i,o,a,s){return this.Mo(r,n,i,o,a)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,a)=>r[a]=o),i&&i.headers.forEach((o,a)=>r[a]=o)}xo(r,n){const i=T8[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const o=kh();return new Promise((a,s)=>{const u=new Aw;u.setWithCredentials(!0),u.listenOnce(Iw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rl.NO_ERROR:const c=u.getResponseJson();q(Ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(c)),a(c);break;case Rl.TIMEOUT:q(Ft,`RPC '${e}' ${o} timed out`),s(new X(j.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const h=u.getStatus();if(q(Ft,`RPC '${e}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(p.status);s(new X(m,p.message))}else s(new X(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else s(new X(j.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{q(Ft,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);q(Ft,`RPC '${e}' ${o} sending request:`,i),u.send(r,"POST",l,n,15)})}Bo(e,r,n){const i=kh(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Sw(),s=Tw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const c=o.join("");q(Ft,`Creating RPC '${e}' stream ${i}: ${c}`,u);const h=a.createWebChannel(c,u);let d=!1,p=!1;const m=new S8({Io:x=>{p?q(Ft,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(d||(q(Ft,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),q(Ft,`RPC '${e}' stream ${i} sending:`,x),h.send(x))},To:()=>h.close()}),w=(x,v,y)=>{x.listen(v,E=>{try{y(E)}catch(I){setTimeout(()=>{throw I},0)}})};return w(h,ns.EventType.OPEN,()=>{p||(q(Ft,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),w(h,ns.EventType.CLOSE,()=>{p||(p=!0,q(Ft,`RPC '${e}' stream ${i} transport closed`),m.So())}),w(h,ns.EventType.ERROR,x=>{p||(p=!0,ra(Ft,`RPC '${e}' stream ${i} transport errored:`,x),m.So(new X(j.UNAVAILABLE,"The operation could not be completed")))}),w(h,ns.EventType.MESSAGE,x=>{var v;if(!p){const y=x.data[0];Ie(!!y);const E=y,I=E.error||((v=E[0])===null||v===void 0?void 0:v.error);if(I){q(Ft,`RPC '${e}' stream ${i} received error:`,I);const b=I.status;let D=function(R){const N=Je[R];if(N!==void 0)return Zw(N)}(b),C=I.message;D===void 0&&(D=j.INTERNAL,C="Unknown error status: "+b+" with message "+I.message),p=!0,m.So(new X(D,C)),h.close()}else q(Ft,`RPC '${e}' stream ${i} received:`,y),m.bo(y)}}),w(s,Cw.STAT_EVENT,x=>{x.stat===Qd.PROXY?q(Ft,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Qd.NOPROXY&&q(Ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function Mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t){return new B4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,r,n=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,r,n,i,o,a,s,u){this.ui=e,this.Ho=n,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cx(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===j.RESOURCE_EXHAUSTED?(Tn(r.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new X(j.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P8 extends fx{constructor(e,r,n,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=o}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=j4(this.serializer,e),n=function(o){if(!("targetChange"in o))return ne.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ne.min():a.readTime?Qr(a.readTime):ne.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=s0(this.serializer),r.addTarget=function(o,a){let s;const u=a.target;if(s=t0(u)?{documents:W4(o,u)}:{query:G4(o,u)._t},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){s.resumeToken=tx(o,a.resumeToken);const l=i0(o,a.expectedCount);l!==null&&(s.expectedCount=l)}else if(a.snapshotVersion.compareTo(ne.min())>0){s.readTime=wc(o,a.snapshotVersion.toTimestamp());const l=i0(o,a.expectedCount);l!==null&&(s.expectedCount=l)}return s}(this.serializer,e);const n=X4(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=s0(this.serializer),r.removeTarget=e,this.a_(r)}}class N8 extends fx{constructor(e,r,n,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=H4(e.writeResults,e.commitTime),n=Qr(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=s0(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>z4(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8 extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,o0(r,n),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(j.UNKNOWN,o.toString())})}Lo(e,r,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Lo(e,o0(r,n),i,a,s,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(j.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class b8{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tn(r),this.D_=!1):q("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{n.enqueueAndForget(async()=>{so(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=ie(u);l.L_.add(4),await du(l),l.q_.set("Unknown"),l.L_.delete(4),await ff(l)}(this))})}),this.q_=new b8(n,i)}}async function ff(t){if(so(t))for(const e of t.B_)await e(!0)}async function du(t){for(const e of t.B_)await e(!1)}function hx(t,e){const r=ie(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),j1(r)?U1(r):wa(r).r_()&&V1(r,e))}function B1(t,e){const r=ie(t),n=wa(r);r.N_.delete(e),n.r_()&&dx(r,e),r.N_.size===0&&(n.r_()?n.o_():so(r)&&r.q_.set("Unknown"))}function V1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}wa(t).A_(e)}function dx(t,e){t.Q_.xe(e),wa(t).R_(e)}function U1(t){t.Q_=new k4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wa(t).start(),t.q_.v_()}function j1(t){return so(t)&&!wa(t).n_()&&t.N_.size>0}function so(t){return ie(t).L_.size===0}function px(t){t.Q_=void 0}async function k8(t){t.q_.set("Online")}async function M8(t){t.N_.forEach((e,r)=>{V1(t,e)})}async function L8(t,e){px(t),j1(t)?(t.q_.M_(e),U1(t)):t.q_.set("Unknown")}async function F8(t,e,r){if(t.q_.set("Online"),e instanceof ex&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const s of o.targetIds)i.N_.has(s)&&(await i.remoteSyncer.rejectListen(s,a),i.N_.delete(s),i.Q_.removeTarget(s))}(t,e)}catch(n){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await xc(t,n)}else if(e instanceof Ol?t.Q_.Ke(e):e instanceof Jw?t.Q_.He(e):t.Q_.We(e),!r.isEqual(ne.min()))try{const n=await lx(t.localStore);r.compareTo(n)>=0&&await function(o,a){const s=o.Q_.rt(a);return s.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=o.N_.get(l);c&&o.N_.set(l,c.withResumeToken(u.resumeToken,a))}}),s.targetMismatches.forEach((u,l)=>{const c=o.N_.get(u);if(!c)return;o.N_.set(u,c.withResumeToken(Nt.EMPTY_BYTE_STRING,c.snapshotVersion)),dx(o,u);const h=new Zn(c.target,u,l,c.sequenceNumber);V1(o,h)}),o.remoteSyncer.applyRemoteEvent(s)}(t,r)}catch(n){q("RemoteStore","Failed to raise snapshot:",n),await xc(t,n)}}async function xc(t,e,r){if(!cu(e))throw e;t.L_.add(1),await du(t),t.q_.set("Offline"),r||(r=()=>lx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await ff(t)})}function gx(t,e){return e().catch(r=>xc(t,r,e))}async function hf(t){const e=ie(t),r=_i(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;B8(e);)try{const i=await x8(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,V8(e,i)}catch(i){await xc(e,i)}vx(e)&&mx(e)}function B8(t){return so(t)&&t.O_.length<10}function V8(t,e){t.O_.push(e);const r=_i(t);r.r_()&&r.V_&&r.m_(e.mutations)}function vx(t){return so(t)&&!_i(t).n_()&&t.O_.length>0}function mx(t){_i(t).start()}async function U8(t){_i(t).p_()}async function j8(t){const e=_i(t);for(const r of t.O_)e.m_(r.mutations)}async function z8(t,e,r){const n=t.O_.shift(),i=b1.from(n,e,r);await gx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hf(t)}async function H8(t,e){e&&_i(t).V_&&await async function(n,i){if(function(a){return O4(a)&&a!==j.ABORTED}(i.code)){const o=n.O_.shift();_i(n).s_(),await gx(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await hf(n)}}(t,e),vx(t)&&mx(t)}async function Em(t,e){const r=ie(t);r.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const n=so(r);r.L_.add(3),await du(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await ff(r)}async function W8(t,e){const r=ie(t);e?(r.L_.delete(2),await ff(r)):e||(r.L_.add(2),await du(r),r.q_.set("Unknown"))}function wa(t){return t.K_||(t.K_=function(r,n,i){const o=ie(r);return o.w_(),new P8(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:k8.bind(null,t),Ro:M8.bind(null,t),mo:L8.bind(null,t),d_:F8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),j1(t)?U1(t):t.q_.set("Unknown")):(await t.K_.stop(),px(t))})),t.K_}function _i(t){return t.U_||(t.U_=function(r,n,i){const o=ie(r);return o.w_(),new N8(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:U8.bind(null,t),mo:H8.bind(null,t),f_:j8.bind(null,t),g_:z8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hf(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const a=Date.now()+n,s=new z1(e,r,a,i,o);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H1(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),cu(t))return new X(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Q.comparator(r.key,n.key):(r,n)=>Q.comparator(r.key,n.key),this.keyedMap=is(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new Ho(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ho;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this.W_=new Ge(Q.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class sa{constructor(e,r,n,i,o,a,s,u,l){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,r,n,i,o){const a=[];return r.forEach(s=>{a.push({type:0,doc:s})}),new sa(e,r,Ho.emptySet(r),a,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $8{constructor(){this.queries=Im(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=ie(r),o=i.queries;i.queries=Im(),o.forEach((a,s)=>{for(const u of s.j_)u.onError(n)})})(this,new X(j.ABORTED,"Firestore shutting down"))}}function Im(){return new _a(t=>Uw(t),of)}async function W1(t,e){const r=ie(t);let n=3;const i=e.query;let o=r.queries.get(i);o?!o.H_()&&e.J_()&&(n=2):(o=new G8,n=e.J_()?0:1);try{switch(n){case 0:o.z_=await r.onListen(i,!0);break;case 1:o.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const s=H1(a,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(s)}r.queries.set(i,o),o.j_.push(e),e.Z_(r.onlineState),o.z_&&e.X_(o.z_)&&$1(r)}async function G1(t,e){const r=ie(t),n=e.query;let i=3;const o=r.queries.get(n);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function X8(t,e){const r=ie(t);let n=!1;for(const i of e){const o=i.query,a=r.queries.get(o);if(a){for(const s of a.j_)s.X_(i)&&(n=!0);a.z_=i}}n&&$1(r)}function K8(t,e,r){const n=ie(t),i=n.queries.get(e);if(i)for(const o of i.j_)o.onError(r);n.queries.delete(e)}function $1(t){t.Y_.forEach(e=>{e.next()})}var l0,Cm;(Cm=l0||(l0={})).ea="default",Cm.Cache="cache";class X1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new sa(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==l0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.key=e}}class _x{constructor(e){this.key=e}}class q8{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=jw(e),this.Ra=new Ho(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Am,i=r?r.Ra:this.Ra;let o=r?r.mutatedKeys:this.mutatedKeys,a=i,s=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),p=af(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;d&&p?d.data.isEqual(p.data)?m!==w&&(n.track({type:3,doc:p}),x=!0):this.ga(d,p)||(n.track({type:2,doc:p}),x=!0,(u&&this.Aa(p,u)>0||l&&this.Aa(p,l)<0)&&(s=!0)):!d&&p?(n.track({type:0,doc:p}),x=!0):d&&!p&&(n.track({type:1,doc:d}),x=!0,(u||l)&&(s=!0)),x&&(p?(a=a.add(p),o=w?o.add(c):o.delete(c)):(a=a.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),n.track({type:1,doc:c})}return{Ra:a,fa:n,ns:s,mutatedKeys:o}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((c,h)=>function(p,m){const w=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return w(p)-w(m)}(c.type,h.type)||this.Aa(c.doc,h.doc)),this.pa(n),i=i!=null&&i;const s=r&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,a.length!==0||l?{snapshot:new sa(this.query,e.Ra,o,a,e.mutatedKeys,u===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Am,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=le(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new _x(n))}),this.da.forEach(n=>{e.has(n)||r.push(new yx(n))}),r}ba(e){this.Ta=e.Ts,this.da=le();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return sa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Y8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Q8{constructor(e){this.key=e,this.va=!1}}class Z8{constructor(e,r,n,i,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new _a(s=>Uw(s),of),this.Ma=new Map,this.xa=new Set,this.Oa=new Ge(Q.comparator),this.Na=new Map,this.La=new M1,this.Ba={},this.ka=new Map,this.qa=aa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function J8(t,e,r=!0){const n=Cx(t);let i;const o=n.Fa.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await wx(n,e,r,!0),i}async function eR(t,e){const r=Cx(t);await wx(r,e,!0,!1)}async function wx(t,e,r,n){const i=await E8(t.localStore,Yr(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,r);let s;return n&&(s=await tR(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&hx(t.remoteStore,i),s}async function tR(t,e,r,n,i){t.Ka=(h,d,p)=>async function(w,x,v,y){let E=x.view.ma(v);E.ns&&(E=await _m(w.localStore,x.query,!1).then(({documents:C})=>x.view.ma(C,E)));const I=y&&y.targetChanges.get(x.targetId),b=y&&y.targetMismatches.get(x.targetId)!=null,D=x.view.applyChanges(E,w.isPrimaryClient,I,b);return Sm(w,x.targetId,D.wa),D.snapshot}(t,h,d,p);const o=await _m(t.localStore,e,!0),a=new q8(e,o.Ts),s=a.ma(o.documents),u=hu.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),l=a.applyChanges(s,t.isPrimaryClient,u);Sm(t,r,l.wa);const c=new Y8(e,r,a);return t.Fa.set(e,c),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),l.snapshot}async function rR(t,e,r){const n=ie(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);if(o.length>1)return n.Ma.set(i.targetId,o.filter(a=>!of(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await u0(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&B1(n.remoteStore,i.targetId),c0(n,i.targetId)}).catch(lu)):(c0(n,i.targetId),await u0(n.localStore,i.targetId,!0))}async function nR(t,e){const r=ie(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),B1(r.remoteStore,n.targetId))}async function iR(t,e,r){const n=fR(t);try{const i=await function(a,s){const u=ie(a),l=ft.now(),c=s.reduce((p,m)=>p.add(m.key),le());let h,d;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Sn(),w=le();return u.cs.getEntries(p,c).next(x=>{m=x,m.forEach((v,y)=>{y.isValidDocument()||(w=w.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,m)).next(x=>{h=x;const v=[];for(const y of s){const E=T4(y,h.get(y.key).overlayedDocument);E!=null&&v.push(new Ii(y.key,E,bw(E.value.mapValue),Tr.exists(!0)))}return u.mutationQueue.addMutationBatch(p,l,v,s)}).next(x=>{d=x;const v=x.applyToLocalDocumentSet(h,w);return u.documentOverlayCache.saveOverlays(p,x.batchId,v)})}).then(()=>({batchId:d.batchId,changes:Hw(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,s,u){let l=a.Ba[a.currentUser.toKey()];l||(l=new Ge(me)),l=l.insert(s,u),a.Ba[a.currentUser.toKey()]=l}(n,i.batchId,r),await pu(n,i.changes),await hf(n.remoteStore)}catch(i){const o=H1(i,"Failed to persist write");r.reject(o)}}async function xx(t,e){const r=ie(t);try{const n=await _8(r.localStore,e);e.targetChanges.forEach((i,o)=>{const a=r.Na.get(o);a&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Ie(a.va):i.removedDocuments.size>0&&(Ie(a.va),a.va=!1))}),await pu(r,n,e)}catch(n){await lu(n)}}function Tm(t,e,r){const n=ie(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((o,a)=>{const s=a.view.Z_(e);s.snapshot&&i.push(s.snapshot)}),function(a,s){const u=ie(a);u.onlineState=s;let l=!1;u.queries.forEach((c,h)=>{for(const d of h.j_)d.Z_(s)&&(l=!0)}),l&&$1(u)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function oR(t,e,r){const n=ie(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),o=i&&i.key;if(o){let a=new Ge(Q.comparator);a=a.insert(o,jt.newNoDocument(o,ne.min()));const s=le().add(o),u=new lf(ne.min(),new Map,new Ge(me),a,s);await xx(n,u),n.Oa=n.Oa.remove(o),n.Na.delete(e),K1(n)}else await u0(n.localStore,e,!1).then(()=>c0(n,e,r)).catch(lu)}async function aR(t,e){const r=ie(t),n=e.batch.batchId;try{const i=await y8(r.localStore,e);Ax(r,n,null),Ex(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await pu(r,i)}catch(i){await lu(i)}}async function sR(t,e,r){const n=ie(t);try{const i=await function(a,s){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,s).next(h=>(Ie(h!==null),c=h.keys(),u.mutationQueue.removeMutationBatch(l,h))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,s)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(n.localStore,e);Ax(n,e,r),Ex(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await pu(n,i)}catch(i){await lu(i)}}function Ex(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function Ax(t,e,r){const n=ie(t);let i=n.Ba[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function c0(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||Ix(t,n)})}function Ix(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(B1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),K1(t))}function Sm(t,e,r){for(const n of r)n instanceof yx?(t.La.addReference(n.key,e),uR(t,n)):n instanceof _x?(q("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Ix(t,n.key)):te()}function uR(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(q("SyncEngine","New document in limbo: "+r),t.xa.add(n),K1(t))}function K1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Q(Le.fromString(e)),n=t.qa.next();t.Na.set(n,new Q8(r)),t.Oa=t.Oa.insert(r,n),hx(t.remoteStore,new Zn(Yr(nf(r.path)),n,"TargetPurposeLimboResolution",I1.oe))}}async function pu(t,e,r){const n=ie(t),i=[],o=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((s,u)=>{a.push(n.Ka(u,e,r).then(l=>{var c;if((l||r)&&n.isPrimaryClient){const h=l?!l.fromCache:(c=r==null?void 0:r.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);const h=F1.Wi(u.targetId,l);o.push(h)}}))}),await Promise.all(a),n.Ca.d_(i),await async function(u,l){const c=ie(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(l,d=>z.forEach(d.$i,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>z.forEach(d.Ui,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!cu(h))throw h;q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=c.os.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);c.os=c.os.insert(d,w)}}}(n.localStore,o))}async function lR(t,e){const r=ie(t);if(!r.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const n=await ux(r.localStore,e);r.currentUser=e,function(o,a){o.ka.forEach(s=>{s.forEach(u=>{u.reject(new X(j.CANCELLED,a))})}),o.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await pu(r,n.hs)}}function cR(t,e){const r=ie(t),n=r.Na.get(e);if(n&&n.va)return le().add(n.key);{let i=le();const o=r.Ma.get(e);if(!o)return i;for(const a of o){const s=r.Fa.get(a);i=i.unionWith(s.view.Va)}return i}}function Cx(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oR.bind(null,e),e.Ca.d_=X8.bind(null,e.eventManager),e.Ca.$a=K8.bind(null,e.eventManager),e}function fR(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sR.bind(null,e),e}class Ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return m8(this.persistence,new g8,e.initialUser,this.serializer)}Ga(e){return new h8(L1.Zr,this.serializer)}Wa(e){return new I8}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ec.provider={build:()=>new Ec};class f0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Tm(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lR.bind(null,this.syncEngine),await W8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $8}()}createDatastore(e){const r=cf(e.databaseInfo.databaseId),n=function(o){return new R8(o)}(e.databaseInfo);return function(o,a,s,u){return new O8(o,a,s,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,a,s){return new D8(n,i,o,a,s)}(this.localStore,this.datastore,e.asyncQueue,r=>Tm(this.syncEngine,r,0),function(){return xm.D()?new xm:new C8}())}createSyncEngine(e,r){return function(i,o,a,s,u,l,c){const h=new Z8(i,o,a,s,u,l);return c&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const o=ie(i);q("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await du(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}f0.provider={build:()=>new f0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,r,n,i,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=Pw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async a=>{q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=H1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Lh(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await ux(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rm(t,e){t.asyncQueue.verifyOperationInProgress();const r=await dR(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Em(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>Em(e.remoteStore,i)),t._onlineComponents=e}async function dR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lh(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;ra("Error using user provided cache. Falling back to memory cache: "+r),await Lh(t,new Ec)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Lh(t,new Ec);return t._offlineComponents}async function Tx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Rm(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Rm(t,new f0))),t._onlineComponents}function pR(t){return Tx(t).then(e=>e.syncEngine)}async function Ac(t){const e=await Tx(t),r=e.eventManager;return r.onListen=J8.bind(null,e.syncEngine),r.onUnlisten=rR.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=eR.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=nR.bind(null,e.syncEngine),r}function gR(t,e,r={}){const n=new wn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,u,l){const c=new q1({next:d=>{c.Za(),a.enqueueAndForget(()=>G1(o,h));const p=d.docs.has(s);!p&&d.fromCache?l.reject(new X(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&u&&u.source==="server"?l.reject(new X(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new X1(nf(s.path),c,{includeMetadataChanges:!0,_a:!0});return W1(o,h)}(await Ac(t),t.asyncQueue,e,r,n)),n.promise}function vR(t,e,r={}){const n=new wn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,u,l){const c=new q1({next:d=>{c.Za(),a.enqueueAndForget(()=>G1(o,h)),d.fromCache&&u.source==="server"?l.reject(new X(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new X1(s,c,{includeMetadataChanges:!0,_a:!0});return W1(o,h)}(await Ac(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e,r){if(!r)throw new X(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mR(t,e,r,n){if(e===!0&&n===!0)throw new X(j.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Nm(t){if(!Q.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Om(t){if(Q.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=df(t);throw new X(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new X(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sx((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bm(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new k3;switch(n.type){case"firstParty":return new B3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new X(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Pm.get(r);n&&(q("ComponentProvider","Removing Datastore"),Pm.delete(r),n.terminate())}(this),Promise.resolve()}}function yR(t,e,r,n={}){var i;const o=(t=lr(t,pf))._getSettings(),a=`${e}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),n.mockUserToken){let s,u;if(typeof n.mockUserToken=="string")s=n.mockUserToken,u=Vt.MOCK_USER;else{s=uS(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new X(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Vt(l)}t._authCredentials=new M3(new Rw(s,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class zt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}}class fi extends Ci{constructor(e,r,n){super(e,r,nf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new Q(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function tn(t,e,...r){if(t=ht(t),Rx("collection","path",e),t instanceof pf){const n=Le.fromString(e,...r);return Om(n),new fi(t,null,n)}{if(!(t instanceof zt||t instanceof fi))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Le.fromString(e,...r));return Om(n),new fi(t.firestore,null,n)}}function Rn(t,e,...r){if(t=ht(t),arguments.length===1&&(e=Pw.newId()),Rx("doc","path",e),t instanceof pf){const n=Le.fromString(e,...r);return Nm(n),new zt(t,null,new Q(n))}{if(!(t instanceof zt||t instanceof fi))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Le.fromString(e,...r));return Nm(n),new zt(t.firestore,t instanceof fi?t.converter:null,new Q(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cx(this,"async_queue_retry"),this.Vu=()=>{const n=Mh();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Mh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Mh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new wn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cu(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(a){let s=a.message||"";return a.stack&&(s=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),s}(n);throw Tn("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=z1.createAndSchedule(this,e,r,n,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function km(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const o of n)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Pn extends pf{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new Dm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dm(e),this._firestoreClient=void 0,await e}}}function _R(t,e){const r=typeof t=="object"?t:_w(),n=typeof t=="string"?t:e||"(default)",i=E1(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=aS("firestore");o&&yR(i,...o)}return i}function gf(t){if(t._terminated)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wR(t),t._firestoreClient}function wR(t){var e,r,n;const i=t._freezeSettings(),o=function(s,u,l,c){return new Q3(s,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Sx(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new hR(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(s){const u=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ua(Nt.fromBase64String(e))}catch(r){throw new X(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ua(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new X(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new X(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new X(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=/^__.*__$/;class ER{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,r,this.fieldTransforms):new fu(e,this.data,r,this.fieldTransforms)}}class Px{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ii(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Nx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class Z1{constructor(e,r,n,i,o,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Z1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ic(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Nx(this.Cu)&&xR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class AR{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||cf(e)}Qu(e,r,n,i=!1){return new Z1({Cu:e,methodName:r,qu:n,path:Ct.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(t){const e=t._freezeSettings(),r=cf(t._databaseId);return new AR(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Ox(t,e,r,n,i,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,r,i);ep("Data must be an object, but it was:",a,n);const s=bx(n,a);let u,l;if(o.merge)u=new gr(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){const c=[];for(const h of o.mergeFields){const d=h0(e,h,r);if(!a.contains(d))throw new X(j.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);kx(c,d)||c.push(d)}u=new gr(c),l=a.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=a.fieldTransforms;return new ER(new nr(s),u,l)}class _f extends mf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _f}}class J1 extends mf{_toFieldTransform(e){return new E4(e.path,new qs)}isEqual(e){return e instanceof J1}}function IR(t,e,r,n){const i=t.Qu(1,e,r);ep("Data must be an object, but it was:",i,n);const o=[],a=nr.empty();ao(n,(u,l)=>{const c=tp(e,u,r);l=ht(l);const h=i.Nu(c);if(l instanceof _f)o.push(c);else{const d=gu(l,h);d!=null&&(o.push(c),a.set(c,d))}});const s=new gr(o);return new Px(a,s,i.fieldTransforms)}function CR(t,e,r,n,i,o){const a=t.Qu(1,e,r),s=[h0(e,n,r)],u=[i];if(o.length%2!=0)throw new X(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)s.push(h0(e,o[d])),u.push(o[d+1]);const l=[],c=nr.empty();for(let d=s.length-1;d>=0;--d)if(!kx(l,s[d])){const p=s[d];let m=u[d];m=ht(m);const w=a.Nu(p);if(m instanceof _f)l.push(p);else{const x=gu(m,w);x!=null&&(l.push(p),c.set(p,x))}}const h=new gr(l);return new Px(c,h,a.fieldTransforms)}function TR(t,e,r,n=!1){return gu(r,t.Qu(n?4:3,e))}function gu(t,e){if(Dx(t=ht(t)))return ep("Unsupported field value:",e,t),bx(t,e);if(t instanceof mf)return function(n,i){if(!Nx(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const o=[];let a=0;for(const s of n){let u=gu(s,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=ht(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _4(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=ft.fromDate(n);return{timestampValue:wc(i.serializer,o)}}if(n instanceof ft){const o=new ft(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:wc(i.serializer,o)}}if(n instanceof Y1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ua)return{bytesValue:tx(i.serializer,n._byteString)};if(n instanceof zt){const o=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:k1(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Q1)return function(a,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw s.Bu("VectorValues must only contain numeric values.");return N1(s.serializer,u)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${df(n)}`)}(t,e)}function bx(t,e){const r={};return Nw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(t,(n,i)=>{const o=gu(i,e.Mu(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function Dx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Y1||t instanceof ua||t instanceof zt||t instanceof mf||t instanceof Q1)}function ep(t,e,r){if(!Dx(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=df(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function h0(t,e,r){if((e=ht(e))instanceof vf)return e._internalPath;if(typeof e=="string")return tp(t,e);throw Ic("Field path arguments must be of type string or ",t,!1,void 0,r)}const SR=new RegExp("[~\\*/\\[\\]]");function tp(t,e,r){if(e.search(SR)>=0)throw Ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new vf(...e.split("."))._internalPath}catch{throw Ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Ic(t,e,r,n,i){const o=n&&!n.isEmpty(),a=i!==void 0;let s=`Function ${e}() called with invalid data`;r&&(s+=" (via `toFirestore()`)"),s+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${n}`),a&&(u+=` in document ${i}`),u+=")"),new X(j.INVALID_ARGUMENT,s+t+u)}function kx(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(wf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class RR extends Mx{data(){return super.data()}}function wf(t,e){return typeof e=="string"?tp(t,e):e instanceof vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class Fx extends rp{}function Bx(t,e,...r){let n=[];e instanceof rp&&n.push(e),n=n.concat(r),function(o){const a=o.filter(u=>u instanceof np).length,s=o.filter(u=>u instanceof xf).length;if(a>1||a>0&&s>0)throw new X(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class xf extends Fx{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new xf(e,r,n)}_apply(e){const r=this._parse(e);return Vx(e._query,r),new Ci(e.firestore,e.converter,r0(e._query,r))}_parse(e){const r=yf(e.firestore);return function(o,a,s,u,l,c,h){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new X(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Lm(h,c);const p=[];for(const m of h)p.push(Mm(u,o,m));d={arrayValue:{values:p}}}else d=Mm(u,o,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Lm(h,c),d=TR(s,a,h,c==="in"||c==="not-in");return tt.create(l,c,d)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function PR(t,e,r){const n=e,i=wf("where",t);return xf._create(i,n,r)}class np extends rp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new np(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:jr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,o){let a=i;const s=o.getFlattenedFilters();for(const u of s)Vx(a,u),a=r0(a,u)}(e._query,r),new Ci(e.firestore,e.converter,r0(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ip extends Fx{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new ip(e,r)}_apply(e){const r=function(i,o,a){if(i.startAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ks(o,a)}(e._query,this._field,this._direction);return new Ci(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new ya(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function NR(t,e="asc"){const r=e,n=wf("orderBy",t);return ip._create(n,r)}function Mm(t,e,r){if(typeof(r=ht(r))=="string"){if(r==="")throw new X(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vw(e)&&r.indexOf("/")!==-1)throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Le.fromString(r));if(!Q.isDocumentKey(n))throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rm(t,new Q(n))}if(r instanceof zt)return rm(t,r._key);throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(r)}.`)}function Lm(t,e){if(!Array.isArray(t)||t.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vx(t,e){const r=function(i,o){for(const a of i)for(const s of a.getFlattenedFilters())if(o.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class OR{convertValue(e,r="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return ao(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertVectorValue(e){var r,n,i;const o=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(a=>Qe(a.doubleValue));return new Q1(o)}convertGeoPoint(e){return new Y1(Qe(e.latitude),Qe(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=T1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Gs(e));default:return null}}convertTimestamp(e){const r=yi(e);return new ft(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Le.fromString(e);Ie(sx(n));const i=new $s(n.get(1),n.get(3)),o=new Q(n.popFirst(5));return i.isEqual(r)||Tn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jx extends Mx{constructor(e,r,n,i,o,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class bl extends jx{data(e={}){return super.data(e)}}class zx{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new as(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new bl(this._firestore,this._userDataWriter,n.key,n,new as(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new X(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const u=new bl(i._firestore,i._userDataWriter,s.doc.key,s.doc,new as(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const u=new bl(i._firestore,i._userDataWriter,s.doc.key,s.doc,new as(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return s.type!==0&&(l=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),c=a.indexOf(s.doc.key)),{type:bR(s.type),doc:u,oldIndex:l,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function bR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){t=lr(t,zt);const e=lr(t.firestore,Pn);return gR(gf(e),t._key).then(r=>Wx(e,t,r))}class op extends OR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ua(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,r)}}function ap(t){t=lr(t,Ci);const e=lr(t.firestore,Pn),r=gf(e),n=new op(e);return Lx(t._query),vR(r,t._query).then(i=>new zx(e,n,t,i))}function kR(t,e,r){t=lr(t,zt);const n=lr(t.firestore,Pn),i=Ux(t.converter,e,r);return Ef(n,[Ox(yf(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Tr.none())])}function sp(t,e,r,...n){t=lr(t,zt);const i=lr(t.firestore,Pn),o=yf(i);let a;return a=typeof(e=ht(e))=="string"||e instanceof vf?CR(o,"updateDoc",t._key,e,r,n):IR(o,"updateDoc",t._key,e),Ef(i,[a.toMutation(t._key,Tr.exists(!0))])}function up(t){return Ef(lr(t.firestore,Pn),[new O1(t._key,Tr.none())])}function vu(t,e){const r=lr(t.firestore,Pn),n=Rn(t),i=Ux(t.converter,e);return Ef(r,[Ox(yf(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Tr.exists(!1))]).then(()=>n)}function Hx(t,...e){var r,n,i;t=ht(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||km(e[a])||(o=e[a],a++);const s={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(km(e[a])){const h=e[a];e[a]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[a+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[a+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,l,c;if(t instanceof zt)l=lr(t.firestore,Pn),c=nf(t._key.path),u={next:h=>{e[a]&&e[a](Wx(l,t,h))},error:e[a+1],complete:e[a+2]};else{const h=lr(t,Ci);l=lr(h.firestore,Pn),c=h._query;const d=new op(l);u={next:p=>{e[a]&&e[a](new zx(l,d,h,p))},error:e[a+1],complete:e[a+2]},Lx(t._query)}return function(d,p,m,w){const x=new q1(w),v=new X1(p,x,m);return d.asyncQueue.enqueueAndForget(async()=>W1(await Ac(d),v)),()=>{x.Za(),d.asyncQueue.enqueueAndForget(async()=>G1(await Ac(d),v))}}(gf(l),c,s,u)}function Ef(t,e){return function(n,i){const o=new wn;return n.asyncQueue.enqueueAndForget(async()=>iR(await pR(n),i,o)),o.promise}(gf(t),e)}function Wx(t,e,r){const n=r.docs.get(e._key),i=new op(t);return new jx(t,i,e._key,n,new as(r.hasPendingWrites,r.fromCache),e.converter)}function mu(){return new J1("serverTimestamp")}(function(e,r=!0){(function(i){ma=i})(va),ta(new Zi("firestore",(n,{instanceIdentifier:i,options:o})=>{const a=n.getProvider("app").getImmediate(),s=new Pn(new L3(n.getProvider("auth-internal")),new U3(n.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new X(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $s(l.options.projectId,c)}(a,i),a);return o=Object.assign({useFetchStreams:r},o),s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),ci(Qv,"4.7.3",e),ci(Qv,"4.7.3","esm2017")})();function lp(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Gx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MR=Gx,$x=new su("auth","Firebase",Gx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new w1("@firebase/auth");function LR(t,...e){Cc.logLevel<=ce.WARN&&Cc.warn(`Auth (${va}): ${t}`,...e)}function Dl(t,...e){Cc.logLevel<=ce.ERROR&&Cc.error(`Auth (${va}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,...e){throw cp(t,...e)}function Zr(t,...e){return cp(t,...e)}function Xx(t,e,r){const n=Object.assign(Object.assign({},MR()),{[e]:r});return new su("auth","Firebase",n).create(e,{appName:t.name})}function hi(t){return Xx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cp(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return $x.create(t,...e)}function ee(t,e,...r){if(!t)throw cp(e,...r)}function vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dl(e),new Error(e)}function Nn(t,e){t||vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FR(){return Fm()==="http:"||Fm()==="https:"}function Fm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FR()||hS()||"connection"in navigator)?navigator.onLine:!0}function VR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,r){this.shortDelay=e,this.longDelay=r,Nn(r>e,"Short delay should be less than long delay!"),this.isMobile=lS()||dS()}get(){return BR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t,e){Nn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new yu(3e4,6e4);function uo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ti(t,e,r,n,i={}){return qx(t,i,async()=>{let o={},a={};n&&(e==="GET"?a=n:o={body:JSON.stringify(n)});const s=uu(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:u},o);return fS()||(l.referrerPolicy="no-referrer"),Kx.fetch()(Yx(t,t.config.apiHost,r,s),l)})}async function qx(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},UR),e);try{const i=new HR(t),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw ll(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const s=o.ok?a.errorMessage:a.error.message,[u,l]=s.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ll(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw ll(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw ll(t,"user-disabled",a);const c=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Xx(t,c,l);zr(t,c)}}catch(i){if(i instanceof bn)throw i;zr(t,"network-request-failed",{message:String(i)})}}async function Af(t,e,r,n,i={}){const o=await Ti(t,e,r,n,i);return"mfaPendingCredential"in o&&zr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Yx(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?fp(t.config,i):`${t.config.apiScheme}://${i}`}function zR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Zr(this.auth,"network-request-failed")),jR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ll(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Zr(t,e,n);return i.customData._tokenResponse=r,i}function Bm(t){return t!==void 0&&t.enterprise!==void 0}class WR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return zR(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function GR(t,e){return Ti(t,"GET","/v2/recaptchaConfig",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(t,e){return Ti(t,"POST","/v1/accounts:delete",e)}async function Qx(t,e){return Ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XR(t,e=!1){const r=ht(t),n=await r.getIdToken(e),i=hp(n);ee(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:n,authTime:As(Fh(i.auth_time)),issuedAtTime:As(Fh(i.iat)),expirationTime:As(Fh(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Fh(t){return Number(t)*1e3}function hp(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Dl("JWT malformed, contained fewer than 3 sections"),null;try{const i=hw(r);return i?JSON.parse(i):(Dl("Failed to decode base64 JWT payload"),null)}catch(i){return Dl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Vm(t){const e=hp(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof bn&&KR(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function KR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=As(this.lastLoginAt),this.creationTime=As(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Zs(t,Qx(r,{idToken:n}));ee(i==null?void 0:i.users.length,r,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Zx(o.providerUserInfo):[],s=QR(t.providerData,a),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(s!=null&&s.length),c=u?l:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new p0(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function YR(t){const e=ht(t);await Tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QR(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Zx(t){return t.map(e=>{var{providerId:r}=e,n=lp(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e){const r=await qx(t,{},async()=>{const n=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=Yx(t,i,"/v1/token",`key=${o}`),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Kx.fetch()(a,{method:"POST",headers:s,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function JR(t,e){return Ti(t,"POST","/v2/accounts:revokeToken",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const r=Vm(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:o}=await ZR(e,r);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:o}=r,a=new Wo;return n&&(ee(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(ee(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(ee(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wo,this.toJSON())}_performRefresh(){return vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mn{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,o=lp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new p0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await Zs(this,this.stsTokenManager.getToken(this.auth,e));return ee(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return XR(this,e)}reload(){return YR(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new mn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Tc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await Zs(this,$R(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,o,a,s,u,l,c;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,d=(i=r.email)!==null&&i!==void 0?i:void 0,p=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,m=(a=r.photoURL)!==null&&a!==void 0?a:void 0,w=(s=r.tenantId)!==null&&s!==void 0?s:void 0,x=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=r.createdAt)!==null&&l!==void 0?l:void 0,y=(c=r.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:I,isAnonymous:b,providerData:D,stsTokenManager:C}=r;ee(E&&C,e,"internal-error");const A=Wo.fromJSON(this.name,C);ee(typeof E=="string",e,"internal-error"),Fn(h,e.name),Fn(d,e.name),ee(typeof I=="boolean",e,"internal-error"),ee(typeof b=="boolean",e,"internal-error"),Fn(p,e.name),Fn(m,e.name),Fn(w,e.name),Fn(x,e.name),Fn(v,e.name),Fn(y,e.name);const R=new mn({uid:E,auth:e,email:d,emailVerified:I,displayName:h,isAnonymous:b,photoURL:m,phoneNumber:p,tenantId:w,stsTokenManager:A,createdAt:v,lastLoginAt:y});return D&&Array.isArray(D)&&(R.providerData=D.map(N=>Object.assign({},N))),x&&(R._redirectEventId=x),R}static async _fromIdTokenResponse(e,r,n=!1){const i=new Wo;i.updateFromServerResponse(r);const o=new mn({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Tc(o),o}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ee(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Zx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),s=new Wo;s.updateFromIdToken(n);const u=new mn({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:a}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new p0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=new Map;function yn(t){Nn(t instanceof Function,"Expected a class definition");let e=Um.get(t);return e?(Nn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Um.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Jx.type="NONE";const jm=Jx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t,e,r){return`firebase:${t}:${e}:${r}`}class Go{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=kl(this.userKey,i.apiKey,o),this.fullPersistenceKey=kl("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Go(yn(jm),e,n);const i=(await Promise.all(r.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||yn(jm);const a=kl(n,e.config.apiKey,e.name);let s=null;for(const l of r)try{const c=await l._get(a);if(c){const h=mn._fromJSON(e,c);l!==o&&(s=h),o=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Go(o,e,n):(o=u[0],s&&await o._set(a,s.toJSON()),await Promise.all(r.map(async l=>{if(l!==o)try{await l._remove(a)}catch{}})),new Go(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oE(e))return"Blackberry";if(aE(e))return"Webos";if(tE(e))return"Safari";if((e.includes("chrome/")||rE(e))&&!e.includes("edge/"))return"Chrome";if(iE(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function eE(t=Wt()){return/firefox\//i.test(t)}function tE(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rE(t=Wt()){return/crios\//i.test(t)}function nE(t=Wt()){return/iemobile/i.test(t)}function iE(t=Wt()){return/android/i.test(t)}function oE(t=Wt()){return/blackberry/i.test(t)}function aE(t=Wt()){return/webos/i.test(t)}function dp(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function e6(t=Wt()){var e;return dp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function t6(){return pS()&&document.documentMode===10}function sE(t=Wt()){return dp(t)||iE(t)||aE(t)||oE(t)||/windows phone/i.test(t)||nE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t,e=[]){let r;switch(t){case"Browser":r=zm(Wt());break;case"Worker":r=`${zm(Wt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${va}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((a,s)=>{try{const u=e(o);a(u)}catch(u){s(u)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(t,e={}){return Ti(t,"GET","/v2/passwordPolicy",uo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=6;class o6{constructor(e){var r,n,i,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:i6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,o,a,s;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(s=u.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hm(this),this.idTokenSubscription=new Hm(this),this.beforeStateQueue=new r6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$x,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=yn(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Qx(this,{idToken:e}),n=await mn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(gn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,s=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===s)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Tc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(hi(this));const r=e?ht(e):null;return r&&ee(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n6(this),r=new o6(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await JR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&yn(e)||this._popupRedirectResolver;ee(r,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[yn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(s,this,"internal-error"),s.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,i);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&LR(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function xa(t){return ht(t)}class Hm{constructor(e){this.auth=e,this.observer=null,this.addObserver=ES(r=>this.observer=r)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s6(t){If=t}function lE(t){return If.loadJS(t)}function u6(){return If.recaptchaEnterpriseScript}function l6(){return If.gapiScript}function c6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const f6="recaptcha-enterprise",h6="NO_RECAPTCHA";class d6{constructor(e){this.type=f6,this.auth=xa(e)}async verify(e="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,s)=>{GR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const l=new WR(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,a(l.siteKey)}}).catch(u=>{s(u)})})}function i(o,a,s){const u=window.grecaptcha;Bm(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{a(l)}).catch(()=>{a(h6)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{n(this.auth).then(s=>{if(!r&&Bm(window.grecaptcha))i(s,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=u6();u.length!==0&&(u+=s),lE(u).then(()=>{i(s,o,a)}).catch(l=>{a(l)})}}).catch(s=>{a(s)})})}}async function Wm(t,e,r,n=!1){const i=new d6(t);let o;try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Gm(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Wm(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Wm(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t,e){const r=E1(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(gc(o,e??{}))return i;zr(i,"already-initialized")}return r.initialize({options:e})}function g6(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function v6(t,e,r){const n=xa(t);ee(n._canInitEmulator,n,"emulator-config-failed"),ee(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),o=cE(e),{host:a,port:s}=m6(e),u=s===null?"":`:${s}`;n.config.emulator={url:`${o}//${a}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||y6()}function cE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function m6(t){const e=cE(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:$m(n.substr(o.length+1))}}else{const[o,a]=n.split(":");return{host:o,port:$m(a)}}}function $m(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function y6(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return vn("not implemented")}_getIdTokenResponse(e){return vn("not implemented")}_linkToIdToken(e,r){return vn("not implemented")}_getReauthenticationResolver(e){return vn("not implemented")}}async function _6(t,e){return Ti(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w6(t,e){return Af(t,"POST","/v1/accounts:signInWithPassword",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x6(t,e){return Af(t,"POST","/v1/accounts:signInWithEmailLink",uo(t,e))}async function E6(t,e){return Af(t,"POST","/v1/accounts:signInWithEmailLink",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends pp{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Js(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Js(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,r,"signInWithPassword",w6);case"emailLink":return x6(e,{email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,n,"signUpPassword",_6);case"emailLink":return E6(e,{idToken:r,email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t,e){return Af(t,"POST","/v1/accounts:signInWithIdp",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6="http://localhost";class ro extends pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):zr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,o=lp(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new ro(n,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return $o(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,$o(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,$o(e,r)}buildRequest(){const e={requestUri:A6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=uu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function C6(t){const e=ts(rs(t)).link,r=e?ts(rs(e)).deep_link_id:null,n=ts(rs(t)).deep_link_id;return(n?ts(rs(n)).link:null)||n||r||e||t}class gp{constructor(e){var r,n,i,o,a,s;const u=ts(rs(e)),l=(r=u.apiKey)!==null&&r!==void 0?r:null,c=(n=u.oobCode)!==null&&n!==void 0?n:null,h=I6((i=u.mode)!==null&&i!==void 0?i:null);ee(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(s=u.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const r=C6(e);try{return new gp(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.providerId=Ea.PROVIDER_ID}static credential(e,r){return Js._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=gp.parseLink(r);return ee(n,"argument-error"),Js._fromEmailAndCode(e,n.code,n.tenantId)}}Ea.PROVIDER_ID="password";Ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends fE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends _u{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ro._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return $n.credential(r,n)}catch{return null}}}$n.GOOGLE_SIGN_IN_METHOD="google.com";$n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends _u{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.GITHUB_SIGN_IN_METHOD="github.com";Xn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends _u{constructor(){super("twitter.com")}static credential(e,r){return ro._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Kn.credential(r,n)}catch{return null}}}Kn.TWITTER_SIGN_IN_METHOD="twitter.com";Kn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const o=await mn._fromIdTokenResponse(e,n,i),a=Xm(n);return new la({user:o,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=Xm(n);return new la({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function Xm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends bn{constructor(e,r,n,i){var o;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Sc(e,r,n,i)}}function hE(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(t,o,e,n):o})}async function T6(t,e,r=!1){const n=await Zs(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return la._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(t,e,r=!1){const{auth:n}=t;if(gn(n.app))return Promise.reject(hi(n));const i="reauthenticate";try{const o=await Zs(t,hE(n,i,e,t),r);ee(o.idToken,n,"internal-error");const a=hp(o.idToken);ee(a,n,"internal-error");const{sub:s}=a;return ee(t.uid===s,n,"user-mismatch"),la._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&zr(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(t,e,r=!1){if(gn(t.app))return Promise.reject(hi(t));const n="signIn",i=await hE(t,n,e),o=await la._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(o.user),o}async function R6(t,e){return dE(xa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6(t){const e=xa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function N6(t,e,r){return gn(t.app)?Promise.reject(hi(t)):R6(ht(t),Ea.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&P6(t),n})}function O6(t,e,r,n){return ht(t).onIdTokenChanged(e,r,n)}function b6(t,e,r){return ht(t).beforeAuthStateChanged(e,r)}function D6(t,e,r,n){return ht(t).onAuthStateChanged(e,r,n)}function pE(t){return ht(t).signOut()}const Rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=1e3,M6=10;class vE extends gE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,s,u)=>{this.notifyListeners(a,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},o=this.storage.getItem(n);t6()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,M6):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},k6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}vE.type="LOCAL";const L6=vE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends gE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}mE.type="SESSION";const yE=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Cf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:o}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(a).map(async l=>l(r.origin,o)),u=await F6(s);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((s,u)=>{const l=vp("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),s(d.data.response);break;default:clearTimeout(c),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function V6(t){Jr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function U6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function z6(){return _E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="firebaseLocalStorageDb",H6=1,Pc="firebaseLocalStorage",xE="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Tf(t,e){return t.transaction([Pc],e?"readwrite":"readonly").objectStore(Pc)}function W6(){const t=indexedDB.deleteDatabase(wE);return new wu(t).toPromise()}function g0(){const t=indexedDB.open(wE,H6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Pc,{keyPath:xE})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Pc)?e(n):(n.close(),await W6(),e(await g0()))})})}async function Km(t,e,r){const n=Tf(t,!0).put({[xE]:e,value:r});return new wu(n).toPromise()}async function G6(t,e){const r=Tf(t,!1).get(e),n=await new wu(r).toPromise();return n===void 0?null:n.value}function qm(t,e){const r=Tf(t,!0).delete(e);return new wu(r).toPromise()}const $6=800,X6=3;class EE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await g0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>X6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cf._getInstance(z6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await U6(),!this.activeServiceWorker)return;this.sender=new B6(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await g0();return await Km(e,Rc,"1"),await qm(e,Rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Km(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>G6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>qm(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Tf(i,!1).getAll();return new wu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EE.type="LOCAL";const K6=EE;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t,e){return e?yn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,r){return $o(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Y6(t){return dE(t.auth,new mp(t),t.bypassAuthState)}function Q6(t){const{auth:e,user:r}=t;return ee(r,e,"internal-error"),S6(r,new mp(t),t.bypassAuthState)}async function Z6(t){const{auth:e,user:r}=t;return ee(r,e,"internal-error"),T6(r,new mp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,r,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:o,error:a,type:s}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y6;case"linkViaPopup":case"linkViaRedirect":return Z6;case"reauthViaPopup":case"reauthViaRedirect":return Q6;default:zr(this.auth,"internal-error")}}resolve(e){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=new yu(2e3,1e4);class bo extends AE{constructor(e,r,n,i,o){super(e,r,i,o),this.provider=n,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Nn(this.filter.length===1,"Popup operations only handle one event");const e=vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,J6.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="pendingRedirect",Ml=new Map;class tP extends AE{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Ml.get(this.auth._key());if(!e){try{const n=await rP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Ml.set(this.auth._key(),e)}return this.bypassAuthState||Ml.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rP(t,e){const r=oP(e),n=iP(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function nP(t,e){Ml.set(t._key(),e)}function iP(t){return yn(t._redirectPersistence)}function oP(t){return kl(eP,t.config.apiKey,t.name)}async function aP(t,e,r=!1){if(gn(t.app))return Promise.reject(hi(t));const n=xa(t),i=q6(n,e),a=await new tP(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=10*60*1e3;class uP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lP(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!IE(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Zr(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ym(e))}saveEventToCache(e){this.cachedEventUids.add(Ym(e)),this.lastProcessedEventTime=Date.now()}}function Ym(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t,e={}){return Ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hP=/^https?/;async function dP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cP(t);for(const r of e)try{if(pP(r))return}catch{}zr(t,"unauthorized-domain")}function pP(t){const e=d0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!hP.test(r))return!1;if(fP.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=new yu(3e4,6e4);function Qm(){const t=Jr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function vP(t){return new Promise((e,r)=>{var n,i,o;function a(){Qm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qm(),r(Zr(t,"network-request-failed"))},timeout:gP.get()})}if(!((i=(n=Jr().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Jr().gapi)===null||o===void 0)&&o.load)a();else{const s=c6("iframefcb");return Jr()[s]=()=>{gapi.load?a():r(Zr(t,"network-request-failed"))},lE(`${l6()}?onload=${s}`).catch(u=>r(u))}}).catch(e=>{throw Ll=null,e})}let Ll=null;function mP(t){return Ll=Ll||vP(t),Ll}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=new yu(5e3,15e3),_P="__/auth/iframe",wP="emulator/auth/iframe",xP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AP(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?fp(e,wP):`https://${t.config.authDomain}/${_P}`,n={apiKey:e.apiKey,appName:t.name,v:va},i=EP.get(t.config.apiHost);i&&(n.eid=i);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${uu(n).slice(1)}`}async function IP(t){const e=await mP(t),r=Jr().gapi;return ee(r,t,"internal-error"),e.open({where:document.body,url:AP(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xP,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const a=Zr(t,"network-request-failed"),s=Jr().setTimeout(()=>{o(a)},yP.get());function u(){Jr().clearTimeout(s),i(n)}n.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TP=500,SP=600,RP="_blank",PP="http://localhost";class Zm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NP(t,e,r,n=TP,i=SP){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let s="";const u=Object.assign(Object.assign({},CP),{width:n.toString(),height:i.toString(),top:o,left:a}),l=Wt().toLowerCase();r&&(s=rE(l)?RP:r),eE(l)&&(e=e||PP,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(e6(l)&&s!=="_self")return OP(e||"",s),new Zm(null);const h=window.open(e||"",s,c);ee(h,t,"popup-blocked");try{h.focus()}catch{}return new Zm(h)}function OP(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="__/auth/handler",DP="emulator/auth/handler",kP=encodeURIComponent("fac");async function Jm(t,e,r,n,i,o){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:va,eventId:i};if(e instanceof fE){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",xS(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries(o||{}))a[c]=h}if(e instanceof _u){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(a.scopes=c.join(","))}t.tenantId&&(a.tid=t.tenantId);const s=a;for(const c of Object.keys(s))s[c]===void 0&&delete s[c];const u=await t._getAppCheckToken(),l=u?`#${kP}=${encodeURIComponent(u)}`:"";return`${MP(t)}?${uu(s).slice(1)}${l}`}function MP({config:t}){return t.emulator?fp(t,DP):`https://${t.authDomain}/${bP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="webStorageSupport";class LP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yE,this._completeRedirectFn=aP,this._overrideRedirectResult=nP}async _openPopup(e,r,n,i){var o;Nn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Jm(e,r,n,d0(),i);return NP(e,a,vp())}async _openRedirect(e,r,n,i){await this._originValidation(e);const o=await Jm(e,r,n,d0(),i);return V6(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(Nn(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await IP(e),n=new uP(e);return r.register("authEvent",i=>(ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Bh,{type:Bh},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Bh];a!==void 0&&r(!!a),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=dP(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return sE()||tE()||dp()}}const FP=LP;var ey="@firebase/auth",ty="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UP(t){ta(new Zi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=n.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uE(t)},l=new a6(n,i,o,u);return g6(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ta(new Zi("auth-internal",e=>{const r=xa(e.getProvider("auth").getImmediate());return(n=>new BP(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(ey,ty,VP(t)),ci(ey,ty,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=5*60,zP=gw("authIdTokenMaxAge")||jP;let ry=null;const HP=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>zP)return;const i=r==null?void 0:r.token;ry!==i&&(ry=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Sf(t=_w()){const e=E1(t,"auth");if(e.isInitialized())return e.getImmediate();const r=p6(t,{popupRedirectResolver:FP,persistence:[K6,L6,yE]}),n=gw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const a=HP(o.toString());b6(r,a,()=>a(r.currentUser)),O6(r,s=>a(s))}}const i=dw("auth");return i&&v6(r,`http://${i}`),r}function WP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}s6({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const o=Zr("internal-error");o.customData=i,r(o)},n.type="text/javascript",n.charset="UTF-8",WP().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UP("Browser");const GP={apiKey:"AIzaSyCPEqzhBH2WFK7CzXWgGrSw0kSEHHrspus",authDomain:"shopinspect-6db28.firebaseapp.com",projectId:"shopinspect-6db28",storageBucket:"shopinspect-6db28.firebasestorage.app",messagingSenderId:"231850703012",appId:"1:231850703012:web:87e849e52dede0b6008e31"},CE=yw(GP),mt=_R(CE),TE=Sf(CE),SE=U.createContext(null),Si=()=>U.useContext(SE);function $P({children:t}){const[e,r]=U.useState(null),[n,i]=U.useState(!0);return U.useEffect(()=>D6(TE,a=>{r(a),i(!1)}),[]),n?S.jsx("div",{className:"p-6 text-center",children:"Loading..."}):S.jsx(SE.Provider,{value:e,children:t})}function xu(){const t=Si(),e=Sf(),r=()=>pE(e).catch(console.error);return S.jsxs("nav",{className:"flex flex-wrap justify-between items-center gap-2 mb-6 p-2 bg-gray-100 border-b",children:[S.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.jsx($a,{to:"/",className:({isActive:n})=>`px-3 py-1 rounded ${n?"bg-red-700 text-white":"bg-white border text-red-700"}`,children:"Dashboard"}),S.jsx($a,{to:"/checkin",className:({isActive:n})=>`px-3 py-1 rounded ${n?"bg-red-700 text-white":"bg-white border text-red-700"}`,children:"Check‑In"}),S.jsx($a,{to:"/inspections",className:({isActive:n})=>`px-3 py-1 rounded ${n?"bg-red-700 text-white":"bg-white border text-red-700"}`,children:"Inspections"}),S.jsx($a,{to:"/clients",className:({isActive:n})=>`px-3 py-1 rounded ${n?"bg-red-700 text-white":"bg-white border text-red-700"}`,children:"Clients"}),S.jsx($a,{to:"/shop",className:({isActive:n})=>`px-3 py-1 rounded ${n?"bg-red-700 text-white":"bg-white border text-red-700"}`,children:"Shop"})]}),t&&S.jsx("button",{onClick:r,className:"text-sm text-red-600 underline",children:"Log Out"})]})}function XP(){const t=Si(),e=au(),[r,n]=U.useState([]),[i,o]=U.useState("all"),[a,s]=U.useState(""),[u,l]=U.useState(!1),[c,h]=U.useState([]),d=["Waiting for Inspection","In Service","Awaiting Pickup","Completed"];U.useEffect(()=>{if(!t)return;const v=Bx(tn(mt,`shops/${t.uid}/vehicles`),NR("createdAt","desc"));return Hx(v,E=>{n(E.docs.map(I=>({id:I.id,...I.data()})))})},[t]);const p=r.filter(v=>i==="all"?!0:v.status===i).filter(v=>{var E,I,b;const y=a.toLowerCase();return((E=v.owner)==null?void 0:E.toLowerCase().includes(y))||((I=v.vin)==null?void 0:I.toLowerCase().includes(y))||((b=v.plate)==null?void 0:b.toLowerCase().includes(y))}),m=async(v,y)=>{if(t)try{await sp(Rn(mt,`shops/${t.uid}/vehicles`,v),{status:y})}catch(E){console.error("Error updating status:",E)}},w=async v=>{var I,b;if(!t)return;const E=`Confirm vehicle has left the premises on or before ${((b=(I=v.createdAt)==null?void 0:I.toDate)==null?void 0:b.call(I).toLocaleString())||"Unknown Date"}?`;if(window.confirm(E))try{await vu(tn(mt,`shops/${t.uid}/vehicle_removals`),{removedAt:mu(),removedBy:t.email||t.uid,vehicle:{year:v.year||"-",make:v.make||"-",model:v.model||"-",color:v.color||"-",vin:v.vin||"-",plate:v.plate||"-",owner:v.owner||"-",phone:v.phone||"-",createdAt:v.createdAt||null,status:v.status||"-"}}),await up(Rn(mt,`shops/${t.uid}/vehicles`,v.id))}catch(D){console.error("Error removing vehicle:",D)}},x=v=>{h(y=>y.includes(v)?y.filter(E=>E!==v):[...y,v])};return S.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[S.jsx(xu,{}),S.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-700",children:"Dashboard"}),S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:d.map(v=>S.jsxs("div",{className:"p-3 border rounded text-center",children:[S.jsx("div",{className:"text-lg font-bold",children:r.filter(y=>y.status===v).length}),S.jsx("div",{className:"text-xs text-gray-600",children:v})]},v))}),S.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Vehicles on Premise"}),S.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[S.jsx("input",{type:"text",placeholder:"Search by name, VIN, plate...",value:a,onChange:v=>s(v.target.value),className:"border p-2 flex-1 min-w-[150px]"}),S.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"border p-2",children:[S.jsx("option",{value:"all",children:"All Statuses"}),d.map(v=>S.jsx("option",{value:v,children:v},v))]}),S.jsx("button",{onClick:()=>l(!u),className:"border px-3 py-2 text-sm",children:u?"Normal View":"Compact View"})]}),p.length===0?S.jsx("p",{className:"text-gray-500",children:"No vehicles found."}):S.jsx("ul",{className:"space-y-2",children:p.map(v=>{var E,I;const y=c.includes(v.id);return S.jsxs("li",{className:"border rounded p-3 bg-white shadow-sm",children:[u?S.jsxs("div",{className:"flex flex-wrap md:flex-nowrap justify-between items-center gap-2",children:[S.jsxs("div",{className:"flex-1",children:[S.jsxs("span",{className:"font-medium",children:[v.year," ",v.make," ",v.model]})," ","• ",v.owner]}),S.jsx("select",{value:v.status,onChange:b=>m(v.id,b.target.value),className:"border p-1 text-sm",children:d.map(b=>S.jsx("option",{value:b,children:b},b))}),v.status==="Completed"&&S.jsx("button",{onClick:()=>w(v),className:"text-red-600 underline text-sm",children:"Remove"}),S.jsx("button",{onClick:()=>x(v.id),className:"text-blue-600 underline text-sm",children:y?"Hide":"Expand"})]}):S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"font-medium",children:[v.year," ",v.make," ",v.model," (",v.color||"-",")"]}),S.jsxs("div",{className:"text-gray-600",children:["VIN: ",v.vin||"-",v.plate&&` • Plate: ${v.plate}`]}),S.jsxs("div",{className:"text-gray-600",children:[v.owner||"-"," • ",v.phone||"-"]}),((E=v.createdAt)==null?void 0:E.toDate)&&S.jsxs("div",{className:"text-gray-500 text-xs",children:["Checked in: ",v.createdAt.toDate().toLocaleString()]})]}),S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-2",children:[S.jsx("select",{value:v.status,onChange:b=>m(v.id,b.target.value),className:"border p-1 text-sm",children:d.map(b=>S.jsx("option",{value:b,children:b},b))}),v.status==="Completed"&&S.jsx("button",{onClick:()=>w(v),className:"text-red-600 underline text-sm",children:"Remove"}),S.jsx("button",{onClick:()=>e("/inspection",{state:{vehicle:v}}),className:"text-sm text-green-700 underline",children:"Start Inspection"})]})]}),u&&y&&S.jsxs("div",{className:"mt-2 text-sm text-gray-700 space-y-1",children:[S.jsxs("div",{children:["Color: ",v.color||"-"]}),S.jsxs("div",{children:["VIN: ",v.vin||"-"]}),S.jsxs("div",{children:["Plate: ",v.plate||"-"]}),S.jsxs("div",{children:["Phone: ",v.phone||"-"]}),((I=v.createdAt)==null?void 0:I.toDate)&&S.jsxs("div",{children:["Checked in: ",v.createdAt.toDate().toLocaleString()]}),S.jsx("button",{onClick:()=>e("/inspection",{state:{vehicle:v}}),className:"text-sm text-green-700 underline mt-1",children:"Start Inspection"})]})]},v.id)})})]})}function KP(){const t=Si(),[e,r]=U.useState([]),[n,i]=U.useState(""),[o,a]=U.useState(null),[s,u]=U.useState({name:"",phone:"",phone2:""}),[l,c]=U.useState(""),[h,d]=U.useState(!1),[p,m]=U.useState({name:"",phone:"",phone2:""});U.useEffect(()=>{if(!t)return;(async()=>{const b=await ap(tn(mt,`shops/${t.uid}/customers`));r(b.docs.map(D=>({id:D.id,...D.data()})))})().catch(console.error)},[t]);const w=e.filter(I=>I.name.toLowerCase().includes(n.toLowerCase())),x=I=>{a(I.id),u({name:I.name,phone:I.phone,phone2:I.phone2||""}),c("")},v=async I=>{try{await sp(Rn(mt,`shops/${t.uid}/customers`,I),s),r(b=>b.map(D=>D.id===I?{...D,...s}:D)),a(null),c("✅ Saved.")}catch(b){console.error(b),c("❌ Error saving.")}},y=async I=>{if(window.confirm("Delete this customer?"))try{await up(Rn(mt,`shops/${t.uid}/customers`,I)),r(b=>b.filter(D=>D.id!==I))}catch(b){console.error(b),c("❌ Error deleting.")}},E=async()=>{if(!p.name.trim()||!p.phone.trim()){c("Please enter name and phone.");return}try{const I=await vu(tn(mt,`shops/${t.uid}/customers`),{...p,createdAt:mu()});r(b=>[...b,{id:I.id,...p}]),m({name:"",phone:"",phone2:""}),d(!1),c("✅ Customer added.")}catch(I){console.error(I),c("❌ Error adding customer.")}};return S.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[S.jsx(xu,{}),S.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-700",children:"Client Database"}),S.jsx("input",{type:"text",placeholder:"Search customers...",value:n,onChange:I=>i(I.target.value),className:"border p-2 mb-4 w-full"}),h?S.jsxs("div",{className:"mb-4 space-y-2 border p-3 rounded bg-gray-50",children:[S.jsx("input",{type:"text",placeholder:"Customer Name",value:p.name,onChange:I=>m({...p,name:I.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"text",placeholder:"Primary Phone",value:p.phone,onChange:I=>m({...p,phone:I.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"text",placeholder:"Secondary Phone (optional)",value:p.phone2,onChange:I=>m({...p,phone2:I.target.value}),className:"border p-2 w-full"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:E,className:"bg-green-600 text-white px-3 py-1 rounded",children:"Save"}),S.jsx("button",{onClick:()=>{d(!1),m({name:"",phone:"",phone2:""}),c("")},className:"text-sm underline",children:"Cancel"})]})]}):S.jsx("button",{onClick:()=>{d(!0),c("")},className:"text-sm text-blue-700 underline mb-4",children:"+ New Customer"}),w.length===0?S.jsx("p",{className:"text-gray-600",children:"No customers found."}):S.jsx("ul",{className:"space-y-2",children:w.map(I=>S.jsx("li",{className:"border rounded p-3 bg-white shadow-sm",children:o===I.id?S.jsxs("div",{className:"space-y-2",children:[S.jsx("input",{type:"text",value:s.name,onChange:b=>u({...s,name:b.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"text",value:s.phone,onChange:b=>u({...s,phone:b.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"text",placeholder:"Secondary Phone",value:s.phone2,onChange:b=>u({...s,phone2:b.target.value}),className:"border p-2 w-full"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:()=>v(I.id),className:"bg-green-600 text-white px-3 py-1 rounded",children:"Save"}),S.jsx("button",{onClick:()=>a(null),className:"text-sm underline",children:"Cancel"})]})]}):S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("div",{className:"font-medium",children:I.name}),S.jsxs("div",{className:"text-sm text-gray-600",children:[I.phone,I.phone2&&` • ${I.phone2}`]})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:()=>x(I),className:"text-blue-600 underline text-sm",children:"Edit"}),S.jsx("button",{onClick:()=>y(I.id),className:"text-red-600 underline text-sm",children:"Delete"})]})]})},I.id))}),l&&S.jsx("div",{className:"text-sm mt-2",children:l})]})}function qP(){const t=Si(),[e,r]=U.useState(!0),[n,i]=U.useState(!1),[o,a]=U.useState(""),[s,u]=U.useState({name:"",address:"",phone:"",website:"",logoUrl:"",description:""});U.useEffect(()=>{if(!t)return;(async()=>{try{const h=Rn(mt,"shops",t.uid),d=await DR(h);d.exists()&&u(d.data())}catch(h){console.error("Error fetching shop data:",h)}finally{r(!1)}})()},[t]);const l=async()=>{if(!s.name.trim()){a("Shop name is required.");return}try{await kR(Rn(mt,"shops",t.uid),s,{merge:!0}),i(!1),a("✅ Saved.")}catch(c){console.error("Error saving:",c),a("❌ Error saving.")}};return t?e?S.jsx("p",{className:"p-4",children:"Loading..."}):S.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[S.jsx(xu,{}),S.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-700",children:"Shop Profile"}),n?S.jsxs("div",{className:"space-y-3",children:[S.jsx("input",{type:"text",placeholder:"Shop Name",value:s.name,onChange:c=>u({...s,name:c.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"text",placeholder:"Address",value:s.address,onChange:c=>u({...s,address:c.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"text",placeholder:"Phone",value:s.phone,onChange:c=>u({...s,phone:c.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"text",placeholder:"Website URL",value:s.website,onChange:c=>u({...s,website:c.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"text",placeholder:"Logo URL",value:s.logoUrl,onChange:c=>u({...s,logoUrl:c.target.value}),className:"border p-2 w-full"}),S.jsx("textarea",{placeholder:"Description",value:s.description,onChange:c=>u({...s,description:c.target.value}),className:"border p-2 w-full min-h-[80px]"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:l,className:"bg-green-600 text-white px-3 py-1 rounded",children:"Save"}),S.jsx("button",{onClick:()=>i(!1),className:"text-sm underline",children:"Cancel"})]})]}):S.jsxs("div",{className:"space-y-3",children:[s.logoUrl&&S.jsx("img",{src:s.logoUrl,alt:"Shop Logo",className:"max-h-32 object-contain mb-2"}),S.jsxs("div",{children:[S.jsx("div",{className:"font-medium",children:s.name||"No Name"}),S.jsx("div",{className:"text-sm text-gray-700",children:s.address}),S.jsx("div",{className:"text-sm text-gray-700",children:s.phone}),s.website&&S.jsx("a",{href:s.website,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline text-sm",children:s.website}),s.description&&S.jsx("p",{className:"text-sm mt-2",children:s.description})]}),S.jsx("button",{onClick:()=>{i(!0),a("")},className:"text-sm text-blue-700 underline",children:"Edit"})]}),o&&S.jsx("div",{className:"text-sm mt-2",children:o})]}):S.jsx("p",{className:"p-4",children:"Please log in."})}function go(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[i,o]=U.useState(""),a=async s=>{s.preventDefault();try{await N6(TE,t,r),o("✅ Logged in!")}catch(u){console.error(u),o("❌ Login failed.")}};return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:S.jsxs("form",{onSubmit:a,className:"bg-white shadow-md rounded-lg p-6 w-full max-w-sm space-y-4",children:[S.jsx("h2",{className:"text-lg font-bold text-center",children:"ShopInspect Login"}),S.jsx("input",{type:"email",placeholder:"Email",className:"w-full border p-2 rounded",value:t,onChange:s=>e(s.target.value),required:!0}),S.jsx("input",{type:"password",placeholder:"Password",className:"w-full border p-2 rounded",value:r,onChange:s=>n(s.target.value),required:!0}),S.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition",children:"Login"}),i&&S.jsx("p",{className:"text-sm text-center text-red-600",children:i})]})})}const Vh=({label:t,value:e,set:r})=>S.jsxs("div",{className:"flex flex-col",children:[S.jsx("label",{className:"text-sm mb-1 text-gray-800",children:t}),S.jsx("input",{type:"number",step:"0.1",value:e,onChange:n=>r(n.target.value),className:"border p-2 rounded focus:outline-none focus:ring-2 focus:ring-red-600"})]});function YP(){var b;const e=((b=ga().state)==null?void 0:b.vehicle)||{},r=Si(),n=Sf(),[i,o]=U.useState({lf:"",rf:"",lr:"",rr:""}),[a,s]=U.useState({lf:"",rf:"",lr:"",rr:""}),[u,l]=U.useState({lf:"",rf:"",lr:"",rr:""}),[c,h]=U.useState(""),[d,p]=U.useState(""),[m,w]=U.useState({oil:"good",coolant:"good",transmission:"good",steering:"good"}),[x,v]=U.useState({battery:"good",wipers:"good",lights:"good",windshield:"good",leaks:"good",belts:"good",airFilter:"good"}),y=()=>{pE(n).catch(D=>console.error("Logout failed:",D))},E=async D=>{if(D.preventDefault(),!r)return p("You must be logged in.");try{await vu(tn(mt,`shops/${r.uid}/inspections`),{tread:i,brakes:a,pressure:u,lights:c,fluids:m,general:x,vehicle:{year:e.year,make:e.make,model:e.model,color:e.color,owner:e.owner,phone:e.phone,id:e.id},createdAt:mu()}),e.id&&await sp(Rn(mt,`shops/${r.uid}/vehicles`,e.id),{status:"inspected"}),p("✅ Inspection saved!")}catch(C){console.error(C),p("❌ Save failed.")}},I=(D,C,A)=>S.jsx("div",{className:"flex items-center gap-4",children:["good","attention","bad"].map(R=>{const N=R==="good"?"text-green-600":R==="attention"?"text-yellow-600":"text-red-600";return S.jsxs("label",{className:`flex items-center gap-1 ${N}`,children:[S.jsx("input",{type:"radio",name:`${D}-${C}`,value:R,checked:D[C]===R,onChange:k=>A({...D,[C]:k.target.value})}),R.charAt(0).toUpperCase()+R.slice(1)]},R)})});return S.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[S.jsxs("nav",{className:"flex justify-between items-center mb-6 text-sm",children:[S.jsxs("div",{className:"flex gap-4",children:[S.jsx(Sl,{to:"/checkin",className:"text-red-700 underline",children:"Check‑In"}),S.jsx(Sl,{to:"/",className:"text-red-700 underline",children:"New"}),S.jsx(Sl,{to:"/inspections",className:"text-red-700 underline",children:"Past"})]}),r&&S.jsx("button",{onClick:y,className:"text-red-600 underline",children:"Log Out"})]}),S.jsx("h1",{className:"text-2xl font-bold mb-4 text-red-700",children:"Vehicle Inspection"}),e&&e.year&&S.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded border",children:[S.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Vehicle Info"}),S.jsxs("p",{className:"text-sm text-gray-800",children:[S.jsxs("strong",{children:[e.year," ",e.make," ",e.model," (",e.color,")"]}),S.jsx("br",{}),"Owner: ",e.owner,S.jsx("br",{}),"Phone: ",e.phone]})]}),S.jsxs("form",{onSubmit:E,className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[["lf","rf","lr","rr"].map(D=>S.jsx(Vh,{label:`Tire Tread (${D.toUpperCase()}) mm`,value:i[D],set:C=>o({...i,[D]:C})},D)),["lf","rf","lr","rr"].map(D=>S.jsx(Vh,{label:`Brake Pad (${D.toUpperCase()}) mm`,value:a[D],set:C=>s({...a,[D]:C})},D)),["lf","rf","lr","rr"].map(D=>S.jsx(Vh,{label:`Tire Pressure (${D.toUpperCase()}) PSI`,value:u[D],set:C=>l({...u,[D]:C})},D))]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-sm text-gray-700 mb-1 block",children:"Exterior Lights"}),S.jsx("input",{type:"text",className:"border p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-red-600",value:c,onChange:D=>h(D.target.value),placeholder:"e.g. All working"})]}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[S.jsx("h2",{className:"font-semibold text-red-800 mb-3",children:"Fluid Checks"}),S.jsx("div",{className:"space-y-4",children:Object.keys(m).map(D=>S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium capitalize mb-1",children:D.replace(/([A-Z])/g," $1")}),I(m,D,w)]},D))})]}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[S.jsx("h2",{className:"font-semibold text-red-800 mb-3",children:"General Condition"}),S.jsx("div",{className:"space-y-4",children:Object.keys(x).map(D=>S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium capitalize mb-1",children:D.replace(/([A-Z])/g," $1")}),I(x,D,v)]},D))})]}),S.jsx("button",{type:"submit",className:"bg-red-700 hover:bg-red-800 text-white px-6 py-2 rounded w-full font-semibold shadow",children:"Save Inspection"}),d&&S.jsx("p",{className:"text-sm text-green-600 mt-2",children:d})]})]})}function ny({label:t,value:e}){const r=e==="good"?"text-green-600":e==="attention"?"text-yellow-600":"text-red-600",n=e==="good"?"bg-green-100":e==="attention"?"bg-yellow-100":"bg-red-100";return S.jsxs("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${r} ${n}`,children:[t,": ",e.charAt(0).toUpperCase()+e.slice(1)]})}function QP({insp:t}){var p,m,w;const e=U.useRef(null),r=()=>{const x=e.current.innerHTML,v=document.body.innerHTML;document.body.innerHTML=x,window.print(),document.body.innerHTML=v,window.location.reload()},{vehicle:n={},tread:i={},brakes:o={},pressure:a={},lights:s="",fluids:u={},general:l={},createdAt:c}=t,h=["lf","rf","lr","rr"],d={lf:"LF",rf:"RF",lr:"LR",rr:"RR"};return S.jsxs("li",{ref:e,className:"border p-6 rounded shadow bg-white",children:[S.jsxs("div",{className:"mb-3",children:[S.jsxs("h3",{className:"text-lg font-semibold text-red-800",children:[n.year," ",n.make," ",n.model," (",n.color,")"]}),S.jsxs("p",{className:"text-sm text-gray-700",children:["Owner: ",n.owner," • ",n.phone]})]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"Tire Tread (mm)"}),S.jsx("ul",{className:"text-sm space-y-1",children:h.map(x=>S.jsxs("li",{children:[d[x],": ",i[x]||"—"]},x))})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"Brake Pad (mm)"}),S.jsx("ul",{className:"text-sm space-y-1",children:h.map(x=>S.jsxs("li",{children:[d[x],": ",o[x]||"—"]},x))})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"Tire Pressure (PSI)"}),S.jsx("ul",{className:"text-sm space-y-1",children:h.map(x=>S.jsxs("li",{children:[d[x],": ",a[x]||"—"]},x))})]})]}),S.jsxs("p",{className:"mb-4 text-sm",children:[S.jsx("strong",{className:"text-red-700",children:"Exterior Lights:"})," ",s||"—"]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"Fluid Checks"}),S.jsx("div",{className:"space-y-1",children:Object.entries(u).map(([x,v])=>S.jsx(ny,{label:x.replace(/([A-Z])/g," $1"),value:v},x))})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"General Condition"}),S.jsx("div",{className:"space-y-1",children:Object.entries(l).map(([x,v])=>S.jsx(ny,{label:x.replace(/([A-Z])/g," $1"),value:v},x))})]})]}),S.jsxs("p",{className:"text-xs text-gray-500",children:["Saved: ",((w=(p=c==null?void 0:c.toDate)==null?void 0:(m=p.call(c)).toLocaleString)==null?void 0:w.call(m))||"N/A"]}),S.jsx("button",{onClick:r,className:"mt-4 bg-red-700 hover:bg-red-800 text-white px-4 py-1 rounded text-sm shadow",children:"Print"})]})}function ZP(){const t=Si(),[e,r]=U.useState([]);return U.useEffect(()=>{(async()=>{if(!t)return;const o=(await ap(tn(mt,`shops/${t.uid}/inspections`))).docs.map(a=>({id:a.id,...a.data()}));r(o)})()},[t]),S.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[S.jsx(xu,{}),S.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-700",children:"Past Inspections"}),e.length===0?S.jsx("p",{className:"text-gray-600",children:"No inspections found."}):S.jsx("ul",{className:"space-y-6",children:e.map(n=>S.jsx(QP,{insp:n},n.id))})]})}function JP({onCustomerSelected:t,user:e}){const[r,n]=U.useState(""),[i,o]=U.useState([]),[a,s]=U.useState(null),[u,l]=U.useState(!1),[c,h]=U.useState({name:"",phone:""}),[d,p]=U.useState("");U.useEffect(()=>{if(!r||!e){o([]);return}(async()=>{const E=(await ap(tn(mt,`shops/${e.uid}/customers`))).docs.map(I=>({id:I.id,...I.data()})).filter(I=>I.name.toLowerCase().includes(r.toLowerCase()));o(E)})().catch(console.error)},[r,e]);const m=x=>{s(x),o([]),n(""),t&&t(x)},w=async()=>{if(e){if(!c.name.trim()||!c.phone.trim()){p("Please enter name and phone.");return}try{const v={id:(await vu(tn(mt,`shops/${e.uid}/customers`),{...c,createdAt:mu(),vehicles:[]})).id,...c,vehicles:[]};m(v),l(!1),h({name:"",phone:""}),p("")}catch(x){console.error(x),p("Error adding customer.")}}};return S.jsx("div",{className:"mb-4 p-3 border rounded bg-gray-50",children:a?S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("div",{className:"font-medium",children:a.name}),S.jsx("div",{className:"text-sm text-gray-600",children:a.phone})]}),S.jsx("button",{onClick:()=>{s(null),t(null)},className:"text-sm text-red-600 underline",children:"Clear"})]}):u?S.jsxs("div",{className:"space-y-2",children:[S.jsx("input",{type:"text",placeholder:"Customer Name",value:c.name,onChange:x=>h({...c,name:x.target.value}),className:"border p-2 w-full"}),S.jsx("input",{type:"tel",placeholder:"Phone Number",value:c.phone,onChange:x=>h({...c,phone:x.target.value}),className:"border p-2 w-full"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:w,className:"bg-green-600 text-white px-3 py-1 rounded",children:"Save Customer"}),S.jsx("button",{onClick:()=>{l(!1),p("")},className:"text-sm underline",children:"Cancel"})]}),d&&S.jsx("div",{className:"text-sm text-red-600",children:d})]}):S.jsxs("div",{children:[S.jsx("input",{type:"text",placeholder:"Search customer by name",value:r,onChange:x=>n(x.target.value),className:"border p-2 w-full"}),i.length>0&&S.jsx("ul",{className:"mt-2 border rounded bg-white max-h-48 overflow-y-auto",children:i.map(x=>S.jsxs("li",{onClick:()=>m(x),className:"p-2 hover:bg-red-50 cursor-pointer",children:[x.name," • ",x.phone]},x.id))}),(e==null?void 0:e.email)==="test@shop.com"?S.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Adding new customers is disabled in demo mode."}):S.jsx("button",{onClick:()=>l(!0),className:"text-sm text-blue-700 underline mt-2",children:"+ Add New Customer"})]})})}function eN(){const t=au(),e=Si();Sf();const[r,n]=U.useState({owner:"",phone:"",year:"",make:"",model:"",color:"",vin:"",mileage:"",plate:""}),[i,o]=U.useState(""),[a,s]=U.useState([]),[u,l]=U.useState([]),[c,h]=U.useState(null),d={Acura:["Integra","Legend","TL","RL","MDX","RDX","ILX","TSX"],"Alfa Romeo":["Giulia","Stelvio"],Audi:["A3","A4","A6","A8","Q3","Q5","Q7","Q8"],BMW:["3 Series","5 Series","7 Series","X1","X3","X5","X7"],Buick:["Century","Regal","LaCrosse","Enclave","Encore"],Cadillac:["CTS","ATS","Escalade","XT5","SRX"],Chevrolet:["Cavalier","Impala","Malibu","Cruze","Equinox","Tahoe","Silverado","Suburban","Traverse","Trailblazer"],Chrysler:["300","Sebring","Pacifica","Town & Country","Voyager"],Dodge:["Caravan","Durango","Charger","Challenger","Journey","Ram 1500","Dakota","Neon","Nitro"],Fiat:["500","500X"],Ford:["Escort","Focus","Fusion","Taurus","Mustang","Escape","Edge","Explorer","Expedition","F-150","Ranger","Transit"],Genesis:["G70","G80","G90"],GMC:["Sierra","Canyon","Acadia","Terrain","Yukon"],Honda:["Accord","Civic","Fit","Insight","CR-V","Pilot","Odyssey","Ridgeline","Passport"],Hyundai:["Elantra","Sonata","Accent","Santa Fe","Tucson","Kona"],Infiniti:["G35","G37","Q50","QX60","QX80"],Isuzu:["Rodeo","Trooper"],Jaguar:["XF","XJ","F-Pace","E-Pace"],Jeep:["Cherokee","Grand Cherokee","Liberty","Wrangler","Compass"],Kia:["Rio","Forte","Optima","Sorento","Sportage","Soul"],"Land Rover":["Range Rover","Discovery","LR3","LR4"],Lexus:["ES","GS","IS","RX","NX","GX"],Lincoln:["MKZ","MKS","MKX","Navigator","Aviator"],Maserati:["Ghibli","Levante","Quattroporte"],Mazda:["3","6","CX-3","CX-5","CX-9","MX-5"],"Mercedes-Benz":["C-Class","E-Class","S-Class","GLC","GLE"],Mercury:["Sable","Grand Marquis","Mountaineer"],Mini:["Cooper","Countryman","Clubman"],Mitsubishi:["Lancer","Galant","Outlander","Eclipse"],Nissan:["Altima","Sentra","Maxima","Rogue","Murano","Frontier","Titan","Pathfinder"],Oldsmobile:["Alero","Intrigue","Silhouette"],Pontiac:["Grand Am","Grand Prix","G6","G8","Vibe"],Porsche:["911","Cayenne","Macan","Panamera"],Ram:["1500","2500","3500"],Saab:["9-3","9-5"],Saturn:["Ion","Vue","L-Series"],Scion:["xA","xB","xD","tC","FR-S"],Smart:["Fortwo"],Subaru:["Impreza","Legacy","Outback","Forester","Crosstrek"],Suzuki:["SX4","Grand Vitara","Forenza"],Tesla:["Model S","Model 3","Model X","Model Y"],Toyota:["Corolla","Camry","Avalon","Prius","RAV4","Highlander","Tacoma","Tundra","4Runner"],Volkswagen:["Jetta","Passat","Golf","Tiguan","Atlas"],Volvo:["S60","S80","XC60","XC90"]};U.useEffect(()=>{if(!e)return;const v=Bx(tn(mt,`shops/${e.uid}/vehicles`),PR("status","==","pending"));return Hx(v,E=>s(E.docs.map(I=>({id:I.id,...I.data()}))))},[e]),U.useEffect(()=>{const v=r.make.trim();d[v]?l(d[v]):l([])},[r.make]);const p=v=>y=>n({...r,[v]:y.target.value}),m=async v=>{if(v.preventDefault(),!e)return o("⚠️  Please log in first.");try{await vu(tn(mt,`shops/${e.uid}/vehicles`),{...r,status:"pending",createdAt:mu(),customerId:c?c.id:null}),n({owner:"",phone:"",year:"",make:"",model:"",color:"",vin:"",mileage:"",plate:""}),h(null),o("✅ Vehicle checked in!")}catch(y){console.error(y),o("❌ Could not save.")}},w=async v=>{if(e)try{await up(Rn(mt,`shops/${e.uid}/vehicles`,v))}catch(y){console.error("Delete failed:",y)}},x=()=>{window.alert("Feature not available yet")};return S.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[S.jsx(xu,{}),e&&S.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Logged in as ",S.jsx("span",{className:"font-medium",children:e.email})]}),S.jsx(JP,{user:e,onCustomerSelected:v=>{h(v),n(v?y=>({...y,owner:v.name,phone:v.phone}):y=>({...y,owner:"",phone:""}))}}),S.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 gap-4 bg-white p-4 rounded shadow mb-6",children:[S.jsx("input",{type:"text",placeholder:"Owner Name",value:r.owner,onChange:p("owner"),className:"border p-2"}),S.jsx("input",{type:"tel",placeholder:"Phone Number",value:r.phone,onChange:p("phone"),className:"border p-2"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsx("input",{type:"text",placeholder:"Year",value:r.year,onChange:p("year"),className:"border p-2"}),S.jsx("input",{list:"vehicleMakes",type:"text",placeholder:"Make",value:r.make,onChange:p("make"),className:"border p-2"}),S.jsx("datalist",{id:"vehicleMakes",children:Object.keys(d).map(v=>S.jsx("option",{value:v},v))})]}),S.jsx("input",{list:"vehicleModels",type:"text",placeholder:"Model",value:r.model,onChange:p("model"),className:"border p-2"}),S.jsx("datalist",{id:"vehicleModels",children:u.map(v=>S.jsx("option",{value:v},v))}),S.jsx("input",{type:"text",placeholder:"Color",value:r.color,onChange:p("color"),className:"border p-2"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",placeholder:"VIN",value:r.vin,onChange:p("vin"),className:"border p-2 flex-1"}),S.jsx("button",{type:"button",onClick:x,className:"border p-2 bg-red-600 text-white",children:"Scan VIN"})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsx("input",{type:"text",placeholder:"Mileage",value:r.mileage,onChange:p("mileage"),className:"border p-2"}),S.jsx("input",{type:"text",placeholder:"License Plate",value:r.plate,onChange:p("plate"),className:"border p-2"})]}),S.jsx("button",{type:"submit",className:"bg-red-700 text-white p-2 rounded hover:bg-red-800",children:"Check In Vehicle"}),i&&S.jsx("div",{className:"text-sm",children:i})]}),S.jsxs("div",{className:"mt-6",children:[S.jsx("h2",{className:"text-lg mb-2",children:"Pending Vehicles"}),a.length===0?S.jsx("p",{className:"text-sm text-gray-500",children:"No vehicles waiting."}):S.jsx("ul",{className:"space-y-2",children:a.map(v=>S.jsxs("li",{className:"flex items-center gap-2 border rounded p-3 bg-white shadow-sm hover:bg-red-50 transition",children:[S.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>t("/inspection",{state:{vehicle:v}}),children:[S.jsxs("div",{className:"font-medium",children:[v.year," ",v.make," ",v.model," (",v.color,")"]}),S.jsxs("div",{className:"text-sm text-gray-600",children:["VIN: ",v.vin,v.plate&&S.jsxs(S.Fragment,{children:[" • Plate: ",v.plate]}),S.jsx("br",{}),v.owner," • ",v.phone]})]}),S.jsx("button",{onClick:y=>{y.stopPropagation(),w(v.id)},className:"text-sm text-red-600 hover:text-red-800 underline",children:"Delete"})]},v.id))})]})]})}function tN(){const t=au(),e=()=>{t("/checkin")};return S.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-800 flex flex-col",children:[S.jsxs("header",{className:"bg-white shadow p-6 flex flex-col items-center text-center",children:[S.jsx("img",{src:"/logo.png",alt:"AutoInspectify logo",className:"h-32 w-auto mb-2"}),S.jsx("h1",{className:"text-3xl font-bold mb-1",children:"AutoInspectify"}),S.jsx("p",{className:"text-gray-600 mb-4",children:"Your Digital Inspection Solution"}),S.jsx("button",{onClick:e,className:"bg-red-600 text-white px-6 py-2 rounded-full hover:bg-red-700 transition",children:"Enter App"})]}),S.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center px-4 py-8 space-y-12",children:[S.jsxs("div",{className:"max-w-xl text-center space-y-6",children:[S.jsx("p",{className:"text-lg",children:"Save time, stay organized, and present your findings professionally."}),S.jsx("p",{className:"text-md text-gray-700",children:"AutoInspectify helps your shop document vehicle inspections digitally with clean, consistent, and printable reports."})]}),S.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-lg shadow",children:[S.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Contact Us"}),S.jsxs("form",{action:"https://formspree.io/f/mayvlkqb",method:"POST",className:"space-y-4",children:[S.jsx("input",{type:"text",name:"name",required:!0,placeholder:"Your Name",className:"w-full border border-gray-300 px-4 py-2 rounded"}),S.jsx("input",{type:"email",name:"email",required:!0,placeholder:"Your Email",className:"w-full border border-gray-300 px-4 py-2 rounded"}),S.jsx("textarea",{name:"message",required:!0,placeholder:"Your Message",rows:"4",className:"w-full border border-gray-300 px-4 py-2 rounded"}),S.jsx("button",{type:"submit",className:"w-full bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition",children:"Send Message"})]})]})]}),S.jsxs("footer",{className:"bg-white shadow p-4 text-center text-sm text-gray-500",children:["© ",new Date().getFullYear()," AutoInspectify. All rights reserved."]})]})}function rN(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function nN(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var iN=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oN=function(t){iN(e,t);function e(r,n){var i=this.constructor,o=t.call(this,r,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),rN(o,i.prototype),nN(o),o}return e}(Error),aN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cr=function(t){aN(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(oN),sN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ye=function(t){sN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(cr),uN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J=function(t){uN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(cr),RE=function(){function t(e){if(this.binarizer=e,e===null)throw new J("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var o=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),lN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rt=function(t){lN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(cr),cN=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Pe=function(){function t(){}return t.arraycopy=function(e,r,n,i,o){for(;o--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),fN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yp=function(t){fN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(cr),hN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iy=function(t){hN(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(yp),dN=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ut=function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var o=r;o<n;o++)e[o]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new J("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new iy(r);if(n>e)throw new iy(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var o=dN(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=31*i+s}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,o=new Int32Array(i);return Pe.arraycopy(e,r,o,0,i),o},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var a=o+i>>1,s=n(r,e[a]);if(s>0)i=a+1;else if(s<0)o=a-1;else return a}return-i-1},t.numberComparator=function(e,r){return e-r},t}(),se=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),yt=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Pe.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),o=n[i];o&=~((1<<(e&31))-1);for(var a=n.length;o===0;){if(++i===a)return r;o=n[i]}var s=i*32+se.numberOfTrailingZeros(o);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),o=~n[i];o&=~((1<<(e&31))-1);for(var a=n.length;o===0;){if(++i===a)return r;o=~n[i]}var s=i*32+se.numberOfTrailingZeros(o);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new J;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),o=this.bits,a=n;a<=i;a++){var s=a>n?0:e&31,u=a<i?31:r&31,l=(2<<u)-(1<<s);o[a]|=l}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new J;if(r===e)return!0;r--;for(var i=Math.floor(e/32),o=Math.floor(r/32),a=this.bits,s=i;s<=o;s++){var u=s>i?0:e&31,l=s<o?31:r&31,c=(2<<l)-(1<<u)&4294967295;if((a[s]&c)!==(n?c:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new J("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new J("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var o=0;o<i;o++){for(var a=0,s=0;s<8;s++)this.get(e)&&(a|=1<<7-s),e++;r[n+o]=a}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,o=0;o<n;o++){var a=i[o];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,e[r-o]=a}if(this.size!==n*32){for(var s=n*32-this.size,u=e[0]>>>s,o=1;o<n;o++){var l=e[o];u|=l<<32-s,e[o-1]=u,u=l>>>s}e[n-1]=u}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&ut.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+ut.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),v0;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(v0||(v0={}));const Ne=v0;var pN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W=function(t){pN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(cr),gN=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xe;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(xe||(xe={}));var st=function(){function t(e,r,n){for(var i,o,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var u=this.values,l=0,c=u.length;l!==c;l++){var h=u[l];t.VALUES_TO_ECI.set(h,this)}try{for(var d=gN(a),p=d.next();!p.done;p=d.next()){var m=p.value;t.NAME_TO_ECI.set(m,this)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new W("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new W("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new W("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(xe.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(xe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(xe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(xe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(xe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(xe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(xe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(xe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(xe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(xe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(xe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(xe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(xe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(xe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(xe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(xe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(xe.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(xe.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(xe.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(xe.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(xe.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(xe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(xe.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(xe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(xe.Big5,28,"Big5"),t.GB18030=new t(xe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(xe.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),vN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fl=function(t){vN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(cr),Sr=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof st?e:st.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",o=0,a=e.length;o<a;o++){var s=e[o].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(st.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Fl("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(st.UTF8)||e.equals(st.ISO8859_1)||e.equals(st.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],o=0;o<n.length;o++)i.push(n[o].charCodeAt(0));return new Uint8Array(i)},t}(),he=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Sr.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Ne.CHARACTER_SET)!==void 0)return r.get(Ne.CHARACTER_SET).toString();for(var n=e.length,i=!0,o=!0,a=!0,s=0,u=0,l=0,c=0,h=0,d=0,p=0,m=0,w=0,x=0,v=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,E=0;E<n&&(i||o||a);E++){var I=e[E]&255;a&&(s>0?I&128?s--:a=!1:I&128&&(I&64?(s++,I&32?(s++,I&16?(s++,I&8?a=!1:c++):l++):u++):a=!1)),i&&(I>127&&I<160?i=!1:I>159&&(I<192||I===215||I===247)&&v++),o&&(h>0?I<64||I===127||I>252?o=!1:h--:I===128||I===160||I>239?o=!1:I>160&&I<224?(d++,m=0,p++,p>w&&(w=p)):I>127?(h++,p=0,m++,m>x&&(x=m)):(p=0,m=0))}return a&&s>0&&(a=!1),o&&h>0&&(o=!1),a&&(y||u+l+c>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||w>=3||x>=3)?t.SHIFT_JIS:i&&o?w===2&&d===2||v*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:a?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function o(s,u,l,c,h,d){if(s==="%%")return"%";if(r[++i]!==void 0){s=c?parseInt(c.substr(1)):void 0;var p=h?parseInt(h.substr(1)):void 0,m;switch(d){case"s":m=r[i];break;case"c":m=r[i][0];break;case"f":m=parseFloat(r[i]).toFixed(s);break;case"p":m=parseFloat(r[i]).toPrecision(s);break;case"e":m=parseFloat(r[i]).toExponential(s);break;case"x":m=parseInt(r[i]).toString(p||16);break;case"d":m=parseFloat(parseInt(r[i],p||10).toPrecision(s)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var w=parseInt(l),x=l&&l[0]+""=="0"?"0":" ";m.length<w;)m=u!==void 0?m+x:x+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},t.getBytes=function(e,r){return Sr.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=st.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=st.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=st.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),ae=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=he.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),rn=function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new J("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),o=0;o<r;o++)for(var a=e[o],s=0;s<n;s++)a[s]&&i.set(s,o);return i},t.parseFromString=function(e,r,n){if(e===null)throw new J("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,a=0,s=-1,u=0,l=0;l<e.length;)if(e.charAt(l)===`
`||e.charAt(l)==="\r"){if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new J("row lengths do not match");a=o,u++}l++}else if(e.substring(l,l+r.length)===r)l+=r.length,i[o]=!0,o++;else if(e.substring(l,l+n.length)===n)l+=n.length,i[o]=!1,o++;else throw new J("illegal character encountered: "+e.substring(l));if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new J("row lengths do not match");u++}for(var c=new t(s,u),h=0;h<o;h++)i[h]&&c.set(Math.floor(h%s),Math.floor(h/s));return c},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new J("input matrix dimensions do not match");for(var r=new yt(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,o=0,a=this.height;o<a;o++)for(var s=o*n,u=e.getRow(o,r).getBitArray(),l=0;l<n;l++)i[s+l]^=u[l]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new J("Left and top must be nonnegative");if(i<1||n<1)throw new J("Height and width must be at least 1");var o=e+n,a=r+i;if(a>this.height||o>this.width)throw new J("The region must fit inside the matrix");for(var s=this.rowSize,u=this.bits,l=r;l<a;l++)for(var c=l*s,h=e;h<o;h++)u[c+Math.floor(h/32)]|=1<<(h&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new yt(this.width):r.clear();for(var n=this.rowSize,i=this.bits,o=e*n,a=0;a<n;a++)r.setBulk(a*32,i[o+a]);return r},t.prototype.setRow=function(e,r){Pe.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new yt(e),i=new yt(e),o=0,a=Math.floor((r+1)/2);o<a;o++)n=this.getRow(o,n),i=this.getRow(r-1-o,i),n.reverse(),i.reverse(),this.setRow(o,i),this.setRow(r-1-o,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,o=e,a=r,s=-1,u=-1,l=0;l<r;l++)for(var c=0;c<n;c++){var h=i[l*n+c];if(h!==0){if(l<a&&(a=l),l>u&&(u=l),c*32<o){for(var d=0;!(h<<31-d&4294967295);)d++;c*32+d<o&&(o=c*32+d)}if(c*32+31>s){for(var d=31;!(h>>>d);)d--;c*32+d>s&&(s=c*32+d)}}}return s<o||u<a?null:Int32Array.from([o,a,s-o+1,u-a+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,o=n%e*32,a=r[n],s=0;!(a<<31-s&4294967295);)s++;return o+=s,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),o=Math.floor(n%e)*32,a=r[n],s=31;!(a>>>s);)s--;return o+=s,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ut.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ut.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new ae,o=0,a=this.height;o<a;o++){for(var s=0,u=this.width;s<u;s++)i.append(this.get(s,o)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),mN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(t){mN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(cr),yN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_N=function(t){yN(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new yt(o):n.clear(),this.initArrays(o);for(var a=i.getRow(r,this.luminances),s=this.buckets,u=0;u<o;u++)s[(a[u]&255)>>e.LUMINANCE_SHIFT]++;var l=e.estimateBlackPoint(s);if(o<3)for(var u=0;u<o;u++)(a[u]&255)<l&&n.set(u);else for(var c=a[0]&255,h=a[1]&255,u=1;u<o-1;u++){var d=a[u+1]&255;(h*4-c-d)/2<l&&n.set(u),c=h,h=d}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),o=new rn(n,i);this.initArrays(n);for(var a=this.buckets,s=1;s<5;s++)for(var u=Math.floor(i*s/5),l=r.getRow(u,this.luminances),c=Math.floor(n*4/5),h=Math.floor(n/5);h<c;h++){var d=l[h]&255;a[d>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(a),m=r.getMatrix(),s=0;s<i;s++)for(var w=s*n,h=0;h<n;h++){var d=m[w+h]&255;d<p&&o.set(h,s)}return o},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,o=0,a=0,s=0;s<n;s++)r[s]>a&&(o=s,a=r[s]),r[s]>i&&(i=r[s]);for(var u=0,l=0,s=0;s<n;s++){var c=s-o,h=r[s]*c*c;h>l&&(u=s,l=h)}if(o>u){var d=o;o=u,u=d}if(u-o<=n/16)throw new V;for(var p=u-1,m=-1,s=u-1;s>o;s--){var w=s-o,h=w*w*(u-s)*(i-r[s]);h>m&&(p=s,m=h)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(cN),wN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PE=function(t){wN(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=r.getMatrix(),a=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&a++;var s=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&s++;var u=e.calculateBlackPoints(o,a,s,n,i),l=new rn(n,i);e.calculateThresholdForBlock(o,a,s,n,i,u,l),this.matrix=l}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,o,a,s,u){for(var l=a-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,h=0;h<i;h++){var d=h<<e.BLOCK_SIZE_POWER;d>l&&(d=l);for(var p=e.cap(h,2,i-3),m=0;m<n;m++){var w=m<<e.BLOCK_SIZE_POWER;w>c&&(w=c);for(var x=e.cap(m,2,n-3),v=0,y=-2;y<=2;y++){var E=s[p+y];v+=E[x-2]+E[x-1]+E[x]+E[x+1]+E[x+2]}var I=v/25;e.thresholdBlock(r,w,d,I,o,u)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,o,a,s){for(var u=0,l=i*a+n;u<e.BLOCK_SIZE;u++,l+=a)for(var c=0;c<e.BLOCK_SIZE;c++)(r[l+c]&255)<=o&&s.set(n+c,i+u)},e.calculateBlackPoints=function(r,n,i,o,a){for(var s=a-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,l=new Array(i),c=0;c<i;c++){l[c]=new Int32Array(n);var h=c<<e.BLOCK_SIZE_POWER;h>s&&(h=s);for(var d=0;d<n;d++){var p=d<<e.BLOCK_SIZE_POWER;p>u&&(p=u);for(var m=0,w=255,x=0,v=0,y=h*o+p;v<e.BLOCK_SIZE;v++,y+=o){for(var E=0;E<e.BLOCK_SIZE;E++){var I=r[y+E]&255;m+=I,I<w&&(w=I),I>x&&(x=I)}if(x-w>e.MIN_DYNAMIC_RANGE)for(v++,y+=o;v<e.BLOCK_SIZE;v++,y+=o)for(var E=0;E<e.BLOCK_SIZE;E++)m+=r[y+E]&255}var b=m>>e.BLOCK_SIZE_POWER*2;if(x-w<=e.MIN_DYNAMIC_RANGE&&(b=w/2,c>0&&d>0)){var D=(l[c-1][d]+2*l[c][d-1]+l[c-1][d-1])/4;w<D&&(b=D)}l[c][d]=b}}return l},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(_N),Eu=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new Fl("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Fl("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Fl("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new ae,n=0;n<this.height;n++){for(var i=this.getRow(n,e),o=0;o<this.width;o++){var a=i[o]&255,s=void 0;a<64?s="#":a<128?s="+":a<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t}(),xN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rf=function(t){xN(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),o=this.getWidth(),a=0;a<o;a++)i[a]=255-(i[a]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),o=0;o<n;o++)i[o]=255-(r[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,o){return new e(this.delegate.crop(r,n,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Eu),EN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AN=function(t){EN(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,o){o===void 0&&(o=!1);var a=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var s=0,u=0,l=r.length;s<l;s+=4,u++){var c=void 0,h=r[s+3];if(h===0)c=255;else{var d=r[s],p=r[s+1],m=r[s+2];c=306*d+601*p+117*m+512>>10}a[u]=c}else for(var s=0,u=0,w=r.length;s<w;s+=4,u++){var c=void 0,h=r[s+3];if(h===0)c=255;else{var d=r[s],p=r[s+1],m=r[s+2];c=306*d+601*p+117*m+512>>10}a[u]=255-c}return a},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new J("Requested row is outside the image: "+r);var i=this.getWidth(),o=r*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return t.prototype.crop.call(this,r,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),o=r*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*s),l=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*s);return n.width=u,n.height=l,i.translate(u/2,l/2),i.rotate(o),i.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Rf(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Eu),IN=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Kt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{l(n.next(c))}catch(h){a(h)}}function u(c){try{l(n.throw(c))}catch(h){a(h)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},qt=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},CN=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Aa=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Kt(this,void 0,void 0,function(){var e,r,n,i,o,a,s,u,l,c,h,d;return qt(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=CN(e),i=n.next();!i.done;i=n.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,u=o.label||"Video device "+(r.length+1),l=o.groupId,c={deviceId:s,label:u,kind:a,groupId:l},r.push(c))}catch(m){h={error:m}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Kt(this,void 0,void 0,function(){var e;return qt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new IN(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Kt(this,void 0,void 0,function(){var r;return qt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Kt(this,void 0,void 0,function(){return qt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Kt(this,void 0,void 0,function(){var n,i;return qt(this,function(o){switch(o.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Kt(this,void 0,void 0,function(){var n;return qt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Kt(this,void 0,void 0,function(){var n,i;return qt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=o.sent(),[4,this.decodeOnce(n)];case 2:return i=o.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Kt(this,void 0,void 0,function(){return qt(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Kt(this,void 0,void 0,function(){var i,o;return qt(this,function(a){switch(a.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Kt(this,void 0,void 0,function(){var i;return qt(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Kt(this,void 0,void 0,function(){var i;return qt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Kt(this,void 0,void 0,function(){var n;return qt(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Kt(this,void 0,void 0,function(){return qt(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ye("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ye("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Ye("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Ye("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Ye("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Ye("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ye("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ye("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ye("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Ye("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Kt(this,void 0,void 0,function(){return qt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Kt(this,void 0,void 0,function(){return qt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var o=function(a,s){if(i._stopAsyncDecode){s(new V("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);a(u)}catch(d){var l=r&&d instanceof V,c=d instanceof rt||d instanceof W,h=c&&n;if(l||h)return setTimeout(o,i._timeBetweenDecodingAttempts,a,s);s(d)}};return new Promise(function(a,s){return o(a,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var o=n.decode(e);r(o,null),setTimeout(i,n.timeBetweenScansMillis)}catch(u){r(null,u);var a=u instanceof rt||u instanceof W,s=u instanceof V;(a||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new AN(n,r),o=new PE(i);return new RE(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Gt=function(){function t(e,r,n,i,o,a){n===void 0&&(n=r==null?0:8*r.length),a===void 0&&(a=Pe.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=o,this.resultMetadata=null,a==null?this.timestamp=Pe.currentTimeMillis():this.timestamp=a}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Pe.arraycopy(r,0,n,0,r.length),Pe.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),m0;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(m0||(m0={}));const Z=m0;var y0;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(y0||(y0={}));const Tt=y0;var Pf=function(){function t(e,r,n,i,o,a){o===void 0&&(o=-1),a===void 0&&(a=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),ss=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new J;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),di=function(){function t(e,r){if(r.length===0)throw new J;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Pe.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,o=r.length;i!==o;i++){var a=r[i];n=ss.addOrSubtract(n,a)}return n}n=r[0];for(var s=r.length,u=this.field,i=1;i<s;i++)n=ss.addOrSubtract(u.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var o=new Int32Array(n.length),a=n.length-r.length;Pe.arraycopy(n,0,o,0,a);for(var s=a;s<n.length;s++)o[s]=ss.addOrSubtract(r[s-a],n[s]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,o=i.length,a=new Int32Array(n+o-1),s=this.field,u=0;u<n;u++)for(var l=r[u],c=0;c<o;c++)a[u+c]=ss.addOrSubtract(a[u+c],s.multiply(l,i[c]));return new t(s,a)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),o=this.coefficients,a=0;a<r;a++)i[a]=n.multiply(o[a],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new J;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,o=new Int32Array(i+e),a=this.field,s=0;s<i;s++)o[s]=a.multiply(n[s],r);return new t(a,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new J("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,o=e.getCoefficient(e.getDegree()),a=r.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),u=r.multiply(i.getCoefficient(i.getDegree()),a),l=e.multiplyByMonomial(s,u),c=r.buildMonomial(s,u);n=n.addOrSubtract(c),i=i.addOrSubtract(l)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),TN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NE=function(t){TN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(cr),SN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ir=function(t){SN(e,t);function e(r,n,i){var o=t.call(this)||this;o.primitive=r,o.size=n,o.generatorBase=i;for(var a=new Int32Array(n),s=1,u=0;u<n;u++)a[u]=s,s*=2,s>=n&&(s^=r,s&=n-1);o.expTable=a;for(var l=new Int32Array(n),u=0;u<n-1;u++)l[a[u]]=u;return o.logTable=l,o.zero=new di(o,Int32Array.from([0])),o.one=new di(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new J;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new di(this,i)},e.prototype.inverse=function(r){if(r===0)throw new NE;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+se.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(ss),RN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cl=function(t){RN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(cr),PN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Au=function(t){PN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(cr),Nf=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new di(n,e),o=new Int32Array(r),a=!0,s=0;s<r;s++){var u=i.evaluateAt(n.exp(s+n.getGeneratorBase()));o[o.length-1-s]=u,u!==0&&(a=!1)}if(!a)for(var l=new di(n,o),c=this.runEuclideanAlgorithm(n.buildMonomial(r,1),l,r),h=c[0],d=c[1],p=this.findErrorLocations(h),m=this.findErrorMagnitudes(d,p),s=0;s<p.length;s++){var w=e.length-1-n.log(p[s]);if(w<0)throw new cl("Bad error location");e[w]=ir.addOrSubtract(e[w],m[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var o=this.field,a=e,s=r,u=o.getZero(),l=o.getOne();s.getDegree()>=(n/2|0);){var c=a,h=u;if(a=s,u=l,a.isZero())throw new cl("r_{i-1} was zero");s=c;for(var d=o.getZero(),p=a.getCoefficient(a.getDegree()),m=o.inverse(p);s.getDegree()>=a.getDegree()&&!s.isZero();){var w=s.getDegree()-a.getDegree(),x=o.multiply(s.getCoefficient(s.getDegree()),m);d=d.addOrSubtract(o.buildMonomial(w,x)),s=s.addOrSubtract(a.multiplyByMonomial(w,x))}if(l=d.multiply(u).addOrSubtract(h),s.getDegree()>=a.getDegree())throw new Au("Division algorithm failed to reduce polynomial?")}var v=l.getCoefficient(0);if(v===0)throw new cl("sigmaTilde(0) was zero");var y=o.inverse(v),E=l.multiplyScalar(y),I=s.multiplyScalar(y);return[E,I]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,o=this.field,a=1;a<o.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=o.inverse(a),i++);if(i!==r)throw new cl("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),o=this.field,a=0;a<n;a++){for(var s=o.inverse(r[a]),u=1,l=0;l<n;l++)if(a!==l){var c=o.multiply(r[l],s),h=c&1?c&-2:c|1;u=o.multiply(u,h)}i[a]=o.multiply(e.evaluateAt(s),o.inverse(u)),o.getGeneratorBase()!==0&&(i[a]=o.multiply(i[a],s))}return i},t}(),xt;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(xt||(xt={}));var oy=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),o=t.convertBoolArrayToByteArray(i),a=t.getEncodedData(i),s=new Pf(o,a,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=xt.UPPER,i=xt.UPPER,o="",a=0;a<r;)if(i===xt.BINARY){if(r-a<5)break;var s=t.readCode(e,a,5);if(a+=5,s===0){if(r-a<11)break;s=t.readCode(e,a,11)+31,a+=11}for(var u=0;u<s;u++){if(r-a<8){a=r;break}var l=t.readCode(e,a,8);o+=he.castAsNonUtf8Char(l),a+=8}i=n}else{var c=i===xt.DIGIT?4:5;if(r-a<c)break;var l=t.readCode(e,a,c);a+=c;var h=t.getCharacter(i,l);h.startsWith("CTRL_")?(n=i,i=t.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=i)):(o+=h,i=n)}return o},t.getTable=function(e){switch(e){case"L":return xt.LOWER;case"P":return xt.PUNCT;case"M":return xt.MIXED;case"D":return xt.DIGIT;case"B":return xt.BINARY;case"U":default:return xt.UPPER}},t.getCharacter=function(e,r){switch(e){case xt.UPPER:return t.UPPER_TABLE[r];case xt.LOWER:return t.LOWER_TABLE[r];case xt.MIXED:return t.MIXED_TABLE[r];case xt.PUNCT:return t.PUNCT_TABLE[r];case xt.DIGIT:return t.DIGIT_TABLE[r];default:throw new Au("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=ir.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=ir.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=ir.AZTEC_DATA_10):(n=12,r=ir.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/n;if(o<i)throw new W;for(var a=e.length%n,s=new Int32Array(o),u=0;u<o;u++,a+=n)s[u]=t.readCode(e,a,n);try{var l=new Nf(r);l.decode(s,o-i)}catch(x){throw new W(x)}for(var c=(1<<n)-1,h=0,u=0;u<i;u++){var d=s[u];if(d===0||d===c)throw new W;(d===1||d===c-1)&&h++}for(var p=new Array(i*n-h),m=0,u=0;u<i;u++){var d=s[u];if(d===1||d===c-1)p.fill(d>1,m,m+n-1),m+=n-1;else for(var w=n-1;w>=0;--w)p[m++]=(d&1<<w)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,o=new Int32Array(i),a=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<o.length;s++)o[s]=s;else for(var u=i+1+2*se.truncDivision(se.truncDivision(i,2)-1,15),l=i/2,c=se.truncDivision(u,2),s=0;s<l;s++){var h=s+se.truncDivision(s,15);o[l-s-1]=c-h-1,o[l+s]=c+h+1}for(var s=0,d=0;s<n;s++){for(var p=(n-s)*4+(r?9:12),m=s*2,w=i-1-m,x=0;x<p;x++)for(var v=x*2,y=0;y<2;y++)a[d+v+y]=e.get(o[m+y],o[m+x]),a[d+2*p+v+y]=e.get(o[m+x],o[w-y]),a[d+4*p+v+y]=e.get(o[w-y],o[w-x]),a[d+6*p+v+y]=e.get(o[w-x],o[m+y]);d+=p*8}return a},t.readCode=function(e,r,n){for(var i=0,o=r;o<r+n;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),ve=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var o=e-n,a=r-i;return Math.sqrt(o*o+a*a)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var o=e[n];r+=o}return r},t}(),_0=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Y=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*_0.floatToIntBits(this.x)+_0.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,a,s;if(n>=r&&n>=i?(a=e[0],o=e[1],s=e[2]):i>=n&&i>=r?(a=e[1],o=e[0],s=e[2]):(a=e[2],o=e[0],s=e[1]),this.crossProductZ(o,a,s)<0){var u=o;o=s,s=u}e[0]=o,e[1]=a,e[2]=s},t.distance=function(e,r){return ve.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,o=r.y;return(n.x-i)*(e.y-o)-(n.y-o)*(e.x-i)},t}(),_p=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),NN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ON=function(t){NN(e,t);function e(r,n,i,o,a){var s=t.call(this,r,n)||this;return s.compact=i,s.nbDatablocks=o,s.nbLayers=a,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(_p),w0=function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=r/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,o=!1,a=!0,s=!1,u=!1,l=!1,c=!1,h=!1,d=this.width,p=this.height;a;){a=!1;for(var m=!0;(m||!u)&&r<d;)m=this.containsBlackPoint(n,i,r,!1),m?(r++,a=!0,u=!0):u||r++;if(r>=d){o=!0;break}for(var w=!0;(w||!l)&&i<p;)w=this.containsBlackPoint(e,r,i,!0),w?(i++,a=!0,l=!0):l||i++;if(i>=p){o=!0;break}for(var x=!0;(x||!c)&&e>=0;)x=this.containsBlackPoint(n,i,e,!1),x?(e--,a=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var v=!0;(v||!h)&&n>=0;)v=this.containsBlackPoint(e,r,n,!0),v?(n--,a=!0,h=!0):h||n--;if(n<0){o=!0;break}a&&(s=!0)}if(!o&&s){for(var y=r-e,E=null,I=1;E===null&&I<y;I++)E=this.getBlackPointOnSegment(e,i-I,e+I,i);if(E==null)throw new V;for(var b=null,I=1;b===null&&I<y;I++)b=this.getBlackPointOnSegment(e,n+I,e+I,n);if(b==null)throw new V;for(var D=null,I=1;D===null&&I<y;I++)D=this.getBlackPointOnSegment(r,n+I,r-I,n);if(D==null)throw new V;for(var C=null,I=1;C===null&&I<y;I++)C=this.getBlackPointOnSegment(r,i-I,r-I,i);if(C==null)throw new V;return this.centerEdges(C,E,D,b)}else throw new V},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var o=ve.round(ve.distance(e,r,n,i)),a=(n-e)/o,s=(i-r)/o,u=this.image,l=0;l<o;l++){var c=ve.round(e+l*a),h=ve.round(r+l*s);if(u.get(c,h))return new Y(c,h)}return null},t.prototype.centerEdges=function(e,r,n,i){var o=e.getX(),a=e.getY(),s=r.getX(),u=r.getY(),l=n.getX(),c=n.getY(),h=i.getX(),d=i.getY(),p=t.CORR;return o<this.width/2?[new Y(h-p,d+p),new Y(s+p,u+p),new Y(l-p,c-p),new Y(o+p,a-p)]:[new Y(h+p,d+p),new Y(s+p,u-p),new Y(l-p,c+p),new Y(o-p,a-p)]},t.prototype.containsBlackPoint=function(e,r,n,i){var o=this.image;if(i){for(var a=e;a<=r;a++)if(o.get(a,n))return!0}else for(var s=e;s<=r;s++)if(o.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),ay=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),o=!0,a=0;a<r.length&&o;a+=2){var s=Math.floor(r[a]),u=Math.floor(r[a+1]);if(s<-1||s>n||u<-1||u>i)throw new V;o=!1,s===-1?(r[a]=0,o=!0):s===n&&(r[a]=n-1,o=!0),u===-1?(r[a+1]=0,o=!0):u===i&&(r[a+1]=i-1,o=!0)}o=!0;for(var a=r.length-2;a>=0&&o;a-=2){var s=Math.floor(r[a]),u=Math.floor(r[a+1]);if(s<-1||s>n||u<-1||u>i)throw new V;o=!1,s===-1?(r[a]=0,o=!0):s===n&&(r[a]=n-1,o=!0),u===-1?(r[a+1]=0,o=!0):u===i&&(r[a+1]=i-1,o=!0)}},t}(),OE=function(){function t(e,r,n,i,o,a,s,u,l){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=o,this.a32=a,this.a13=s,this.a23=u,this.a33=l}return t.quadrilateralToQuadrilateral=function(e,r,n,i,o,a,s,u,l,c,h,d,p,m,w,x){var v=t.quadrilateralToSquare(e,r,n,i,o,a,s,u),y=t.squareToQuadrilateral(l,c,h,d,p,m,w,x);return y.times(v)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,u=this.a23,l=this.a31,c=this.a32,h=this.a33,d=0;d<r;d+=2){var p=e[d],m=e[d+1],w=o*p+u*m+h;e[d]=(n*p+a*m+l)/w,e[d+1]=(i*p+s*m+c)/w}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,u=this.a23,l=this.a31,c=this.a32,h=this.a33,d=e.length,p=0;p<d;p++){var m=e[p],w=r[p],x=o*m+u*w+h;e[p]=(n*m+a*w+l)/x,r[p]=(i*m+s*w+c)/x}},t.squareToQuadrilateral=function(e,r,n,i,o,a,s,u){var l=e-n+o-s,c=r-i+a-u;if(l===0&&c===0)return new t(n-e,o-n,e,i-r,a-i,r,0,0,1);var h=n-o,d=s-o,p=i-a,m=u-a,w=h*m-d*p,x=(l*m-d*c)/w,v=(h*c-l*p)/w;return new t(n-e+x*n,s-e+v*s,e,i-r+x*i,u-r+v*u,r,x,v,1)},t.quadrilateralToSquare=function(e,r,n,i,o,a,s,u){return t.squareToQuadrilateral(e,r,n,i,o,a,s,u).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),bN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DN=function(t){bN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,o,a,s,u,l,c,h,d,p,m,w,x,v,y,E,I){var b=OE.quadrilateralToQuadrilateral(o,a,s,u,l,c,h,d,p,m,w,x,v,y,E,I);return this.sampleGridWithTransform(r,n,i,b)},e.prototype.sampleGridWithTransform=function(r,n,i,o){if(n<=0||i<=0)throw new V;for(var a=new rn(n,i),s=new Float32Array(2*n),u=0;u<i;u++){for(var l=s.length,c=u+.5,h=0;h<l;h+=2)s[h]=h/2+.5,s[h+1]=c;o.transformPoints(s),ay.checkAndNudgePoints(r,s);try{for(var h=0;h<l;h+=2)r.get(Math.floor(s[h]),Math.floor(s[h+1]))&&a.set(h/2,u)}catch{throw new V}}return a},e}(ay),wp=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new DN,t}(),tr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Y(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),kN=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),a=this.getMatrixCornerPoints(n);return new ON(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new V;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,o=0;o<4;o++){var a=n[(this.shift+o)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(o,a,s){var u=(o>>r-2<<1)+(o&1);n=(n<<3)+u}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(se.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new V},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var o=n-i,a=new Int32Array(n),s=n-1;s>=0;--s)a[s]=e&15,e>>=4;try{var u=new Nf(ir.AZTEC_PARAM);u.decode(a,o)}catch{throw new V}for(var l=0,s=0;s<i;s++)l=(l<<4)+a[s];return l},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,a,1,-1),u=this.getFirstDifferent(n,a,1,1),l=this.getFirstDifferent(i,a,-1,1),c=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(c,s)*this.nbCenterLayers/(this.distancePoint(o,r)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(s,u,l,c))break}r=s,n=u,i=l,o=c,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;var d=new Y(r.getX()+.5,r.getY()-.5),p=new Y(n.getX()+.5,n.getY()+.5),m=new Y(i.getX()-.5,i.getY()+.5),w=new Y(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,p,m,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var o=new w0(this.image).detect();e=o[0],r=o[1],n=o[2],i=o[3]}catch{var a=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new tr(a+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new tr(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new tr(a-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new tr(a-7,s-7),!1,-1,-1).toResultPoint()}var u=ve.round((e.getX()+i.getX()+r.getX()+n.getX())/4),l=ve.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var o=new w0(this.image,15,u,l).detect();e=o[0],r=o[1],n=o[2],i=o[3]}catch{e=this.getFirstDifferent(new tr(u+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new tr(u+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new tr(u-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new tr(u-7,l-7),!1,-1,-1).toResultPoint()}return u=ve.round((e.getX()+i.getX()+r.getX()+n.getX())/4),l=ve.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new tr(u,l)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,o){var a=wp.getInstance(),s=this.getDimension(),u=s/2-this.nbCenterLayers,l=s/2+this.nbCenterLayers;return a.sampleGrid(e,s,s,u,u,l,u,l,l,u,l,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,o=this.distanceResultPoint(e,r),a=o/n,s=e.getX(),u=e.getY(),l=a*(r.getX()-e.getX())/o,c=a*(r.getY()-e.getY())/o,h=0;h<n;h++)this.image.get(ve.round(s+h*l),ve.round(u+h*c))&&(i|=1<<n-h-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var o=3;e=new tr(e.getX()-o,e.getY()+o),r=new tr(r.getX()-o,r.getY()-o),n=new tr(n.getX()+o,n.getY()-o),i=new tr(i.getX()+o,i.getY()+o);var a=this.getColor(i,e);if(a===0)return!1;var s=this.getColor(e,r);return s!==a||(s=this.getColor(r,n),s!==a)?!1:(s=this.getColor(n,i),s===a)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,o=(r.getY()-e.getY())/n,a=0,s=e.getX(),u=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),h=0;h<c;h++)s+=i,u+=o,this.image.get(ve.round(s),ve.round(u))!==l&&a++;var d=a/n;return d>.1&&d<.9?0:d<=.1===l?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var o=e.getX()+n,a=e.getY()+i;this.isValid(o,a)&&this.image.get(o,a)===r;)o+=n,a+=i;for(o-=n,a-=i;this.isValid(o,a)&&this.image.get(o,a)===r;)o+=n;for(o-=n;this.isValid(o,a)&&this.image.get(o,a)===r;)a+=i;return a-=i,new tr(o,a)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,l=new Y(s+i*o,u+i*a),c=new Y(s-i*o,u-i*a);o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var h=new Y(s+i*o,u+i*a),d=new Y(s-i*o,u-i*a),p=[l,h,c,d];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=ve.round(e.getX()),n=ve.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return ve.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return ve.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(se.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Nc=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new kN(e.getBlackMatrix()),o=null,a=null;try{var s=i.detectMirror(!1);o=s.getPoints(),this.reportFoundResultPoints(r,o),a=new oy().decode(s)}catch(h){n=h}if(a==null)try{var s=i.detectMirror(!0);o=s.getPoints(),this.reportFoundResultPoints(r,o),a=new oy().decode(s)}catch(h){throw n??h}var u=new Gt(a.getText(),a.getRawBytes(),a.getNumBits(),o,Z.AZTEC,Pe.currentTimeMillis()),l=a.getByteSegments();l!=null&&u.putMetadata(Tt.BYTE_SEGMENTS,l);var c=a.getECLevel();return c!=null&&u.putMetadata(Tt.ERROR_CORRECTION_LEVEL,c),u},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Ne.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,o,a){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),MN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){MN(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Nc,r)||this}return e})(Aa);var ct=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Ne.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,r),a=o.getResultMetadata(),s=270;a!==null&&a.get(Tt.ORIENTATION)===!0&&(s=s+a.get(Tt.ORIENTATION)%360),o.putMetadata(Tt.ORIENTATION,s);var u=o.getResultPoints();if(u!==null)for(var l=i.getHeight(),c=0;c<u.length;c++)u[c]=new Y(l-u[c].getY()-1,u[c].getX());return o}else throw new V}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),o=new yt(n),a=r&&r.get(Ne.TRY_HARDER)===!0,s=Math.max(1,i>>(a?8:5)),u;a?u=i:u=15;for(var l=Math.trunc(i/2),c=0;c<u;c++){var h=Math.trunc((c+1)/2),d=(c&1)===0,p=l+s*(d?h:-h);if(p<0||p>=i)break;try{o=e.getBlackRow(p,o)}catch{continue}for(var m=function(y){if(y===1&&(o.reverse(),r&&r.get(Ne.NEED_RESULT_POINT_CALLBACK)===!0)){var E=new Map;r.forEach(function(D,C){return E.set(C,D)}),E.delete(Ne.NEED_RESULT_POINT_CALLBACK),r=E}try{var I=w.decodeRow(p,o,r);if(y===1){I.putMetadata(Tt.ORIENTATION,180);var b=I.getResultPoints();b!==null&&(b[0]=new Y(n-b[0].getX()-1,b[0].getY()),b[1]=new Y(n-b[1].getX()-1,b[1].getY()))}return{value:I}}catch{}},w=this,x=0;x<2;x++){var v=m(x);if(typeof v=="object")return v.value}}throw new V},t.recordPattern=function(e,r,n){for(var i=n.length,o=0;o<i;o++)n[o]=0;var a=e.getSize();if(r>=a)throw new V;for(var s=!e.get(r),u=0,l=r;l<a;){if(e.get(l)!==s)n[u]++;else{if(++u===i)break;n[u]=1,s=!s}l++}if(!(u===i||u===i-1&&l===a))throw new V},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,o=e.get(r);r>0&&i>=0;)e.get(--r)!==o&&(i--,o=!o);if(i>=0)throw new V;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=r[s];if(o<a)return Number.POSITIVE_INFINITY;var u=o/a;n*=u;for(var l=0,c=0;c<i;c++){var h=e[c],d=r[c]*u,p=h>d?h-d:d-h;if(p>n)return Number.POSITIVE_INFINITY;l+=p}return l/o},t}(),LN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sy=function(t){LN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),s=i,u=!1,l=6,c=i;c<n;c++)if(r.get(c)!==u)a[o]++;else{if(o===l-1){for(var h=e.MAX_AVG_VARIANCE,d=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var m=ct.patternMatchVariance(a,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);m<h&&(h=m,d=p)}if(d>=0&&r.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,d]);s+=a[0]+a[1],a=a.slice(2,a.length),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,u=!u}throw new V},e.decodeCode=function(r,n,i){ct.recordPattern(r,i,n);for(var o=e.MAX_AVG_VARIANCE,a=-1,s=0;s<e.CODE_PATTERNS.length;s++){var u=e.CODE_PATTERNS[s],l=this.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,a=s)}if(a>=0)return a;throw new V},e.prototype.decodeRow=function(r,n,i){var o=i&&i.get(Ne.ASSUME_GS1)===!0,a=e.findStartPattern(n),s=a[2],u=0,l=new Uint8Array(20);l[u++]=s;var c;switch(s){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new W}for(var h=!1,d=!1,p="",m=a[0],w=a[1],x=Int32Array.from([0,0,0,0,0,0]),v=0,y=0,E=s,I=0,b=!0,D=!1,C=!1;!h;){var A=d;switch(d=!1,v=y,y=e.decodeCode(n,x,w),l[u++]=y,y!==e.CODE_STOP&&(b=!0),y!==e.CODE_STOP&&(I++,E+=I*y),m=w,w+=x.reduce(function(fr,$){return fr+$},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new W}switch(c){case e.CODE_CODE_A:if(y<64)C===D?p+=String.fromCharCode(" ".charCodeAt(0)+y):p+=String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else if(y<96)C===D?p+=String.fromCharCode(y-64):p+=String.fromCharCode(y+64),C=!1;else switch(y!==e.CODE_STOP&&(b=!1),y){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!D&&C?(D=!0,C=!1):D&&C?(D=!1,C=!1):C=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(y<96)C===D?p+=String.fromCharCode(" ".charCodeAt(0)+y):p+=String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else switch(y!==e.CODE_STOP&&(b=!1),y){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!D&&C?(D=!0,C=!1):D&&C?(D=!1,C=!1):C=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(p+="0"),p+=y;else switch(y!==e.CODE_STOP&&(b=!1),y){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}A&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=w-m;if(w=n.getNextUnset(w),!n.isRange(w,Math.min(n.getSize(),w+(w-m)/2),!1))throw new V;if(E-=I*v,E%103!==v)throw new rt;var N=p.length;if(N===0)throw new V;N>0&&b&&(c===e.CODE_CODE_C?p=p.substring(0,N-2):p=p.substring(0,N-1));for(var k=(a[1]+a[0])/2,M=m+R/2,O=l.length,Oe=new Uint8Array(O),Ot=0;Ot<O;Ot++)Oe[Ot]=l[Ot];var nn=[new Y(k,r),new Y(M,r)];return new Gt(p,Oe,0,nn,Z.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ct),FN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uy=function(t){FN(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var o,a,s,u,l=this.counters;l.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(n,l),h=n.getNextSet(c[1]),d=n.getSize(),p,m;do{e.recordPattern(n,h,l);var w=e.toNarrowWidePattern(l);if(w<0)throw new V;p=e.patternToChar(w),this.decodeRowResult+=p,m=h;try{for(var x=(o=void 0,Uh(l)),v=x.next();!v.done;v=x.next()){var y=v.value;h+=y}}catch(O){o={error:O}}finally{try{v&&!v.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}h=n.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var E=0;try{for(var I=Uh(l),b=I.next();!b.done;b=I.next()){var y=b.value;E+=y}}catch(O){s={error:O}}finally{try{b&&!b.done&&(u=I.return)&&u.call(I)}finally{if(s)throw s.error}}var D=h-m-E;if(h!==d&&D*2<E)throw new V;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,A=0,R=0;R<C;R++)A+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(A%43))throw new rt;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new V;var N;this.extendedMode?N=e.decodeExtended(this.decodeRowResult):N=this.decodeRowResult;var k=(c[1]+c[0])/2,M=m+E/2;return new Gt(N,null,0,[new Y(k,r),new Y(M,r)],Z.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),o=r.getNextSet(0),a=0,s=o,u=!1,l=n.length,c=o;c<i;c++)if(r.get(c)!==u)n[a]++;else{if(a===l-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((c-s)/2)),s,!1))return[s,c];s+=n[0]+n[1],n.copyWithin(0,2,2+a-1),n[a-1]=0,n[a]=0,a--}else a++;n[a]=1,u=!u}throw new V},e.toNarrowWidePattern=function(r){var n,i,o=r.length,a=0,s;do{var u=2147483647;try{for(var l=(n=void 0,Uh(r)),c=l.next();!c.done;c=l.next()){var h=c.value;h<u&&h>a&&(u=h)}}catch(w){n={error:w}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}a=u,s=0;for(var d=0,p=0,m=0;m<o;m++){var h=r[m];h>a&&(p|=1<<o-1-m,s++,d+=h)}if(s===3){for(var m=0;m<o&&s>0;m++){var h=r[m];if(h>a&&(s--,h*2>=d))return-1}return p}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new V},e.decodeExtended=function(r){for(var n=r.length,i="",o=0;o<n;o++){var a=r.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){var s=r.charAt(o+1),u="\0";switch(a){case"+":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new W;break;case"$":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new W;break;case"%":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s==="X"||s==="Y"||s==="Z")u="";else throw new W;break;case"/":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new W;break}i+=u,o++}else i+=a}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ct),BN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ly=function(t){BN(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var o,a,s,u,l=this.findAsteriskPattern(n),c=n.getNextSet(l[1]),h=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var p,m;do{e.recordPattern(n,c,d);var w=this.toPattern(d);if(w<0)throw new V;p=this.patternToChar(w),this.decodeRowResult+=p,m=c;try{for(var x=(o=void 0,jh(d)),v=x.next();!v.done;v=x.next()){var y=v.value;c+=y}}catch(R){o={error:R}}finally{try{v&&!v.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}c=n.getNextSet(c)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var E=0;try{for(var I=jh(d),b=I.next();!b.done;b=I.next()){var y=b.value;E+=y}}catch(R){s={error:R}}finally{try{b&&!b.done&&(u=I.return)&&u.call(I)}finally{if(s)throw s.error}}if(c===h||!n.get(c))throw new V;if(this.decodeRowResult.length<2)throw new V;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var D=this.decodeExtended(this.decodeRowResult),C=(l[1]+l[0])/2,A=m+E/2;return new Gt(D,null,0,[new Y(C,r),new Y(A,r)],Z.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var o=this.counters,a=i,s=!1,u=o.length,l=0,c=i;c<n;c++)if(r.get(c)!==s)o[l]++;else{if(l===u-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([a,c]);a+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,s=!s}throw new V},e.prototype.toPattern=function(r){var n,i,o=0;try{for(var a=jh(r),s=a.next();!s.done;s=a.next()){var u=s.value;o+=u}}catch(m){n={error:m}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}for(var l=0,c=r.length,h=0;h<c;h++){var d=Math.round(r[h]*9/o);if(d<1||d>4)return-1;if(h&1)l<<=d;else for(var p=0;p<d;p++)l=l<<1|1}return l},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new V},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",o=0;o<n;o++){var a=r.charAt(o);if(a>="a"&&a<="d"){if(o>=n-1)throw new W;var s=r.charAt(o+1),u="\0";switch(a){case"d":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new W;break;case"a":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new W;break;case"b":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s>="X"&&s<="Z")u=String.fromCharCode(127);else throw new W;break;case"c":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new W;break}i+=u,o++}else i+=a}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var o=1,a=0,s=n-1;s>=0;s--)a+=o*e.ALPHABET_STRING.indexOf(r.charAt(s)),++o>i&&(o=1);if(r.charAt(n)!==e.ALPHABET_STRING[a%47])throw new rt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(ct),VN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UN=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cy=function(t){VN(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var o,a,s=this.decodeStart(n),u=this.decodeEnd(n),l=new ae;e.decodeMiddle(n,s[1],u[0],l);var c=l.toString(),h=null;i!=null&&(h=i.get(Ne.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var d=c.length,p=!1,m=0;try{for(var w=UN(h),x=w.next();!x.done;x=w.next()){var v=x.value;if(d===v){p=!0;break}v>m&&(m=v)}}catch(I){o={error:I}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}if(!p&&d>m&&(p=!0),!p)throw new W;var y=[new Y(s[1],r),new Y(u[0],r)],E=new Gt(c,null,0,y,Z.ITF,new Date().getTime());return E},e.decodeMiddle=function(r,n,i,o){var a=new Int32Array(10),s=new Int32Array(5),u=new Int32Array(5);for(a.fill(0),s.fill(0),u.fill(0);n<i;){ct.recordPattern(r,n,a);for(var l=0;l<5;l++){var c=2*l;s[l]=a[c],u[l]=a[c+1]}var h=e.decodeDigit(s);o.append(h.toString()),h=this.decodeDigit(u),o.append(h.toString()),a.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var o=n-1;i>0&&o>=0&&!r.get(o);o--)i--;if(i!==0)throw new V},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new V;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(a){a instanceof V&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var o=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-o,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var o=i.length,a=new Int32Array(o),s=r.getSize(),u=!1,l=0,c=n;a.fill(0);for(var h=n;h<s;h++)if(r.get(h)!==u)a[l]++;else{if(l===o-1){if(ct.patternMatchVariance(a,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,h];c+=a[0]+a[1],Pe.arraycopy(a,2,a,0,l-1),a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,u=!u}throw new V},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,a=0;a<o;a++){var s=e.PATTERNS[a],u=ct.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);u<n?(n=u,i=a):u===n&&(i=-1)}if(i>=0)return i%10;throw new V},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ct),jN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ca=function(t){jN(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,o=0,a=Int32Array.from([0,0,0]);!n;){a=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,o,!1,this.START_END_PATTERN,a);var s=i[0];o=i[1];var u=s-(o-s);u>=0&&(n=r.isRange(u,s,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,o=n-1;o>=0;o-=2){var a=r.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new W;i+=a}i*=3;for(var o=n-2;o>=0;o-=2){var a=r.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new W;i+=a}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,o){return this.findGuardPattern(r,n,i,o,new Int32Array(o.length))},e.findGuardPattern=function(r,n,i,o,a){var s=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var u=0,l=n,c=o.length,h=i,d=n;d<s;d++)if(r.get(d)!==h)a[u]++;else{if(u===c-1){if(ct.patternMatchVariance(a,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([l,d]);l+=a[0]+a[1];for(var p=a.slice(2,a.length),m=0;m<u-1;m++)a[m]=p[m];a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,h=!h}throw new V},e.decodeDigit=function(r,n,i,o){this.recordPattern(r,i,n);for(var a=this.MAX_AVG_VARIANCE,s=-1,u=o.length,l=0;l<u;l++){var c=o[l],h=ct.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,s=l)}if(s>=0)return s;throw new V},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ct),zN=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HN=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(r,n,i),a=i.toString(),s=t.parseExtensionString(a),u=[new Y((n[0]+n[1])/2,e),new Y(o,e)],l=new Gt(a,null,0,u,Z.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&l.putAllMetadata(s),l},t.prototype.decodeMiddle=function(e,r,n){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),u=r[1],l=0,c=0;c<5&&u<s;c++){var h=ca.decodeDigit(e,a,u,ca.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var d=(i=void 0,zN(a)),p=d.next();!p.done;p=d.next()){var m=p.value;u+=m}}catch(x){i={error:x}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(l|=1<<4-c),c!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==5)throw new V;var w=this.determineCheckDigit(l);if(t.extensionChecksum(n.toString())!==w)throw new V;return u},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new V},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Tt.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),o=n%100,a=o<10?"0"+o:o.toString();return r+i+"."+a},t}(),WN=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GN=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(r,n,i),a=i.toString(),s=t.parseExtensionString(a),u=[new Y((n[0]+n[1])/2,e),new Y(o,e)],l=new Gt(a,null,0,u,Z.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&l.putAllMetadata(s),l},t.prototype.decodeMiddle=function(e,r,n){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),u=r[1],l=0,c=0;c<2&&u<s;c++){var h=ca.decodeDigit(e,a,u,ca.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var d=(i=void 0,WN(a)),p=d.next();!p.done;p=d.next()){var m=p.value;u+=m}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(l|=1<<1-c),c!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==2)throw new V;if(parseInt(n.toString())%4!==l)throw new V;return u},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Tt.ISSUE_NUMBER,parseInt(e)]])},t}(),$N=function(){function t(){}return t.decodeRow=function(e,r,n){var i=ca.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new HN;return o.decodeRow(e,r,i)}catch{var a=new GN;return a.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),XN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),at=function(t){XN(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],o=new Int32Array(i.length),a=0;a<i.length;a++)o[a]=i[i.length-a-1];e.L_AND_G_PATTERNS[n]=o}return r}return e.prototype.decodeRow=function(r,n,i){var o=e.findStartGuardPattern(n),a=i==null?null:i.get(Ne.NEED_RESULT_POINT_CALLBACK);if(a!=null){var s=new Y((o[0]+o[1])/2,r);a.foundPossibleResultPoint(s)}var u=this.decodeMiddle(n,o,this.decodeRowStringBuffer),l=u.rowOffset,c=u.resultString;if(a!=null){var h=new Y(l,r);a.foundPossibleResultPoint(h)}var d=e.decodeEnd(n,l);if(a!=null){var p=new Y((d[0]+d[1])/2,r);a.foundPossibleResultPoint(p)}var m=d[1],w=m+(m-d[0]);if(w>=n.getSize()||!n.isRange(m,w,!1))throw new V;var x=c.toString();if(x.length<8)throw new W;if(!e.checkChecksum(x))throw new rt;var v=(o[1]+o[0])/2,y=(d[1]+d[0])/2,E=this.getBarcodeFormat(),I=[new Y(v,r),new Y(y,r)],b=new Gt(x,null,0,I,E,new Date().getTime()),D=0;try{var C=$N.decodeRow(r,n,d[1]);b.putMetadata(Tt.UPC_EAN_EXTENSION,C.getText()),b.putAllMetadata(C.getResultMetadata()),b.addResultPoints(C.getResultPoints()),D=C.getText().length}catch{}var A=i==null?null:i.get(Ne.ALLOWED_EAN_EXTENSIONS);if(A!=null){var R=!1;for(var N in A)if(D.toString()===N){R=!0;break}if(!R)throw new V}return E===Z.EAN_13||Z.UPC_A,b},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,o=n-1;o>=0;o-=2){var a=r.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new W;i+=a}i*=3;for(var o=n-2;o>=0;o-=2){var a=r.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new W;i+=a}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(ca),KN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fy=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x0=function(t){KN(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var o,a,s,u,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),h=n[1],d=0,p=0;p<6&&h<c;p++){var m=at.decodeDigit(r,l,h,at.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+m%10);try{for(var w=(o=void 0,fy(l)),x=w.next();!x.done;x=w.next()){var v=x.value;h+=v}}catch(b){o={error:b}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}m>=10&&(d|=1<<5-p)}i=e.determineFirstDigit(i,d);var y=at.findGuardPattern(r,h,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0));h=y[1];for(var p=0;p<6&&h<c;p++){var m=at.decodeDigit(r,l,h,at.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+m);try{for(var E=(s=void 0,fy(l)),I=E.next();!I.done;I=E.next()){var v=I.value;h+=v}}catch(C){s={error:C}}finally{try{I&&!I.done&&(u=E.return)&&u.call(E)}finally{if(s)throw s.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return Z.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode("0".charCodeAt(0)+i)+r,r;throw new V},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(at),qN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hy=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dy=function(t){qN(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var o,a,s,u,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),h=n[1],d=0;d<4&&h<c;d++){var p=at.decodeDigit(r,l,h,at.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var m=(o=void 0,hy(l)),w=m.next();!w.done;w=m.next()){var x=w.value;h+=x}}catch(I){o={error:I}}finally{try{w&&!w.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}}var v=at.findGuardPattern(r,h,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0));h=v[1];for(var d=0;d<4&&h<c;d++){var p=at.decodeDigit(r,l,h,at.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var y=(s=void 0,hy(l)),E=y.next();!E.done;E=y.next()){var x=E.value;h+=x}}catch(D){s={error:D}}finally{try{E&&!E.done&&(u=y.return)&&u.call(y)}finally{if(s)throw s.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return Z.EAN_8},e}(at),YN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),py=function(t){YN(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new x0,r}return e.prototype.getBarcodeFormat=function(){return Z.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new Gt(n.substring(1),null,null,r.getResultPoints(),Z.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new V},e.prototype.reset=function(){this.ean13Reader.reset()},e}(at),QN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZN=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gy=function(t){QN(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var o,a,s=this.decodeMiddleCounters.map(function(x){return x});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=r.getSize(),l=n[1],c=0,h=0;h<6&&l<u;h++){var d=e.decodeDigit(r,s,l,e.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var p=(o=void 0,ZN(s)),m=p.next();!m.done;m=p.next()){var w=m.value;l+=w}}catch(x){o={error:x}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}d>=10&&(c|=1<<5-h)}return e.determineNumSysAndCheckDigit(new ae(i),c),l},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return at.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){r.insert(0,"0"+i),r.append("0"+o);return}throw V.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Z.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new ae;i.append(r.charAt(0));var o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(at),JN=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vy=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zh=function(t){JN(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(Ne.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Z.EAN_13)>-1&&o.push(new x0),i.indexOf(Z.UPC_A)>-1&&o.push(new py),i.indexOf(Z.EAN_8)>-1&&o.push(new dy),i.indexOf(Z.UPC_E)>-1&&o.push(new gy)),o.length===0&&(o.push(new x0),o.push(new py),o.push(new dy),o.push(new gy)),n.readers=o,n}return e.prototype.decodeRow=function(r,n,i){var o,a;try{for(var s=vy(this.readers),u=s.next();!u.done;u=s.next()){var l=u.value;try{var c=l.decodeRow(r,n,i),h=c.getBarcodeFormat()===Z.EAN_13&&c.getText().charAt(0)==="0",d=i==null?null:i.get(Ne.POSSIBLE_FORMATS),p=d==null||d.includes(Z.UPC_A);if(h&&p){var m=c.getRawBytes(),w=new Gt(c.getText().substring(1),m,m?m.length:null,c.getResultPoints(),Z.UPC_A);return w.putAllMetadata(c.getResultMetadata()),w}return c}catch{}}}catch(x){o={error:x}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}throw new V},e.prototype.reset=function(){var r,n;try{for(var i=vy(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;a.reset()}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e}(ct),eO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tO=function(t){eO(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var o=this.getValidRowData(n);if(!o)throw new V;var a=this.codaBarDecodeRow(o.row);if(!a)throw new V;return new Gt(a,null,0,[new Y(o.left,r),new Y(o.right,r)],Z.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var o=n.lastIndexOf(!0);if(o<=i)return null;n=n.slice(i,o+1);for(var a=[],s=n[0],u=1,l=1;l<n.length;l++)n[l]===s?u++:(s=n[l],a.push(u),u=1);return a.push(u),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:o}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(u,l){return(u+l)/2},0));r.length>0;){var o=r.splice(0,8).splice(0,7),a=o.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[a])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(ct),rO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nO=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fi=function(t){rO(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(ct.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new V},e.count=function(r){return ve.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,o=n[0],a=1;a<r.length;a++)n[a]>o&&(o=n[a],i=a);r[i]++},e.decrement=function(r,n){for(var i=0,o=n[0],a=1;a<r.length;a++)n[a]<o&&(o=n[a],i=a);r[i]--},e.isFinderPattern=function(r){var n,i,o=r[0]+r[1],a=o+r[2]+r[3],s=o/a;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;try{for(var c=nO(r),h=c.next();!h.done;h=c.next()){var d=h.value;d>l&&(l=d),d<u&&(u=d)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return l<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ct),Oc=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),bE=function(){function t(e,r,n,i,o){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Y(n,o)),this.resultPoints.push(new Y(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),iO=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Do=function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,o,a=0;try{for(var s=iO(e),u=s.next();!u.done;u=s.next()){var l=u.value;a+=l}}catch(y){i={error:y}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}for(var c=0,h=0,d=e.length,p=0;p<d-1;p++){var m=void 0;for(m=1,h|=1<<p;m<e[p];m++,h&=~(1<<p)){var w=t.combins(a-m-1,d-p-2);if(n&&h===0&&a-m-(d-p-1)>=d-p-1&&(w-=t.combins(a-m-(d-p),d-p-2)),d-p-1>1){for(var x=0,v=a-m-(d-p-2);v>r;v--)x+=t.combins(a-m-v-1,d-p-3);w-=x*(d-1-p)}else a-m>r&&w--;c+=w}a-=m}return c},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var o=1,a=1,s=e;s>n;s--)o*=s,a<=i&&(o/=a,a++);for(;a<=i;)o/=a,a++;return o},t}(),oO=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new yt(n),o=0,a=e[0],s=a.getRightChar().getValue(),u=11;u>=0;--u)s&1<<u&&i.set(o),o++;for(var u=1;u<e.length;++u){for(var l=e[u],c=l.getLeftChar().getValue(),h=11;h>=0;--h)c&1<<h&&i.set(o),o++;if(l.getRightChar()!==null)for(var d=l.getRightChar().getValue(),h=11;h>=0;--h)d&1<<h&&i.set(o),o++}return i},t}(),bi=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),xp=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),aO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),br=function(t){aO(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(xp),sO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Di=function(t){sO(e,t);function e(r,n,i){var o=t.call(this,r)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(xp),uO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vo=function(t){uO(e,t);function e(r,n,i){var o=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new W;return o.firstDigit=n,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(xp),fl=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lO=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,o,a,s,u,l;if(!e)return null;if(e.length<2)throw new V;var c=e.substring(0,2);try{for(var h=fl(t.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next()){var p=d.value;if(p[0]===c)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(D){r={error:D}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(e.length<3)throw new V;var m=e.substring(0,3);try{for(var w=fl(t.THREE_DIGIT_DATA_LENGTH),x=w.next();!x.done;x=w.next()){var p=x.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(D){i={error:D}}finally{try{x&&!x.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}try{for(var v=fl(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=v.next();!y.done;y=v.next()){var p=y.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(D){a={error:D}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(e.length<4)throw new V;var E=e.substring(0,4);try{for(var I=fl(t.FOUR_DIGIT_DATA_LENGTH),b=I.next();!b.done;b=I.next()){var p=b.value;if(p[0]===E)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(D){u={error:D}}finally{try{b&&!b.done&&(l=I.return)&&l.call(I)}finally{if(u)throw u.error}}throw new V},t.processFixedAI=function(e,r,n){if(n.length<e)throw new V;var i=n.substring(0,e);if(n.length<e+r)throw new V;var o=n.substring(e,e+r),a=n.substring(e+r),s="("+i+")"+o,u=t.parseFieldsInGeneralPurpose(a);return u==null?s:s+u},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),o;n.length<e+r?o=n.length:o=e+r;var a=n.substring(e,o),s=n.substring(o),u="("+i+")"+a,l=t.parseFieldsInGeneralPurpose(s);return l==null?u:u+l},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Bl=function(){function t(e){this.buffer=new ae,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var o=this.decodeGeneralPurposeField(n,i),a=lO.parseFieldsInGeneralPurpose(o.getNewString());if(a!=null&&e.append(a),o.isRemaining()?i=""+o.getRemainingValue():i=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new vo(this.information.getSize(),vo.FNC1,vo.FNC1):new vo(this.information.getSize(),r-1,vo.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new vo(e+7,i,o)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,o=0;o<n;++o)e.get(r+o)&&(i|=1<<n-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Di(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Di(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Di(this.current.getPosition(),this.buffer.toString()):r=new Di(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new bi(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Di(this.current.getPosition(),this.buffer.toString());return new bi(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new bi(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Di(this.current.getPosition(),this.buffer.toString());return new bi(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new bi(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Di(this.current.getPosition(),this.buffer.toString());return new bi(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new bi(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new br(e+5,br.FNC1);if(r>=5&&r<15)return new br(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new br(e+7,""+(n+1));if(n>=90&&n<116)return new br(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new W}return new br(e+8,o)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new br(e+5,br.FNC1);if(r>=5&&r<15)return new br(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new br(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Au("Decoding invalid alphanumeric value: "+n)}return new br(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),DE=function(){function t(e){this.information=e,this.generalDecoder=new Bl(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),cO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lr=function(t){cO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,o=0;o<13;o++){var a=r.charAt(o+n).charCodeAt(0)-"0".charCodeAt(0);i+=o&1?a:3*a}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e}(DE),fO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hO=function(t){fO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new ae;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=1+1+2,e}(Lr),dO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pO=function(t){dO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new ae;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=2+1+2,e}(DE),gO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vl=function(t){gO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,o);for(var a=this.checkWeight(o),s=1e5,u=0;u<5;++u)a/s===0&&r.append("0"),s/=10;r.append(a)},e}(Lr),vO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kE=function(t){vO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Vl.GTIN_SIZE+e.WEIGHT_SIZE)throw new V;var r=new ae;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+Vl.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=4+1,e.WEIGHT_SIZE=15,e}(Vl),mO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yO=function(t){mO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(kE),_O=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wO=function(t){_O(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(kE),xO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EO=function(t){xO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Lr.GTIN_SIZE)throw new V;var r=new ae;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Lr.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Lr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e}(Lr),AO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IO=function(t){AO(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Lr.GTIN_SIZE)throw new V;var r=new ae;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Lr.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Lr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Lr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(o.getNewString()),r.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Lr),CO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bn=function(t){CO(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.dateCode=i,o.firstAIdigits=n,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new V;var r=new ae;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var o=i%32;i/=32;var a=i%12+1;i/=12;var s=i;s/10===0&&r.append("0"),r.append(s),a/10===0&&r.append("0"),r.append(a),o/10===0&&r.append("0"),r.append(o)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=7+1,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Vl);function TO(t){try{if(t.get(1))return new hO(t);if(!t.get(2))return new pO(t);var e=Bl.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new yO(t);case 5:return new wO(t)}var r=Bl.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new EO(t);case 13:return new IO(t)}var n=Bl.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Bn(t,"310","11");case 57:return new Bn(t,"320","11");case 58:return new Bn(t,"310","13");case 59:return new Bn(t,"320","13");case 60:return new Bn(t,"310","15");case 61:return new Bn(t,"320","15");case 62:return new Bn(t,"310","17");case 63:return new Bn(t,"320","17")}}catch(i){throw console.log(i),new Au("unknown decoder: "+t)}}var my=function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),SO=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,o){r.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),RO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vn=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PO=function(t){RO(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof V){if(!this.pairs.length)throw new V;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(r,!1),o){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new V},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,o,a=n;a<this.rows.length;a++){var s=this.rows[a];this.pairs.length=0;try{for(var u=(i=void 0,Vn(r)),l=u.next();!l.done;l=u.next()){var c=l.value;this.pairs.push(c.getPairs())}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(r);h.push(s);try{return this.checkRows(h,a+1)}catch(d){console.log(d)}}}throw new V},e.isValidSequence=function(r){var n,i;try{for(var o=Vn(e.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var s=a.value;if(!(r.length>s.length)){for(var u=!0,l=0;l<r.length;l++)if(r[l].getFinderPattern().getValue()!==s[l]){u=!1;break}if(u)return!0}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,o=!1,a=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>r){a=s.isEquivalent(this.pairs);break}o=s.isEquivalent(this.pairs),i++}a||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new SO(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,o,a,s,u,l;try{for(var c=Vn(n),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.getPairs().length!==r.length){var p=!0;try{for(var m=(a=void 0,Vn(d.getPairs())),w=m.next();!w.done;w=m.next()){var x=w.value,v=!1;try{for(var y=(u=void 0,Vn(r)),E=y.next();!E.done;E=y.next()){var I=E.value;if(my.equals(x,I)){v=!0;break}}}catch(b){u={error:b}}finally{try{E&&!E.done&&(l=y.return)&&l.call(y)}finally{if(u)throw u.error}}v||(p=!1)}}catch(b){a={error:b}}finally{try{w&&!w.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}}}catch(b){i={error:b}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,o,a,s,u,l;try{for(var c=Vn(n),h=c.next();!h.done;h=c.next()){var d=h.value,p=!0;try{for(var m=(a=void 0,Vn(r)),w=m.next();!w.done;w=m.next()){var x=w.value,v=!1;try{for(var y=(u=void 0,Vn(d.getPairs())),E=y.next();!E.done;E=y.next()){var I=E.value;if(x.equals(I)){v=!0;break}}}catch(b){u={error:b}}finally{try{E&&!E.done&&(l=y.return)&&l.call(y)}finally{if(u)throw u.error}}if(!v){p=!1;break}}}catch(b){a={error:b}}finally{try{w&&!w.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(p)return!0}}catch(b){i={error:b}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=oO.buildBitArray(r),i=TO(n),o=i.parseInformation(),a=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),u=[a[0],a[1],s[0],s[1]];return new Gt(o,null,null,u,Z.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),a=2,s=1;s<this.pairs.size();++s){var u=this.pairs.get(s);o+=u.getLeftChar().getChecksumPortion(),a++;var l=u.getRightChar();l!=null&&(o+=l.getChecksumPortion(),a++)}o%=211;var c=211*(a-4)+o;return c===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var o=n.length%2===0;this.startFromEven&&(o=!o);var a,s=!0,u=-1;do this.findNextPair(r,n,u),a=this.parseFoundFinderPattern(r,i,o),a===null?u=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var l=this.decodeDataCharacter(r,a,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new V;var c;try{c=this.decodeDataCharacter(r,a,o,!1)}catch(h){c=null,console.log(h)}return new my(l,c,a,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a=r.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var u=n[n.length-1];s=u.getFinderPattern().getStartEnd()[1]}var l=n.length%2!==0;this.startFromEven&&(l=!l);for(var c=!1;s<a&&(c=!r.get(s),!!c);)s++;for(var h=0,d=s,p=s;p<a;p++)if(r.get(p)!==c)o[h]++;else{if(h===3){if(l&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=d,this.startEnd[1]=p;return}l&&e.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,c=!c}throw new V},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var o=r[i];r[i]=r[n-i-1],r[n-i-1]=o}},e.prototype.parseFoundFinderPattern=function(r,n,i){var o,a,s;if(i){for(var u=this.startEnd[0]-1;u>=0&&!r.get(u);)u--;u++,o=this.startEnd[0]-u,a=u,s=this.startEnd[1]}else a=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),o=s-this.startEnd[1];var l=this.getDecodeFinderCounters();Pe.arraycopy(l,0,l,1,l.length-1),l[0]=o;var c;try{c=this.parseFinderValue(l,e.FINDER_PATTERNS)}catch{return null}return new bE(c,[a,s],a,s,n)},e.prototype.decodeDataCharacter=function(r,n,i,o){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(o)e.recordPatternInReverse(r,n.getStartEnd()[0],a);else{e.recordPattern(r,n.getStartEnd()[1],a);for(var u=0,l=a.length-1;u<l;u++,l--){var c=a[u];a[u]=a[l],a[l]=c}}var h=17,d=ve.sum(new Int32Array(a))/h,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new V;for(var m=this.getOddCounts(),w=this.getEvenCounts(),x=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),u=0;u<a.length;u++){var y=1*a[u]/d,E=y+.5;if(E<1){if(y<.3)throw new V;E=1}else if(E>8){if(y>8.7)throw new V;E=8}var I=u/2;u&1?(w[I]=E,v[I]=y-E):(m[I]=E,x[I]=y-E)}this.adjustOddEvenCounts(h);for(var b=4*n.getValue()+(i?0:2)+(o?0:1)-1,D=0,C=0,u=m.length-1;u>=0;u--){if(e.isNotA1left(n,i,o)){var A=e.WEIGHTS[b][2*u];C+=m[u]*A}D+=m[u]}for(var R=0,u=w.length-1;u>=0;u--)if(e.isNotA1left(n,i,o)){var A=e.WEIGHTS[b][2*u+1];R+=w[u]*A}var N=C+R;if(D&1||D>13||D<4)throw new V;var k=(13-D)/2,M=e.SYMBOL_WIDEST[k],O=9-M,Oe=Do.getRSSvalue(m,M,!0),Ot=Do.getRSSvalue(w,O,!1),nn=e.EVEN_TOTAL_SUBSET[k],fr=e.GSUM[k],$=Oe*nn+Ot+fr;return new Oc($,N)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=ve.sum(new Int32Array(this.getOddCounts())),i=ve.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);var s=!1,u=!1;i>13?u=!0:i<4&&(s=!0);var l=n+i-r,c=(n&1)===1,h=(i&1)===0;if(l===1)if(c){if(h)throw new V;a=!0}else{if(!h)throw new V;u=!0}else if(l===-1)if(c){if(h)throw new V;o=!0}else{if(!h)throw new V;s=!0}else if(l===0){if(c){if(!h)throw new V;n<i?(o=!0,u=!0):(a=!0,s=!0)}else if(h)throw new V}else throw new V;if(o){if(a)throw new V;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(u)throw new V;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Fi),NO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OO=function(t){NO(e,t);function e(r,n,i){var o=t.call(this,r,n)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Oc),bO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yy=function(t){bO(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var o,a,s,u,l=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,l),n.reverse();var c=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var h=Hh(this.possibleLeftPairs),d=h.next();!d.done;d=h.next()){var p=d.value;if(p.getCount()>1)try{for(var m=(s=void 0,Hh(this.possibleRightPairs)),w=m.next();!w.done;w=m.next()){var x=w.value;if(x.getCount()>1&&e.checkChecksum(p,x))return e.constructResult(p,x)}}catch(v){s={error:v}}finally{try{w&&!w.done&&(u=m.return)&&u.call(m)}finally{if(s)throw s.error}}}}catch(v){o={error:v}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}throw new V},e.addOrTally=function(r,n){var i,o;if(n!=null){var a=!1;try{for(var s=Hh(r),u=s.next();!u.done;u=s.next()){var l=u.value;if(l.getValue()===n.getValue()){l.incrementCount(),a=!0;break}}}catch(c){i={error:c}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}a||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),o=new String(i).toString(),a=new ae,s=13-o.length;s>0;s--)a.append("0");a.append(o);for(var u=0,s=0;s<13;s++){var l=a.charAt(s).charCodeAt(0)-"0".charCodeAt(0);u+=s&1?l:3*l}u=10-u%10,u===10&&(u=0),a.append(u.toString());var c=r.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new Gt(a.toString(),null,0,[c[0],c[1],h[0],h[1]],Z.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(r,n,i,o){try{var a=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,i,n,a),u=o==null?null:o.get(Ne.NEED_RESULT_POINT_CALLBACK);if(u!=null){var l=(a[0]+a[1])/2;n&&(l=r.getSize()-1-l),u.foundPossibleResultPoint(new Y(l,i))}var c=this.decodeDataCharacter(r,s,!0),h=this.decodeDataCharacter(r,s,!1);return new OO(1597*c.getValue()+h.getValue(),c.getChecksumPortion()+4*h.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(i)ct.recordPatternInReverse(r,n.getStartEnd()[0],o);else{ct.recordPattern(r,n.getStartEnd()[1]+1,o);for(var s=0,u=o.length-1;s<u;s++,u--){var l=o[s];o[s]=o[u],o[u]=l}}for(var c=i?16:15,h=ve.sum(new Int32Array(o))/c,d=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),s=0;s<o.length;s++){var x=o[s]/h,v=Math.floor(x+.5);v<1?v=1:v>8&&(v=8);var y=Math.floor(s/2);s&1?(p[y]=v,w[y]=x-v):(d[y]=v,m[y]=x-v)}this.adjustOddEvenCounts(i,c);for(var E=0,I=0,s=d.length-1;s>=0;s--)I*=9,I+=d[s],E+=d[s];for(var b=0,D=0,s=p.length-1;s>=0;s--)b*=9,b+=p[s],D+=p[s];var C=I+3*b;if(i){if(E&1||E>12||E<4)throw new V;var A=(12-E)/2,R=e.OUTSIDE_ODD_WIDEST[A],N=9-R,k=Do.getRSSvalue(d,R,!1),M=Do.getRSSvalue(p,N,!0),O=e.OUTSIDE_EVEN_TOTAL_SUBSET[A],Oe=e.OUTSIDE_GSUM[A];return new Oc(k*O+M+Oe,C)}else{if(D&1||D>10||D<4)throw new V;var A=(10-D)/2,R=e.INSIDE_ODD_WIDEST[A],N=9-R,k=Do.getRSSvalue(d,R,!0),M=Do.getRSSvalue(p,N,!1),Ot=e.INSIDE_ODD_TOTAL_SUBSET[A],Oe=e.INSIDE_GSUM[A];return new Oc(M*Ot+k+Oe,C)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=r.getSize(),a=!1,s=0;s<o&&(a=!r.get(s),n!==a);)s++;for(var u=0,l=s,c=s;c<o;c++)if(r.get(c)!==a)i[u]++;else{if(u===3){if(Fi.isFinderPattern(i))return[l,c];l+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,a=!a}throw new V},e.prototype.parseFoundFinderPattern=function(r,n,i,o){for(var a=r.get(o[0]),s=o[0]-1;s>=0&&a!==r.get(s);)s--;s++;var u=o[0]-s,l=this.getDecodeFinderCounters(),c=new Int32Array(l.length);Pe.arraycopy(l,0,c,1,l.length-1),c[0]=u;var h=this.parseFinderValue(c,e.FINDER_PATTERNS),d=s,p=o[1];return i&&(d=r.getSize()-1-d,p=r.getSize()-1-p),new bE(h,[s,o[1]],d,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=ve.sum(new Int32Array(this.getOddCounts())),o=ve.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1,u=!1,l=!1;r?(i>12?s=!0:i<4&&(a=!0),o>12?l=!0:o<4&&(u=!0)):(i>11?s=!0:i<5&&(a=!0),o>10?l=!0:o<4&&(u=!0));var c=i+o-n,h=(i&1)===(r?1:0),d=(o&1)===1;if(c===1)if(h){if(d)throw new V;s=!0}else{if(!d)throw new V;l=!0}else if(c===-1)if(h){if(d)throw new V;a=!0}else{if(!d)throw new V;u=!0}else if(c===0){if(h){if(!d)throw new V;i<o?(a=!0,l=!0):(s=!0,u=!0)}else if(d)throw new V}else throw new V;if(a){if(s)throw new V;Fi.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Fi.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(l)throw new V;Fi.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&Fi.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Fi),DO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ko=function(t){DO(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(Ne.POSSIBLE_FORMATS):null,o=r&&r.get(Ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=r&&r.get(Ne.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Z.EAN_13)||i.includes(Z.UPC_A)||i.includes(Z.EAN_8)||i.includes(Z.UPC_E))&&n.readers.push(new zh(r)),i.includes(Z.CODE_39)&&n.readers.push(new uy(o,a)),i.includes(Z.CODE_93)&&n.readers.push(new ly),i.includes(Z.CODE_128)&&n.readers.push(new sy),i.includes(Z.ITF)&&n.readers.push(new cy),i.includes(Z.CODABAR)&&n.readers.push(new tO),i.includes(Z.RSS_14)&&n.readers.push(new yy),i.includes(Z.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new PO))),n.readers.length===0&&(n.readers.push(new zh(r)),n.readers.push(new uy),n.readers.push(new ly),n.readers.push(new zh(r)),n.readers.push(new sy),n.readers.push(new cy),n.readers.push(new yy)),n}return e.prototype.decodeRow=function(r,n,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(r,n,i)}catch{}throw new V},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(ct),kO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){kO(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new ko(n),r,n)||this}return e})(Aa);var _y=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},we=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ye=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),MO=function(){function t(e,r,n,i,o,a){var s,u;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=a;var l=0,c=a.getECCodewords(),h=a.getECBlocks();try{for(var d=_y(h),p=d.next();!p.done;p=d.next()){var m=p.value;l+=m.getCount()*(m.getDataCodewords()+c)}}catch(w){s={error:w}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if(e&1||r&1)throw new W;try{for(var o=_y(t.VERSIONS),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}throw new W},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new we(5,new ye(1,3))),new t(2,12,12,10,10,new we(7,new ye(1,5))),new t(3,14,14,12,12,new we(10,new ye(1,8))),new t(4,16,16,14,14,new we(12,new ye(1,12))),new t(5,18,18,16,16,new we(14,new ye(1,18))),new t(6,20,20,18,18,new we(18,new ye(1,22))),new t(7,22,22,20,20,new we(20,new ye(1,30))),new t(8,24,24,22,22,new we(24,new ye(1,36))),new t(9,26,26,24,24,new we(28,new ye(1,44))),new t(10,32,32,14,14,new we(36,new ye(1,62))),new t(11,36,36,16,16,new we(42,new ye(1,86))),new t(12,40,40,18,18,new we(48,new ye(1,114))),new t(13,44,44,20,20,new we(56,new ye(1,144))),new t(14,48,48,22,22,new we(68,new ye(1,174))),new t(15,52,52,24,24,new we(42,new ye(2,102))),new t(16,64,64,14,14,new we(56,new ye(2,140))),new t(17,72,72,16,16,new we(36,new ye(4,92))),new t(18,80,80,18,18,new we(48,new ye(4,114))),new t(19,88,88,20,20,new we(56,new ye(4,144))),new t(20,96,96,22,22,new we(68,new ye(4,174))),new t(21,104,104,24,24,new we(56,new ye(6,136))),new t(22,120,120,18,18,new we(68,new ye(6,175))),new t(23,132,132,20,20,new we(62,new ye(8,163))),new t(24,144,144,22,22,new we(62,new ye(8,156),new ye(2,155))),new t(25,8,18,6,16,new we(7,new ye(1,5))),new t(26,8,32,6,14,new we(11,new ye(1,10))),new t(27,12,26,10,24,new we(14,new ye(1,16))),new t(28,12,36,10,16,new we(18,new ye(1,22))),new t(29,16,36,14,16,new we(24,new ye(1,32))),new t(30,16,48,14,22,new we(28,new ye(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),LO=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new W;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new rn(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return MO.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),s=!1,u=!1,l=!1,c=!1;do if(n===o&&i===0&&!s)e[r++]=this.readCorner1(o,a)&255,n-=2,i+=2,s=!0;else if(n===o-2&&i===0&&a&3&&!u)e[r++]=this.readCorner2(o,a)&255,n-=2,i+=2,u=!0;else if(n===o+4&&i===2&&!(a&7)&&!l)e[r++]=this.readCorner3(o,a)&255,n-=2,i+=2,l=!0;else if(n===o-2&&i===0&&(a&7)===4&&!c)e[r++]=this.readCorner4(o,a)&255,n-=2,i+=2,c=!0;else{do n<o&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,o,a)&255),n-=2,i+=2;while(n>=0&&i<a);n+=1,i+=3;do n>=0&&i<a&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,o,a)&255),n+=2,i-=2;while(n<o&&i>=0);n+=3,i+=1}while(n<o||i<a);if(r!==this.version.getTotalCodewords())throw new W;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var o=0;return this.readModule(e-2,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e-2,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r,n,i)&&(o|=1),o<<=1,this.readModule(e,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e,r,n,i)&&(o|=1),o},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new J("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=r/i|0,s=n/o|0,u=a*i,l=s*o,c=new rn(l,u),h=0;h<a;++h)for(var d=h*i,p=0;p<s;++p)for(var m=p*o,w=0;w<i;++w)for(var x=h*(i+2)+1+w,v=d+w,y=0;y<o;++y){var E=p*(o+2)+1+y;if(e.get(E,x)){var I=m+y;c.set(I,v)}}return c},t}(),wy=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FO=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,o,a,s=r.getECBlocks(),u=0,l=s.getECBlocks();try{for(var c=wy(l),h=c.next();!h.done;h=c.next()){var d=h.value;u+=d.getCount()}}catch(Oe){n={error:Oe}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}var p=new Array(u),m=0;try{for(var w=wy(l),x=w.next();!x.done;x=w.next())for(var d=x.value,v=0;v<d.getCount();v++){var y=d.getDataCodewords(),E=s.getECCodewords()+y;p[m++]=new t(y,new Uint8Array(E))}}catch(Oe){o={error:Oe}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}for(var I=p[0].codewords.length,b=I-s.getECCodewords(),D=b-1,C=0,v=0;v<D;v++)for(var A=0;A<m;A++)p[A].codewords[v]=e[C++];for(var R=r.getVersionNumber()===24,N=R?8:m,A=0;A<N;A++)p[A].codewords[b-1]=e[C++];for(var k=p[0].codewords.length,v=b;v<k;v++)for(var A=0;A<m;A++){var M=R?(A+8)%m:A,O=R&&M>7?v-1:v;p[M].codewords[O]=e[C++]}if(C!==e.length)throw new J;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),ME=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new J(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,o=this.bytes;if(n>0){var a=8-n,s=e<a?e:a,u=a-s,l=255>>8-s<<u;r=(o[i]&l)>>u,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|o[i]&255,i++,e-=8;if(e>0){var u=8-e,l=255>>u<<u;r=r<<e|(o[i]&l)>>u,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),nt;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(nt||(nt={}));var BO=function(){function t(){}return t.decode=function(e){var r=new ME(e),n=new ae,i=new ae,o=new Array,a=nt.ASCII_ENCODE;do if(a===nt.ASCII_ENCODE)a=this.decodeAsciiSegment(r,n,i);else{switch(a){case nt.C40_ENCODE:this.decodeC40Segment(r,n);break;case nt.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case nt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case nt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case nt.BASE256_ENCODE:this.decodeBase256Segment(r,n,o);break;default:throw new W}a=nt.ASCII_ENCODE}while(a!==nt.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new Pf(e,n.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var o=e.readBits(8);if(o===0)throw new W;if(o<=128)return i&&(o+=128),r.append(String.fromCharCode(o-1)),nt.ASCII_ENCODE;if(o===129)return nt.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&r.append("0"),r.append(""+a)}else switch(o){case 230:return nt.C40_ENCODE;case 231:return nt.BASE256_ENCODE;case 232:r.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return nt.ANSIX12_ENCODE;case 239:return nt.TEXT_ENCODE;case 240:return nt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new W;break}}while(e.available()>0);return nt.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var u=i[s];switch(o){case 0:if(u<3)o=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var l=this.C40_BASIC_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else throw new W;break;case 1:n?(r.append(String.fromCharCode(u+128)),n=!1):r.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var l=this.C40_SHIFT2_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else switch(u){case 27:r.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new W}o=0;break;case 3:n?(r.append(String.fromCharCode(u+224)),n=!1):r.append(String.fromCharCode(u+96)),o=0;break;default:throw new W}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var u=i[s];switch(o){case 0:if(u<3)o=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var l=this.TEXT_BASIC_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else throw new W;break;case 1:n?(r.append(String.fromCharCode(u+128)),n=!1):r.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var l=this.TEXT_SHIFT2_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else switch(u){case 27:r.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new W}o=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var l=this.TEXT_SHIFT3_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l),o=0}else throw new W;break;default:throw new W}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var o=0;o<3;o++){var a=n[o];switch(a){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(a<14)r.append(String.fromCharCode(a+44));else if(a<40)r.append(String.fromCharCode(a+51));else throw new W;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,o=Math.floor(i/1600);n[0]=o,i-=o*1600,o=Math.floor(i/40),n[1]=o,n[2]=i-o*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}i&32||(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),a;if(o===0?a=e.available()/8|0:o<250?a=o:a=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),a<0)throw new W;for(var s=new Uint8Array(a),u=0;u<a;u++){if(e.available()<8)throw new W;s[u]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{r.append(Sr.decode(s,he.ISO88591))}catch(l){throw new Au("Platform does not support required encoding: "+l.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],t}(),VO=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UO=function(){function t(){this.rsDecoder=new Nf(ir.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new LO(e),o=i.getVersion(),a=i.readCodewords(),s=FO.getDataBlocks(a,o),u=0;try{for(var l=VO(s),c=l.next();!c.done;c=l.next()){var h=c.value;u+=h.getNumDataCodewords()}}catch(E){r={error:E}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=new Uint8Array(u),p=s.length,m=0;m<p;m++){var w=s[m],x=w.getCodewords(),v=w.getNumDataCodewords();this.correctErrors(x,v);for(var y=0;y<v;y++)d[y*p+m]=x[y]}return BO.decode(d)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new rt}for(var i=0;i<r;i++)e[i]=n[i]},t}(),jO=function(){function t(e){this.image=e,this.rectangleDetector=new w0(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new V;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],o=r[2],a=r[3],s=this.transitionsBetween(n,a)+1,u=this.transitionsBetween(o,a)+1;(s&1)===1&&(s+=1),(u&1)===1&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var l=t.sampleGrid(this.image,n,i,o,a,s,u);return new _p(l,[n,i,o,a])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),o=(r.getY()-e.getY())/(n+1);return new Y(e.getX()+i,e.getY()+o)},t.moveAway=function(e,r,n){var i=e.getX(),o=e.getY();return i<r?i-=1:i+=1,o<n?o-=1:o+=1,new Y(i,o)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],o=e[2],a=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),u=this.transitionsBetween(i,o),l=this.transitionsBetween(o,r),c=a,h=[o,r,n,i];return c>s&&(c=s,h[0]=r,h[1]=n,h[2]=i,h[3]=o),c>u&&(c=u,h[0]=n,h[1]=i,h[2]=o,h[3]=r),c>l&&(h[0]=i,h[1]=o,h[2]=r,h[3]=n),h},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(r,o),s=t.shiftPoint(n,i,(a+1)*4),u=t.shiftPoint(i,n,(a+1)*4),l=this.transitionsBetween(s,r),c=this.transitionsBetween(u,o);return l<c?(e[0]=r,e[1]=n,e[2]=i,e[3]=o):(e[0]=n,e[1]=i,e[2]=o,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(r,o),s=this.transitionsBetween(n,o),u=t.shiftPoint(r,n,(s+1)*4),l=t.shiftPoint(i,n,(a+1)*4);a=this.transitionsBetween(u,o),s=this.transitionsBetween(l,o);var c=new Y(o.getX()+(i.getX()-n.getX())/(a+1),o.getY()+(i.getY()-n.getY())/(a+1)),h=new Y(o.getX()+(r.getX()-n.getX())/(s+1),o.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(c))return this.isValid(h)?h:null;if(!this.isValid(h))return c;var d=this.transitionsBetween(u,c)+this.transitionsBetween(l,c),p=this.transitionsBetween(u,h)+this.transitionsBetween(l,h);return d>p?c:h},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(r,o)+1,s=this.transitionsBetween(i,o)+1,u=t.shiftPoint(r,n,s*4),l=t.shiftPoint(i,n,a*4);a=this.transitionsBetween(u,o)+1,s=this.transitionsBetween(l,o)+1,(a&1)===1&&(a+=1),(s&1)===1&&(s+=1);var c=(r.getX()+n.getX()+i.getX()+o.getX())/4,h=(r.getY()+n.getY()+i.getY()+o.getY())/4;r=t.moveAway(r,c,h),n=t.moveAway(n,c,h),i=t.moveAway(i,c,h),o=t.moveAway(o,c,h);var d,p;return u=t.shiftPoint(r,n,s*4),u=t.shiftPoint(u,o,a*4),d=t.shiftPoint(n,r,s*4),d=t.shiftPoint(d,i,a*4),l=t.shiftPoint(i,o,s*4),l=t.shiftPoint(l,n,a*4),p=t.shiftPoint(o,i,s*4),p=t.shiftPoint(p,r,a*4),[u,d,l,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,o,a,s){var u=wp.getInstance();return u.sampleGrid(e,a,s,.5,.5,a-.5,.5,a-.5,s-.5,.5,s-.5,r.getX(),r.getY(),o.getX(),o.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(r.getX()),a=Math.trunc(r.getY()),s=Math.abs(a-i)>Math.abs(o-n);if(s){var u=n;n=i,i=u,u=o,o=a,a=u}for(var l=Math.abs(o-n),c=Math.abs(a-i),h=-l/2,d=i<a?1:-1,p=n<o?1:-1,m=0,w=this.image.get(s?i:n,s?n:i),x=n,v=i;x!==o;x+=p){var y=this.image.get(s?v:x,s?x:v);if(y!==w&&(m++,w=y),h+=c,h>0){if(v===a)break;v+=d,h-=l}}return m},t}(),bc=function(){function t(){this.decoder=new UO}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(Ne.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(o),i=t.NO_POINTS}else{var a=new jO(e.getBlackMatrix()).detect();n=this.decoder.decode(a.getBits()),i=a.getPoints()}var s=n.getRawBytes(),u=new Gt(n.getText(),s,8*s.length,i,Z.DATA_MATRIX,Pe.currentTimeMillis()),l=n.getByteSegments();l!=null&&u.putMetadata(Tt.BYTE_SEGMENTS,l);var c=n.getECLevel();return c!=null&&u.putMetadata(Tt.ERROR_CORRECTION_LEVEL,c),u},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new V;var i=this.moduleSize(r,e),o=r[1],a=n[1],s=r[0],u=n[0],l=(u-s+1)/i,c=(a-o+1)/i;if(l<=0||c<=0)throw new V;var h=i/2;o+=h,s+=h;for(var d=new rn(l,c),p=0;p<c;p++)for(var m=o+p*i,w=0;w<l;w++)e.get(s+w*i,m)&&d.set(w,p);return d},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],o=e[1];i<n&&r.get(i,o);)i++;if(i===n)throw new V;var a=i-e[0];if(a===0)throw new V;return a},t.NO_POINTS=[],t}(),zO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){zO(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new bc,r)||this}return e})(Aa);var Mo;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Mo||(Mo={}));var HO=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Ye(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new J;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Mo.L,"L",1),t.M=new t(Mo.M,"M",0),t.Q=new t(Mo.Q,"Q",3),t.H=new t(Mo.H,"H",2),t}(),WO=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LE=function(){function t(e){this.errorCorrectionLevel=HO.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return se.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=WO(t.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var l=u.value,c=l[0];if(c===e||c===r)return new t(l[1]);var h=t.numBitsDiffering(e,c);h<o&&(a=l[1],o=h),e!==r&&(h=t.numBitsDiffering(r,c),h<o&&(a=l[1],o=h))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o<=3?new t(a):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),GO=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var o=GO(i),a=o.next();!a.done;a=o.next()){var s=a.value;n+=s.getCount()}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),P=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),$O=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$i=function(){function t(e,r){for(var n,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=o;var s=0,u=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var c=$O(l),h=c.next();!h.done;h=c.next()){var d=h.value;s+=d.getCount()*(d.getDataCodewords()+u)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new W;try{return this.getVersionForNumber((e-17)/4)}catch{throw new W}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new J;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var a=LE.numBitsDiffering(e,o);a<r&&(n=i+7,r=a)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new rn(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var o=this.alignmentPatternCenters[i]-2,a=0;a<n;a++)i===0&&(a===0||a===n-1)||i===n-1&&a===0||r.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new F(7,new P(1,19)),new F(10,new P(1,16)),new F(13,new P(1,13)),new F(17,new P(1,9))),new t(2,Int32Array.from([6,18]),new F(10,new P(1,34)),new F(16,new P(1,28)),new F(22,new P(1,22)),new F(28,new P(1,16))),new t(3,Int32Array.from([6,22]),new F(15,new P(1,55)),new F(26,new P(1,44)),new F(18,new P(2,17)),new F(22,new P(2,13))),new t(4,Int32Array.from([6,26]),new F(20,new P(1,80)),new F(18,new P(2,32)),new F(26,new P(2,24)),new F(16,new P(4,9))),new t(5,Int32Array.from([6,30]),new F(26,new P(1,108)),new F(24,new P(2,43)),new F(18,new P(2,15),new P(2,16)),new F(22,new P(2,11),new P(2,12))),new t(6,Int32Array.from([6,34]),new F(18,new P(2,68)),new F(16,new P(4,27)),new F(24,new P(4,19)),new F(28,new P(4,15))),new t(7,Int32Array.from([6,22,38]),new F(20,new P(2,78)),new F(18,new P(4,31)),new F(18,new P(2,14),new P(4,15)),new F(26,new P(4,13),new P(1,14))),new t(8,Int32Array.from([6,24,42]),new F(24,new P(2,97)),new F(22,new P(2,38),new P(2,39)),new F(22,new P(4,18),new P(2,19)),new F(26,new P(4,14),new P(2,15))),new t(9,Int32Array.from([6,26,46]),new F(30,new P(2,116)),new F(22,new P(3,36),new P(2,37)),new F(20,new P(4,16),new P(4,17)),new F(24,new P(4,12),new P(4,13))),new t(10,Int32Array.from([6,28,50]),new F(18,new P(2,68),new P(2,69)),new F(26,new P(4,43),new P(1,44)),new F(24,new P(6,19),new P(2,20)),new F(28,new P(6,15),new P(2,16))),new t(11,Int32Array.from([6,30,54]),new F(20,new P(4,81)),new F(30,new P(1,50),new P(4,51)),new F(28,new P(4,22),new P(4,23)),new F(24,new P(3,12),new P(8,13))),new t(12,Int32Array.from([6,32,58]),new F(24,new P(2,92),new P(2,93)),new F(22,new P(6,36),new P(2,37)),new F(26,new P(4,20),new P(6,21)),new F(28,new P(7,14),new P(4,15))),new t(13,Int32Array.from([6,34,62]),new F(26,new P(4,107)),new F(22,new P(8,37),new P(1,38)),new F(24,new P(8,20),new P(4,21)),new F(22,new P(12,11),new P(4,12))),new t(14,Int32Array.from([6,26,46,66]),new F(30,new P(3,115),new P(1,116)),new F(24,new P(4,40),new P(5,41)),new F(20,new P(11,16),new P(5,17)),new F(24,new P(11,12),new P(5,13))),new t(15,Int32Array.from([6,26,48,70]),new F(22,new P(5,87),new P(1,88)),new F(24,new P(5,41),new P(5,42)),new F(30,new P(5,24),new P(7,25)),new F(24,new P(11,12),new P(7,13))),new t(16,Int32Array.from([6,26,50,74]),new F(24,new P(5,98),new P(1,99)),new F(28,new P(7,45),new P(3,46)),new F(24,new P(15,19),new P(2,20)),new F(30,new P(3,15),new P(13,16))),new t(17,Int32Array.from([6,30,54,78]),new F(28,new P(1,107),new P(5,108)),new F(28,new P(10,46),new P(1,47)),new F(28,new P(1,22),new P(15,23)),new F(28,new P(2,14),new P(17,15))),new t(18,Int32Array.from([6,30,56,82]),new F(30,new P(5,120),new P(1,121)),new F(26,new P(9,43),new P(4,44)),new F(28,new P(17,22),new P(1,23)),new F(28,new P(2,14),new P(19,15))),new t(19,Int32Array.from([6,30,58,86]),new F(28,new P(3,113),new P(4,114)),new F(26,new P(3,44),new P(11,45)),new F(26,new P(17,21),new P(4,22)),new F(26,new P(9,13),new P(16,14))),new t(20,Int32Array.from([6,34,62,90]),new F(28,new P(3,107),new P(5,108)),new F(26,new P(3,41),new P(13,42)),new F(30,new P(15,24),new P(5,25)),new F(28,new P(15,15),new P(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new F(28,new P(4,116),new P(4,117)),new F(26,new P(17,42)),new F(28,new P(17,22),new P(6,23)),new F(30,new P(19,16),new P(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new F(28,new P(2,111),new P(7,112)),new F(28,new P(17,46)),new F(30,new P(7,24),new P(16,25)),new F(24,new P(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new F(30,new P(4,121),new P(5,122)),new F(28,new P(4,47),new P(14,48)),new F(30,new P(11,24),new P(14,25)),new F(30,new P(16,15),new P(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new F(30,new P(6,117),new P(4,118)),new F(28,new P(6,45),new P(14,46)),new F(30,new P(11,24),new P(16,25)),new F(30,new P(30,16),new P(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new F(26,new P(8,106),new P(4,107)),new F(28,new P(8,47),new P(13,48)),new F(30,new P(7,24),new P(22,25)),new F(30,new P(22,15),new P(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new F(28,new P(10,114),new P(2,115)),new F(28,new P(19,46),new P(4,47)),new F(28,new P(28,22),new P(6,23)),new F(30,new P(33,16),new P(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new F(30,new P(8,122),new P(4,123)),new F(28,new P(22,45),new P(3,46)),new F(30,new P(8,23),new P(26,24)),new F(30,new P(12,15),new P(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new P(3,117),new P(10,118)),new F(28,new P(3,45),new P(23,46)),new F(30,new P(4,24),new P(31,25)),new F(30,new P(11,15),new P(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new P(7,116),new P(7,117)),new F(28,new P(21,45),new P(7,46)),new F(30,new P(1,23),new P(37,24)),new F(30,new P(19,15),new P(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new P(5,115),new P(10,116)),new F(28,new P(19,47),new P(10,48)),new F(30,new P(15,24),new P(25,25)),new F(30,new P(23,15),new P(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new P(13,115),new P(3,116)),new F(28,new P(2,46),new P(29,47)),new F(30,new P(42,24),new P(1,25)),new F(30,new P(23,15),new P(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new P(17,115)),new F(28,new P(10,46),new P(23,47)),new F(30,new P(10,24),new P(35,25)),new F(30,new P(19,15),new P(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new P(17,115),new P(1,116)),new F(28,new P(14,46),new P(21,47)),new F(30,new P(29,24),new P(19,25)),new F(30,new P(11,15),new P(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new P(13,115),new P(6,116)),new F(28,new P(14,46),new P(23,47)),new F(30,new P(44,24),new P(7,25)),new F(30,new P(59,16),new P(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new P(12,121),new P(7,122)),new F(28,new P(12,47),new P(26,48)),new F(30,new P(39,24),new P(14,25)),new F(30,new P(22,15),new P(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new P(6,121),new P(14,122)),new F(28,new P(6,47),new P(34,48)),new F(30,new P(46,24),new P(10,25)),new F(30,new P(2,15),new P(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new P(17,122),new P(4,123)),new F(28,new P(29,46),new P(14,47)),new F(30,new P(49,24),new P(10,25)),new F(30,new P(24,15),new P(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new P(4,122),new P(18,123)),new F(28,new P(13,46),new P(32,47)),new F(30,new P(48,24),new P(14,25)),new F(30,new P(42,15),new P(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new P(20,117),new P(4,118)),new F(28,new P(40,47),new P(7,48)),new F(30,new P(43,24),new P(22,25)),new F(30,new P(10,15),new P(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new P(19,118),new P(6,119)),new F(28,new P(18,47),new P(31,48)),new F(30,new P(34,24),new P(34,25)),new F(30,new P(20,15),new P(61,16)))],t}(),dt;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(dt||(dt={}));var xy=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[dt.DATA_MASK_000,new t(dt.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[dt.DATA_MASK_001,new t(dt.DATA_MASK_001,function(e,r){return(e&1)===0})],[dt.DATA_MASK_010,new t(dt.DATA_MASK_010,function(e,r){return r%3===0})],[dt.DATA_MASK_011,new t(dt.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[dt.DATA_MASK_100,new t(dt.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[dt.DATA_MASK_101,new t(dt.DATA_MASK_101,function(e,r){return e*r%6===0})],[dt.DATA_MASK_110,new t(dt.DATA_MASK_110,function(e,r){return e*r%6<3})],[dt.DATA_MASK_111,new t(dt.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),XO=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new W;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),o=0,a=i-7,n=i-1;n>=a;n--)o=this.copyBit(8,n,o);for(var r=i-8;r<i;r++)o=this.copyBit(r,8,o);if(this.parsedFormatInfo=LE.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return $i.getVersionForNumber(r);for(var n=0,i=e-11,o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(a,o,n);var s=$i.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(a,o,n);if(s=$i.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new W},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=xy.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var o=r.buildFunctionPattern(),a=!0,s=new Uint8Array(r.getTotalCodewords()),u=0,l=0,c=0,h=i-1;h>0;h-=2){h===6&&h--;for(var d=0;d<i;d++)for(var p=a?i-1-d:d,m=0;m<2;m++)o.get(h-m,p)||(c++,l<<=1,this.bitMatrix.get(h-m,p)&&(l|=1),c===8&&(s[u++]=l,c=0,l=0));a=!a}if(u!==r.getTotalCodewords())throw new W;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=xy.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,o=e.getHeight();i<o;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t}(),Ey=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KO=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,o,a,s;if(e.length!==r.getTotalCodewords())throw new J;var u=r.getECBlocksForLevel(n),l=0,c=u.getECBlocks();try{for(var h=Ey(c),d=h.next();!d.done;d=h.next()){var p=d.value;l+=p.getCount()}}catch(O){i={error:O}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var m=new Array(l),w=0;try{for(var x=Ey(c),v=x.next();!v.done;v=x.next())for(var p=v.value,y=0;y<p.getCount();y++){var E=p.getDataCodewords(),I=u.getECCodewordsPerBlock()+E;m[w++]=new t(E,new Uint8Array(I))}}catch(O){a={error:O}}finally{try{v&&!v.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}for(var b=m[0].codewords.length,D=m.length-1;D>=0;){var C=m[D].codewords.length;if(C===b)break;D--}D++;for(var A=b-u.getECCodewordsPerBlock(),R=0,y=0;y<A;y++)for(var N=0;N<w;N++)m[N].codewords[y]=e[R++];for(var N=D;N<w;N++)m[N].codewords[A]=e[R++];for(var k=m[0].codewords.length,y=A;y<k;y++)for(var N=0;N<w;N++){var M=N<D?y:y+1;m[N].codewords[M]=e[R++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),wr;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(wr||(wr={}));var Me=function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new J;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(wr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(wr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(wr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(wr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(wr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(wr.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(wr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(wr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(wr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(wr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),qO=function(){function t(){}return t.decode=function(e,r,n,i){var o=new ME(e),a=new ae,s=new Array,u=-1,l=-1;try{var c=null,h=!1,d=void 0;do{if(o.available()<4)d=Me.TERMINATOR;else{var p=o.readBits(4);d=Me.forBits(p)}switch(d){case Me.TERMINATOR:break;case Me.FNC1_FIRST_POSITION:case Me.FNC1_SECOND_POSITION:h=!0;break;case Me.STRUCTURED_APPEND:if(o.available()<16)throw new W;u=o.readBits(8),l=o.readBits(8);break;case Me.ECI:var m=t.parseECIValue(o);if(c=st.getCharacterSetECIByValue(m),c===null)throw new W;break;case Me.HANZI:var w=o.readBits(4),x=o.readBits(d.getCharacterCountBits(r));w===t.GB2312_SUBSET&&t.decodeHanziSegment(o,a,x);break;default:var v=o.readBits(d.getCharacterCountBits(r));switch(d){case Me.NUMERIC:t.decodeNumericSegment(o,a,v);break;case Me.ALPHANUMERIC:t.decodeAlphanumericSegment(o,a,v,h);break;case Me.BYTE:t.decodeByteSegment(o,a,v,c,s,i);break;case Me.KANJI:t.decodeKanjiSegment(o,a,v);break;default:throw new W}break}}while(d!==Me.TERMINATOR)}catch{throw new W}return new Pf(e,a.toString(),s.length===0?null:s,n===null?null:n.toString(),u,l)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new W;for(var i=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),s=a/96<<8&4294967295|a%96;s<959?s+=41377:s+=42657,i[o]=s>>8&255,i[o+1]=s&255,o+=2,n--}try{r.append(Sr.decode(i,he.GB2312))}catch(u){throw new W(u)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new W;for(var i=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),s=a/192<<8&4294967295|a%192;s<7936?s+=33088:s+=49472,i[o]=s>>8,i[o+1]=s,o+=2,n--}try{r.append(Sr.decode(i,he.SHIFT_JIS))}catch(u){throw new W(u)}},t.decodeByteSegment=function(e,r,n,i,o,a){if(8*n>e.available())throw new W;for(var s=new Uint8Array(n),u=0;u<n;u++)s[u]=e.readBits(8);var l;i===null?l=he.guessEncoding(s,a):l=i.getName();try{r.append(Sr.decode(s,l))}catch(c){throw new W(c)}o.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new W;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var o=r.length();n>1;){if(e.available()<11)throw new W;var a=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(a/45))),r.append(t.toAlphaNumericChar(a%45)),n-=2}if(n===1){if(e.available()<6)throw new W;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=o;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,String.fromCharCode(29)))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new W;var i=e.readBits(10);if(i>=1e3)throw new W;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new W;var o=e.readBits(7);if(o>=100)throw new W;r.append(t.toAlphaNumericChar(Math.floor(o/10))),r.append(t.toAlphaNumericChar(o%10))}else if(n===1){if(e.available()<4)throw new W;var a=e.readBits(4);if(a>=10)throw new W;r.append(t.toAlphaNumericChar(a))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new W},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),FE=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),Ay=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YO=function(){function t(){this.rsDecoder=new Nf(ir.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(rn.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new XO(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(a){i=a}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,r);return o.setOther(new FE(!0)),o}catch(a){throw i!==null?i:a}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,o,a,s=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),c=KO.getDataBlocks(l,s,u),h=0;try{for(var d=Ay(c),p=d.next();!p.done;p=d.next()){var m=p.value;h+=m.getNumDataCodewords()}}catch(D){n={error:D}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var w=new Uint8Array(h),x=0;try{for(var v=Ay(c),y=v.next();!y.done;y=v.next()){var m=y.value,E=m.getCodewords(),I=m.getNumDataCodewords();this.correctErrors(E,I);for(var b=0;b<I;b++)w[x++]=E[b]}}catch(D){o={error:D}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}return qO.decode(w,s,u,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new rt}for(var i=0;i<r;i++)e[i]=n[i]},t}(),QO=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZO=function(t){QO(e,t);function e(r,n,i){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var o=Math.abs(r-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var o=(this.getX()+n)/2,a=(this.getY()+r)/2,s=(this.estimatedModuleSize+i)/2;return new e(o,a,s)},e}(Y),JO=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eb=function(){function t(e,r,n,i,o,a,s){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=o,this.moduleSize=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,o=this.startY+r/2,a=new Int32Array(3),s=this.image,u=0;u<r;u++){var l=o+(u&1?-Math.floor((u+1)/2):Math.floor((u+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var c=e;c<i&&!s.get(c,l);)c++;for(var h=0;c<i;){if(s.get(c,l))if(h===1)a[1]++;else if(h===2){if(this.foundPatternCross(a)){var d=this.handlePossibleCenter(a,l,c);if(d!==null)return d}a[0]=a[2],a[1]=1,a[2]=0,h=1}else a[++h]++;else h===1&&h++,a[h]++;c++}if(this.foundPatternCross(a)){var d=this.handlePossibleCenter(a,l,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var o=this.image,a=o.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=e;u>=0&&o.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&!o.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&o.get(r,u)&&s[1]<=n;)s[1]++,u++;if(u===a||s[1]>n)return NaN;for(;u<a&&!o.get(r,u)&&s[2]<=n;)s[2]++,u++;if(s[2]>n)return NaN;var l=s[0]+s[1]+s[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,o,a=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),u=this.crossCheckVertical(r,s,2*e[1],a);if(!isNaN(u)){var l=(e[0]+e[1]+e[2])/3;try{for(var c=JO(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.aboutEquals(l,u,s))return d.combineEstimate(u,s,l)}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var p=new ZO(s,u,l);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),tb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rb=function(t){tb(e,t);function e(r,n,i,o){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a.count=o,o===void 0&&(a.count=1),a}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var o=Math.abs(r-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var o=this.count+1,a=(this.count*this.getX()+n)/o,s=(this.count*this.getY()+r)/o,u=(this.count*this.estimatedModuleSize+i)/o;return new e(a,s,u,o)},e}(Y),nb=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Ka=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ib=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Ne.TRY_HARDER)!==void 0,n=e!=null&&e.get(Ne.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),a=i.getWidth(),s=Math.floor(3*o/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var u=!1,l=new Int32Array(5),c=s-1;c<o&&!u;c+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var h=0,d=0;d<a;d++)if(i.get(d,c))(h&1)===1&&h++,l[h]++;else if(h&1)l[h]++;else if(h===4)if(t.foundPatternCross(l)){var p=this.handlePossibleCenter(l,c,d,n);if(p===!0)if(s=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>l[2]&&(c+=m-l[2]-s,d=a-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,h=3;continue}h=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,h=3;else l[++h]++;if(t.foundPatternCross(l)){var p=this.handlePossibleCenter(l,c,a,n);p===!0&&(s=l[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return Y.orderBestPatterns(w),new nb(w)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var o=r/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var o=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&r>=a&&s.get(r-a,e-a);)o[2]++,a++;if(e<a||r<a)return!1;for(;e>=a&&r>=a&&!s.get(r-a,e-a)&&o[1]<=n;)o[1]++,a++;if(e<a||r<a||o[1]>n)return!1;for(;e>=a&&r>=a&&s.get(r-a,e-a)&&o[0]<=n;)o[0]++,a++;if(o[0]>n)return!1;var u=s.getHeight(),l=s.getWidth();for(a=1;e+a<u&&r+a<l&&s.get(r+a,e+a);)o[2]++,a++;if(e+a>=u||r+a>=l)return!1;for(;e+a<u&&r+a<l&&!s.get(r+a,e+a)&&o[3]<n;)o[3]++,a++;if(e+a>=u||r+a>=l||o[3]>=n)return!1;for(;e+a<u&&r+a<l&&s.get(r+a,e+a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return!1;var c=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(c-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var o=this.image,a=o.getHeight(),s=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(r,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&o.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&o.get(r,u);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!o.get(r,u)&&s[3]<n;)s[3]++,u++;if(u===a||s[3]>=n)return NaN;for(;u<a&&o.get(r,u)&&s[4]<n;)s[4]++,u++;if(s[4]>=n)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var o=this.image,a=o.getWidth(),s=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(u,r);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(u,r)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&o.get(u,r)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&o.get(u,r);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!o.get(u,r)&&s[3]<n;)s[3]++,u++;if(u===a||s[3]>=n)return NaN;for(;u<a&&o.get(u,r)&&s[4]<n;)s[4]++,u++;if(s[4]>=n)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],a=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(a),e[2],o);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],o),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],o)))){for(var u=o/7,l=!1,c=this.possibleCenters,h=0,d=c.length;h<d;h++){var p=c[h];if(p.aboutEquals(u,s,a)){c[h]=p.combineEstimate(s,a,u),l=!0;break}}if(!l){var m=new rb(a,s,u);c.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var o=Ka(this.possibleCenters),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,o=0,a=0,s=this.possibleCenters.length;try{for(var u=Ka(this.possibleCenters),l=u.next();!l.done;l=u.next()){var c=l.value;c.getCount()>=t.CENTER_QUORUM&&(o++,a+=c.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if(o<3)return!1;var h=a/s,d=0;try{for(var p=Ka(this.possibleCenters),m=p.next();!m.done;m=p.next()){var c=m.value;d+=Math.abs(c.getEstimatedModuleSize()-h)}}catch(w){n={error:w}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return d<=.05*a},t.prototype.selectBestPatterns=function(){var e,r,n,i,o=this.possibleCenters.length;if(o<3)throw new V;var a=this.possibleCenters,s;if(o>3){var u=0,l=0;try{for(var c=Ka(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value,p=d.getEstimatedModuleSize();u+=p,l+=p*p}}catch(b){e={error:b}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}s=u/o;var m=Math.sqrt(l/o-s*s);a.sort(function(b,D){var C=Math.abs(D.getEstimatedModuleSize()-s),A=Math.abs(b.getEstimatedModuleSize()-s);return C<A?-1:C>A?1:0});for(var w=Math.max(.2*s,m),x=0;x<a.length&&a.length>3;x++){var v=a[x];Math.abs(v.getEstimatedModuleSize()-s)>w&&(a.splice(x,1),x--)}}if(a.length>3){var u=0;try{for(var y=Ka(a),E=y.next();!E.done;E=y.next()){var I=E.value;u+=I.getEstimatedModuleSize()}}catch(D){n={error:D}}finally{try{E&&!E.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}s=u/a.length,a.sort(function(D,C){if(C.getCount()===D.getCount()){var A=Math.abs(C.getEstimatedModuleSize()-s),R=Math.abs(D.getEstimatedModuleSize()-s);return A<R?1:A>R?-1:0}else return C.getCount()-D.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),ob=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ne.NEED_RESULT_POINT_CALLBACK);var r=new ib(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(r,n,i);if(o<1)throw new V("No pattern found in proccess finder.");var a=t.computeDimension(r,n,i,o),s=$i.getProvisionalVersionForDimension(a),u=s.getDimensionForVersion()-7,l=null;if(s.getAlignmentPatternCenters().length>0)for(var c=n.getX()-r.getX()+i.getX(),h=n.getY()-r.getY()+i.getY(),d=1-3/u,p=Math.floor(r.getX()+d*(c-r.getX())),m=Math.floor(r.getY()+d*(h-r.getY())),w=4;w<=16;w<<=1)try{l=this.findAlignmentInRegion(o,p,m,w);break}catch(E){if(!(E instanceof V))throw E}var x=t.createTransform(r,n,i,l,a),v=t.sampleGrid(this.image,x,a),y;return l===null?y=[i,r,n]:y=[i,r,n,l],new _p(v,y)},t.createTransform=function(e,r,n,i,o){var a=o-3.5,s,u,l,c;return i!==null?(s=i.getX(),u=i.getY(),l=a-3,c=l):(s=r.getX()-e.getX()+n.getX(),u=r.getY()-e.getY()+n.getY(),l=a,c=a),OE.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,l,c,3.5,a,e.getX(),e.getY(),r.getX(),r.getY(),s,u,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=wp.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var o=ve.round(Y.distance(e,r)/i),a=ve.round(Y.distance(e,n)/i),s=Math.floor((o+a)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new V("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var o=this.sizeOfBlackWhiteBlackRun(e,r,n,i),a=1,s=e-(n-e);s<0?(a=e/(e-s),s=0):s>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var u=Math.floor(r-(i-r)*a);return a=1,u<0?(a=r/(r-u),u=0):u>=this.image.getHeight()&&(a=(this.image.getHeight()-1-r)/(u-r),u=this.image.getHeight()-1),s=Math.floor(e+(s-e)*a),o+=this.sizeOfBlackWhiteBlackRun(e,r,s,u),o-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var o=Math.abs(i-r)>Math.abs(n-e);if(o){var a=e;e=r,r=a,a=n,n=i,i=a}for(var s=Math.abs(n-e),u=Math.abs(i-r),l=-s/2,c=e<n?1:-1,h=r<i?1:-1,d=0,p=n+c,m=e,w=r;m!==p;m+=c){var x=o?w:m,v=o?m:w;if(d===1===this.image.get(x,v)){if(d===2)return ve.distance(m,w,e,r);d++}if(l+=u,l>0){if(w===i)break;w+=h,l-=s}}return d===2?ve.distance(n+c,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var o=Math.floor(i*e),a=Math.max(0,r-o),s=Math.min(this.image.getWidth()-1,r+o);if(s-a<e*3)throw new V("Alignment top exceeds estimated module size.");var u=Math.max(0,n-o),l=Math.min(this.image.getHeight()-1,n+o);if(l-u<e*3)throw new V("Alignment bottom exceeds estimated module size.");var c=new eb(this.image,a,u,s-a,l-u,e,this.resultPointCallback);return c.find()},t}(),Dc=function(){function t(){this.decoder=new YO}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(Ne.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(o,r),i=t.NO_POINTS}else{var a=new ob(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(a.getBits(),r),i=a.getPoints()}n.getOther()instanceof FE&&n.getOther().applyMirroredCorrection(i);var s=new Gt(n.getText(),n.getRawBytes(),void 0,i,Z.QR_CODE,void 0),u=n.getByteSegments();u!==null&&s.putMetadata(Tt.BYTE_SEGMENTS,u);var l=n.getECLevel();return l!==null&&s.putMetadata(Tt.ERROR_CORRECTION_LEVEL,l),n.hasStructuredAppend()&&(s.putMetadata(Tt.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Tt.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new V;var i=this.moduleSize(r,e),o=r[1],a=n[1],s=r[0],u=n[0];if(s>=u||o>=a)throw new V;if(a-o!==u-s&&(u=s+(a-o),u>=e.getWidth()))throw new V;var l=Math.round((u-s+1)/i),c=Math.round((a-o+1)/i);if(l<=0||c<=0)throw new V;if(c!==l)throw new V;var h=Math.floor(i/2);o+=h,s+=h;var d=s+Math.floor((l-1)*i)-u;if(d>0){if(d>h)throw new V;s-=d}var p=o+Math.floor((c-1)*i)-a;if(p>0){if(p>h)throw new V;o-=p}for(var m=new rn(l,c),w=0;w<c;w++)for(var x=o+Math.floor(w*i),v=0;v<l;v++)e.get(s+Math.floor(v*i),x)&&m.set(v,w);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),o=e[0],a=e[1],s=!0,u=0;o<i&&a<n;){if(s!==r.get(o,a)){if(++u===5)break;s=!s}o++,a++}if(o===i||a===n)throw new V;return(o-e[0])/7},t.NO_POINTS=new Array,t}(),ab=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},de=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ve.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var a=ab(e),s=a.next();!s.done;s=a.next()){var u=s.value;i[o++]=u}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=ut.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),sb=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),ub=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lb=function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),o=t.detect(n,i);return o.length||(i=i.clone(),i.rotate180(),o=t.detect(n,i)),new sb(i,o)},t.detect=function(e,r){for(var n,i,o=new Array,a=0,s=0,u=!1;a<r.getHeight();){var l=t.findVertices(r,a,s);if(l[0]==null&&l[3]==null){if(!u)break;u=!1,s=0;try{for(var c=(n=void 0,ub(o)),h=c.next();!h.done;h=c.next()){var d=h.value;d[1]!=null&&(a=Math.trunc(Math.max(a,d[1].getY()))),d[3]!=null&&(a=Math.max(a,Math.trunc(d[3].getY())))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}a+=t.ROW_STEP;continue}if(u=!0,o.push(l),!e)break;l[2]!=null?(s=Math.trunc(l[2].getX()),a=Math.trunc(l[2].getY())):(s=Math.trunc(l[4].getX()),a=Math.trunc(l[4].getY()))}return o},t.findVertices=function(e,r,n){var i=e.getHeight(),o=e.getWidth(),a=new Array(8);return t.copyToResult(a,t.findRowsWithPattern(e,i,o,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),a[4]!=null&&(n=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY())),t.copyToResult(a,t.findRowsWithPattern(e,i,o,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),a},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,o,a){for(var s=new Array(4),u=!1,l=new Int32Array(a.length);i<r;i+=t.ROW_STEP){var c=t.findGuardPattern(e,o,i,n,!1,a,l);if(c!=null){for(;i>0;){var h=t.findGuardPattern(e,o,--i,n,!1,a,l);if(h!=null)c=h;else{i++;break}}s[0]=new Y(c[0],i),s[1]=new Y(c[1],i),u=!0;break}}var d=i+1;if(u){for(var p=0,h=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<r;d++){var c=t.findGuardPattern(e,h[0],d,n,!1,a,l);if(c!=null&&Math.abs(h[0]-c[0])<t.MAX_PATTERN_DRIFT&&Math.abs(h[1]-c[1])<t.MAX_PATTERN_DRIFT)h=c,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}d-=p+1,s[2]=new Y(h[0],d),s[3]=new Y(h[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&ut.fill(s,null),s},t.findGuardPattern=function(e,r,n,i,o,a,s){ut.fillWithin(s,0,s.length,0);for(var u=r,l=0;e.get(u,n)&&u>0&&l++<t.MAX_PIXEL_DRIFT;)u--;for(var c=u,h=0,d=a.length,p=o;c<i;c++){var m=e.get(c,n);if(m!==p)s[h]++;else{if(h===d-1){if(t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([u,c]);u+=s[0]+s[1],Pe.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,p=!p}}return h===d-1&&t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([u,c-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=r[s];if(o<a)return 1/0;var u=o/a;n*=u;for(var l=0,c=0;c<i;c++){var h=e[c],d=r[c]*u,p=h>d?h-d:d-h;if(p>n)return 1/0;l+=p}return l/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),cb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zi=function(){function t(e,r){if(r.length===0)throw new J;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Pe.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=cb(this.coefficients),a=o.next();!a.done;a=o.next()){var s=a.value;i=this.field.add(i,s)}}catch(h){r={error:h}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}for(var u=this.coefficients[0],l=this.coefficients.length,c=1;c<l;c++)u=this.field.add(this.field.multiply(e,u),this.coefficients[c]);return u},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var o=new Int32Array(n.length),a=n.length-r.length;Pe.arraycopy(n,0,o,0,a);for(var s=a;s<n.length;s++)o[s]=this.field.add(r[s-a],n[s]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,o=i.length,a=new Int32Array(n+o-1),s=0;s<n;s++)for(var u=r[s],l=0;l<o;l++)a[s+l]=this.field.add(a[s+l],this.field.multiply(u,i[l]));return new t(this.field,a)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new J;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new ae,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),fb=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new J;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new NE;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),hb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),db=function(t){hb(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var o=1,a=0;a<r;a++)i.expTable[a]=o,o=o*n%r;for(var a=0;a<r-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new zi(i,new Int32Array([0])),i.one=new zi(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new J;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new zi(this,i)},e.PDF417_GF=new e(de.NUMBER_OF_CODEWORDS,3),e}(fb),pb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gb=function(){function t(){this.field=db.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,o,a=new zi(this.field,e),s=new Int32Array(r),u=!1,l=r;l>0;l--){var c=a.evaluateAt(this.field.exp(l));s[r-l]=c,c!==0&&(u=!0)}if(!u)return 0;var h=this.field.getOne();if(n!=null)try{for(var d=pb(n),p=d.next();!p.done;p=d.next()){var m=p.value,w=this.field.exp(e.length-1-m),x=new zi(this.field,new Int32Array([this.field.subtract(0,w),1]));h=h.multiply(x)}}catch(A){i={error:A}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var v=new zi(this.field,s),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),v,r),E=y[0],I=y[1],b=this.findErrorLocations(E),D=this.findErrorMagnitudes(I,E,b),l=0;l<b.length;l++){var C=e.length-1-this.field.log(b[l]);if(C<0)throw rt.getChecksumInstance();e[C]=this.field.subtract(e[C],D[l])}return b.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var o=e,a=r,s=this.field.getZero(),u=this.field.getOne();a.getDegree()>=Math.round(n/2);){var l=o,c=s;if(o=a,s=u,o.isZero())throw rt.getChecksumInstance();a=l;for(var h=this.field.getZero(),d=o.getCoefficient(o.getDegree()),p=this.field.inverse(d);a.getDegree()>=o.getDegree()&&!a.isZero();){var m=a.getDegree()-o.getDegree(),w=this.field.multiply(a.getCoefficient(a.getDegree()),p);h=h.add(this.field.buildMonomial(m,w)),a=a.subtract(o.multiplyByMonomial(m,w))}u=h.multiply(s).subtract(c).negative()}var x=u.getCoefficient(0);if(x===0)throw rt.getChecksumInstance();var v=this.field.inverse(x),y=u.multiply(v),E=a.multiply(v);return[y,E]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,o=1;o<this.field.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=this.field.inverse(o),i++);if(i!==r)throw rt.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),o=new Int32Array(i),a=1;a<=i;a++)o[i-a]=this.field.multiply(a,r.getCoefficient(a));for(var s=new zi(this.field,o),u=n.length,l=new Int32Array(u),a=0;a<u;a++){var c=this.field.inverse(n[a]),h=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(s.evaluateAt(c));l[a]=this.field.multiply(h,d)}return l},t}(),E0=function(){function t(e,r,n,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,o)}return t.prototype.constructor_1=function(e,r,n,i,o){var a=r==null||n==null,s=i==null||o==null;if(a&&s)throw new V;a?(r=new Y(0,i.getY()),n=new Y(0,o.getY())):s&&(i=new Y(e.getWidth()-1,r.getY()),o=new Y(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,o=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var u=n?this.topLeft:this.topRight,l=Math.trunc(u.getY()-e);l<0&&(l=0);var c=new Y(u.getX(),l);n?i=c:a=c}if(r>0){var h=n?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new Y(h.getX(),d);n?o=p:s=p}return new t(this.image,i,o,a,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),vb=function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Ep=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(a,s,u,l,c,h){if(a==="%%")return"%";if(r[++n]!==void 0){a=l?parseInt(l.substr(1)):void 0;var d=c?parseInt(c.substr(1)):void 0,p;switch(h){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(a);break;case"p":p=parseFloat(r[n]).toPrecision(a);break;case"e":p=parseFloat(r[n]).toExponential(a);break;case"x":p=parseInt(r[n]).toString(d||16);break;case"d":p=parseFloat(parseInt(r[n],d||10).toPrecision(a)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(d);for(var m=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";p.length<m;)p=s!==void 0?p+w:w+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),mb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BE=function(){function t(e){this.boundingBox=new E0(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new Ep,i=0;try{for(var o=mb(this.codewords),a=o.next();!a.done;a=o.next()){var s=a.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),yb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_b=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},us=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,o=function(h,d){var p={getKey:function(){return h},getValue:function(){return d}};p.getValue()>n?(n=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===n&&i.push(p.getKey())};try{for(var a=yb(this.values.entries()),s=a.next();!s.done;s=a.next()){var u=_b(s.value,2),l=u[0],c=u[1];o(l,c)}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return de.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),wb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Iy=function(t){wb(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=Wh(this.getCodewords()),o=i.next();!o.done;o=i.next()){var a=o.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=-1,c=1,h=0,d=s;d<u;d++)if(n[d]!=null){var p=n[d],m=p.getRowNumber()-l;if(m===0)h++;else if(m===1)c=Math.max(c,h),h=1,l=p.getRowNumber();else if(m<0||p.getRowNumber()>=r.getRowCount()||m>d)n[d]=null;else{var w=void 0;c>2?w=(c-2)*m:w=m;for(var x=w>=d,v=1;v<=w&&!x;v++)x=n[d-v]!=null;x?n[d]=null:(l=p.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var a=Wh(this.getCodewords()),s=a.next();!s.done;s=a.next()){var u=s.value;if(u!=null){var l=u.getRowNumber();if(l>=o.length)continue;o[l]++}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.getCodewords(),l=-1,c=a;c<s;c++)if(u[c]!=null){var h=u[c];h.setRowNumberAsRowIndicatorColumn();var d=h.getRowNumber()-l;d===0||(d===1?l=h.getRowNumber():h.getRowNumber()>=r.getRowCount()?u[c]=null:l=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),o=new us,a=new us,s=new us,u=new us;try{for(var l=Wh(i),c=l.next();!c.done;c=l.next()){var h=c.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var d=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:a.setValue(d*3+1);break;case 1:u.setValue(d/3),s.setValue(d%3);break;case 2:o.setValue(d+1);break}}}}catch(w){r={error:w}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}if(o.getValue().length===0||a.getValue().length===0||s.getValue().length===0||u.getValue().length===0||o.getValue()[0]<1||a.getValue()[0]+s.getValue()[0]<de.MIN_ROWS_IN_BARCODE||a.getValue()[0]+s.getValue()[0]>de.MAX_ROWS_IN_BARCODE)return null;var m=new vb(o.getValue()[0],a.getValue()[0],s.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var o=r[i];if(r[i]!=null){var a=o.getValue()%30,s=o.getRowNumber();if(s>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:a*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(a/3)!==n.getErrorCorrectionLevel()||a%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:a+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(BE),xb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eb=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=de.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(o=t.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(o=t.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,o;if(this.detectionResultColumns[e-1]!=null){var a=n[r],s=this.detectionResultColumns[e-1].getCodewords(),u=s;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var l=new Array(14);l[2]=s[r],l[3]=u[r],r>0&&(l[0]=n[r-1],l[4]=s[r-1],l[5]=u[r-1]),r>1&&(l[8]=n[r-2],l[10]=s[r-2],l[11]=u[r-2]),r<n.length-1&&(l[1]=n[r+1],l[6]=s[r+1],l[7]=u[r+1]),r<n.length-2&&(l[9]=n[r+2],l[12]=s[r+2],l[13]=u[r+2]);try{for(var c=xb(l),h=c.next();!h.done;h=c.next()){var d=h.value;if(t.adjustRowNumber(a,d))return}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new Ep,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[n];if(o==null){r.format("    |   ");continue}r.format(" %3d|%3d",o.getRowNumber(),o.getValue())}r.format("%n")}return r.toString()},t}(),Ab=function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),Ib=function(){function t(){}return t.initialize=function(){for(var e=0;e<de.SYMBOL_TABLE.length;e++)for(var r=de.SYMBOL_TABLE[e],n=r&1,i=0;i<de.BARS_IN_MODULE;i++){for(var o=0;(r&1)===n;)o+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(de.BARS_IN_MODULE)),t.RATIOS_TABLE[e][de.BARS_IN_MODULE-i-1]=Math.fround(o/de.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=ve.sum(e),n=new Int32Array(de.BARS_IN_MODULE),i=0,o=0,a=0;a<de.MODULES_IN_CODEWORD;a++){var s=r/(2*de.MODULES_IN_CODEWORD)+a*r/de.MODULES_IN_CODEWORD;o+e[i]<=s&&(o+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return de.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=ve.sum(e),n=new Array(de.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var o=_0.MAX_VALUE,a=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var u=0,l=t.RATIOS_TABLE[s],c=0;c<de.BARS_IN_MODULE;c++){var h=Math.fround(l[c]-n[c]);if(u+=Math.fround(h*h),u>=o)break}u<o&&(o=u,a=de.SYMBOL_TABLE[s])}return a},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(de.SYMBOL_TABLE.length).map(function(e){return new Array(de.BARS_IN_MODULE)}),t}(),Cb=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),Cy=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),Tb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sb=function(t){Tb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(cr),Rb=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new Sb;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new yp;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),Pb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nb=function(t){Pb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(cr),Ob=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bb=function(t){Ob(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new J("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new Nb;i=se.MAX_VALUE}this.buf=ut.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new yp;this.ensureCapacity(this.count+i),Pe.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ut.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(Rb),Ce;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ce||(Ce={}));function VE(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var hl;function zn(t){if(typeof hl>"u"&&(hl=VE()),hl===null)throw new Error("BigInt is not supported!");return hl(t)}function Db(){var t=[];t[0]=zn(1);var e=zn(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var kb=function(){function t(){}return t.decode=function(e,r){var n=new ae(""),i=st.ISO8859_1;n.enableDecoding(i);for(var o=1,a=e[o++],s=new Cb;o<e[0];){switch(a){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(a,e,i,o,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,n);break;case t.ECI_CHARSET:st.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new W;default:o--,o=t.textCompaction(e,o,n);break}if(o<e.length)a=e[o++];else throw W.getFormatInstance()}if(n.length()===0)throw W.getFormatInstance();var u=new Pf(null,n.toString(),null,r);return u.setOther(s),u},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw W.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,r++)i[o]=e[r];n.setSegmentIndex(se.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new ae;r=t.textCompaction(e,r,a),n.setFileId(a.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new ae;r=t.textCompaction(e,r+1,u),n.setFileName(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new ae;r=t.textCompaction(e,r+1,l),n.setSender(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new ae;r=t.textCompaction(e,r+1,c),n.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new ae;r=t.numericCompaction(e,r+1,h),n.setSegmentCount(se.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new ae;r=t.numericCompaction(e,r+1,d),n.setTimestamp(Cy.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new ae;r=t.numericCompaction(e,r+1,p),n.setChecksum(se.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new ae;r=t.numericCompaction(e,r+1,m),n.setFileSize(Cy.parseLong(m.toString()));break;default:throw W.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(s!==-1){var w=r-s;n.isLastSegment()&&w--,n.setOptionalData(ut.copyOfRange(e,s,s+w))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),o=new Int32Array((e[0]-r)*2),a=0,s=!1;r<e[0]&&!s;){var u=e[r++];if(u<t.TEXT_COMPACTION_MODE_LATCH)i[a]=u/30,i[a+1]=u%30,a+=2;else switch(u){case t.TEXT_COMPACTION_MODE_LATCH:i[a++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[r++],o[a]=u,a++;break}}return t.decodeTextCompaction(i,o,a,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var o=Ce.ALPHA,a=Ce.ALPHA,s=0;s<n;){var u=e[s],l="";switch(o){case Ce.ALPHA:if(u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case t.LL:o=Ce.LOWER;break;case t.ML:o=Ce.MIXED;break;case t.PS:a=o,o=Ce.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Ce.ALPHA;break}break;case Ce.LOWER:if(u<26)l=String.fromCharCode(97+u);else switch(u){case 26:l=" ";break;case t.AS:a=o,o=Ce.ALPHA_SHIFT;break;case t.ML:o=Ce.MIXED;break;case t.PS:a=o,o=Ce.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Ce.ALPHA;break}break;case Ce.MIXED:if(u<t.PL)l=t.MIXED_CHARS[u];else switch(u){case t.PL:o=Ce.PUNCT;break;case 26:l=" ";break;case t.LL:o=Ce.LOWER;break;case t.AL:o=Ce.ALPHA;break;case t.PS:a=o,o=Ce.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Ce.ALPHA;break}break;case Ce.PUNCT:if(u<t.PAL)l=t.PUNCT_CHARS[u];else switch(u){case t.PAL:o=Ce.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Ce.ALPHA;break}break;case Ce.ALPHA_SHIFT:if(o=a,u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=Ce.ALPHA;break}break;case Ce.PUNCT_SHIFT:if(o=a,u<t.PAL)l=t.PUNCT_CHARS[u];else switch(u){case t.PAL:o=Ce.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Ce.ALPHA;break}break}l!==""&&i.append(l),s++}},t.byteCompaction=function(e,r,n,i,o){var a=new bb,s=0,u=0,l=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),h=r[i++];i<r[0]&&!l;)switch(c[s++]=h,u=900*u+h,h=r[i++],h){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(s%5===0&&s>0){for(var d=0;d<6;++d)a.write(Number(zn(u)>>zn(8*(5-d))));u=0,s=0}break}i===r[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=h);for(var p=0;p<s;p++)a.write(c[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!l;){var m=r[i++];if(m<t.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break}if(s%5===0&&s>0){for(var d=0;d<6;++d)a.write(Number(zn(u)>>zn(8*(5-d))));u=0,s=0}}break}return o.append(Sr.decode(a.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,o=!1,a=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!o;){var s=e[r++];if(r===e[0]&&(o=!0),s<t.TEXT_COMPACTION_MODE_LATCH)a[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,o=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(n.append(t.decodeBase900toBase10(a,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=zn(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*zn(e[i]);var o=n.toString();if(o.charAt(0)!=="1")throw new W;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=VE()?Db():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),qa=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mb=function(){function t(){}return t.decode=function(e,r,n,i,o,a,s){for(var u=new E0(e,r,n,i,o),l=null,c=null,h,d=!0;;d=!1){if(r!=null&&(l=t.getRowIndicatorColumn(e,u,r,!0,a,s)),i!=null&&(c=t.getRowIndicatorColumn(e,u,i,!1,a,s)),h=t.merge(l,c),h==null)throw V.getNotFoundInstance();var p=h.getBoundingBox();if(d&&p!=null&&(p.getMinY()<u.getMinY()||p.getMaxY()>u.getMaxY()))u=p;else break}h.setBoundingBox(u);var m=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,l),h.setDetectionResultColumn(m,c);for(var w=l!=null,x=1;x<=m;x++){var v=w?x:m-x;if(h.getDetectionResultColumn(v)===void 0){var y=void 0;v===0||v===m?y=new Iy(u,v===0):y=new BE(u),h.setDetectionResultColumn(v,y);for(var E=-1,I=E,b=u.getMinY();b<=u.getMaxY();b++){if(E=t.getStartColumn(h,v,b,w),E<0||E>u.getMaxX()){if(I===-1)continue;E=I}var D=t.detectCodeword(e,u.getMinX(),u.getMaxX(),w,E,b,a,s);D!=null&&(y.setCodeword(b,D),I=E,a=Math.min(a,D.getWidth()),s=Math.max(s,D.getWidth()))}}}return t.createDecoderResult(h)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=E0.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new Eb(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),a=0;try{for(var s=qa(i),u=s.next();!u.done;u=s.next()){var l=u.value;if(a+=o-l,l>0)break}}catch(p){r={error:p}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var c=e.getCodewords(),h=0;a>0&&c[h]==null;h++)a--;for(var d=0,h=i.length-1;h>=0&&(d+=o-i[h],!(i[h]>0));h--);for(var h=c.length-1;d>0&&c[h]==null;h--)d--;return e.getBoundingBox().addMissingRows(a,d,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var o=qa(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=Math.max(i,s)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,o,a){for(var s=new Iy(r,i),u=0;u<2;u++)for(var l=u===0?1:-1,c=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=r.getMaxY()&&h>=r.getMinY();h+=l){var d=t.detectCodeword(e,0,e.getWidth(),i,c,h,o,a);d!=null&&(s.setCodeword(h,d),i?c=d.getStartX():c=d.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>de.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();n.setValue(o)}else i[0]!==o&&n.setValue(o)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],a=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var u=0;u<e.getBarcodeColumnCount();u++){var l=r[s][u+1].getValue(),c=s*e.getBarcodeColumnCount()+u;l.length===0?n.push(c):l.length===1?i[c]=l[0]:(a.push(c),o.push(l))}for(var h=new Array(o.length),d=0;d<h.length;d++)h[d]=o[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,de.toIntArray(n),de.toIntArray(a),h)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,o){for(var a=new Int32Array(i.length),s=100;s-- >0;){for(var u=0;u<a.length;u++)r[i[u]]=o[u][a[u]];try{return t.decodeCodewords(r,e,n)}catch(c){var l=c instanceof rt;if(!l)throw c}if(a.length===0)throw rt.getChecksumInstance();for(var u=0;u<a.length;u++)if(a[u]<o[u].length-1){a[u]++;break}else if(a[u]=0,u===a.length-1)throw rt.getChecksumInstance()}throw rt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,o,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<a.length;s++)for(var u=0;u<a[s].length;u++)a[s][u]=new us;var l=0;try{for(var c=qa(e.getDetectionResultColumns()),h=c.next();!h.done;h=c.next()){var d=h.value;if(d!=null)try{for(var p=(i=void 0,qa(d.getCodewords())),m=p.next();!m.done;m=p.next()){var w=m.value;if(w!=null){var x=w.getRowNumber();if(x>=0){if(x>=a.length)continue;a[x][l].setValue(w.getValue())}}}}catch(v){i={error:v}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}l++}}catch(v){r={error:v}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return a},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var o,a,s=i?1:-1,u=null;if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodeword(n)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(r).getCodewordNearby(n),u!=null)return i?u.getStartX():u.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),u!=null)return i?u.getEndX():u.getStartX();for(var l=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var c=(o=void 0,qa(e.getDetectionResultColumn(r).getCodewords())),h=c.next();!h.done;h=c.next()){var d=h.value;if(d!=null)return(i?d.getEndX():d.getStartX())+s*l*(d.getEndX()-d.getStartX())}}catch(p){o={error:p}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}l++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,o,a,s,u){o=t.adjustCodewordStartColumn(e,r,n,i,o,a);var l=t.getModuleBitCount(e,r,n,i,o,a);if(l==null)return null;var c,h=ve.sum(l);if(i)c=o+h;else{for(var d=0;d<l.length/2;d++){var p=l[d];l[d]=l[l.length-1-d],l[l.length-1-d]=p}c=o,o=c-h}if(!t.checkCodewordSkew(h,s,u))return null;var m=Ib.getDecodedValue(l),w=de.getCodeword(m);return w===-1?null:new Ab(o,c,t.getCodewordBucketNumber(m),w)},t.getModuleBitCount=function(e,r,n,i,o,a){for(var s=o,u=new Int32Array(8),l=0,c=i?1:-1,h=i;(i?s<n:s>=r)&&l<u.length;)e.get(s,a)===h?(u[l]++,s+=c):(l++,h=!h);return l===u.length||s===(i?n:r)&&l===u.length-1?u:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,o,a){for(var s=o,u=i?-1:1,l=0;l<2;l++){for(;(i?s>=r:s<n)&&i===e.get(s,a);){if(Math.abs(o-s)>t.CODEWORD_SKEW_SIZE)return o;s+=u}u=-u,i=!i}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw W.getFormatInstance();var i=1<<r+1,o=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var a=kb.decode(e,""+r);return a.setErrorsCorrected(o),a.setErasures(n.length),a},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw rt.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw W.getFormatInstance();var n=e[0];if(n>e.length)throw W.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw W.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new Ep,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var o=e[n][i];o.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new gb,t}(),Lb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kc=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw V.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof W||n instanceof rt?V.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,o,a=new Array,s=lb.detectMultiple(e,r,n);try{for(var u=Lb(s.getPoints()),l=u.next();!l.done;l=u.next()){var c=l.value,h=Mb.decode(s.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),d=new Gt(h.getText(),h.getRawBytes(),void 0,c,Z.PDF_417);d.putMetadata(Tt.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&d.putMetadata(Tt.PDF417_EXTRA_METADATA,p),a.push(d)}}catch(m){i={error:m}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return a.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?se.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*de.MODULES_IN_CODEWORD/de.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),Fb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ty=function(t){Fb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(cr),Sy=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UE=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Ne.TRY_HARDER)!==void 0,n=e==null?null:e.get(Ne.POSSIBLE_FORMATS),i=new Array;if(n!=null){var o=n.some(function(a){return a===Z.UPC_A||a===Z.UPC_E||a===Z.EAN_13||a===Z.EAN_8||a===Z.CODABAR||a===Z.CODE_39||a===Z.CODE_93||a===Z.CODE_128||a===Z.ITF||a===Z.RSS_14||a===Z.RSS_EXPANDED});o&&!r&&i.push(new ko(e)),n.includes(Z.QR_CODE)&&i.push(new Dc),n.includes(Z.DATA_MATRIX)&&i.push(new bc),n.includes(Z.AZTEC)&&i.push(new Nc),n.includes(Z.PDF_417)&&i.push(new kc),o&&r&&i.push(new ko(e))}i.length===0&&(r||i.push(new ko(e)),i.push(new Dc),i.push(new bc),i.push(new Nc),i.push(new kc),r&&i.push(new ko(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=Sy(this.readers),i=n.next();!i.done;i=n.next()){var o=i.value;o.reset()}}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new Ty("No readers where selected, nothing can be read.");try{for(var i=Sy(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(s){if(s instanceof Ty)continue}}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new V("No MultiFormat Readers were able to detect the code.")},t}(),Bb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Bb(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,o=new UE;return o.setHints(r),i=t.call(this,o,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(Aa);var Vb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Vb(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new kc,r)||this}return e})(Aa);var Ub=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Ub(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Dc,r)||this}return e})(Aa);var A0;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(A0||(A0={}));const dl=A0;var jE=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new di(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,o=r.length;o<=e;o++){var a=n.multiply(new di(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));r.push(a),n=a}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new J("No error correction bytes");var n=e.length-r;if(n<=0)throw new J("No data bytes provided");var i=this.buildGenerator(r),o=new Int32Array(n);Pe.arraycopy(e,0,o,0,n);var a=new di(this.field,o);a=a.multiplyByMonomial(r,1);for(var s=a.divide(i)[1],u=s.getCoefficients(),l=r-u.length,c=0;c<l;c++)e[n+c]=0;Pe.arraycopy(u,0,e,n+l,u.length)},t}(),ls=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o-1;a++)for(var s=n[a],u=0;u<i-1;u++){var l=s[u];l===s[u+1]&&l===n[a+1][u]&&l===n[a+1][u+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=0;s<i;s++){var u=n[a];s+6<i&&u[s]===1&&u[s+1]===0&&u[s+2]===1&&u[s+3]===1&&u[s+4]===1&&u[s+5]===0&&u[s+6]===1&&(t.isWhiteHorizontal(u,s-4,s)||t.isWhiteHorizontal(u,s+7,s+11))&&r++,a+6<o&&n[a][s]===1&&n[a+1][s]===0&&n[a+2][s]===1&&n[a+3][s]===1&&n[a+4][s]===1&&n[a+5][s]===0&&n[a+6][s]===1&&(t.isWhiteVertical(n,s,a-4,a)||t.isWhiteVertical(n,s,a+7,a+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var o=n;o<i;o++)if(e[o][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=n[a],u=0;u<i;u++)s[u]===1&&r++;var l=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(r*2-l)*10/l);return c*t.N4},t.getDataMaskBit=function(e,r,n){var i,o;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:o=n*r,i=(o&1)+o%3;break;case 6:o=n*r,i=(o&1)+o%3&1;break;case 7:o=n*r,i=o%3+(n+r&1)&1;break;default:throw new J("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),o=r?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<i;s++){for(var u=0,l=-1,c=0;c<o;c++){var h=r?a[s][c]:a[c][s];h===l?u++:(u>=5&&(n+=t.N1+(u-5)),u=1,l=h)}u>=5&&(n+=t.N1+(u-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),jb=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zb=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=jb(this.bytes),o=i.next();!o.done;o=i.next()){var a=o.value;ut.fill(a,e)}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var o=this.bytes[n],a=r.bytes[n],s=0,u=this.width;s<u;++s)if(o[s]!==a[s])return!1;return!0},t.prototype.toString=function(){for(var e=new ae,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],o=0,a=this.width;o<a;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),I0=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new ae;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),Hb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ke=function(t){Hb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(cr),Ry=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,o){t.clearMatrix(o),t.embedBasicPatterns(n,o),t.embedTypeInfo(r,i,o),t.maybeEmbedVersionInfo(n,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new yt;t.makeTypeInfoBits(e,r,i);for(var o=0,a=i.getSize();o<a;++o){var s=i.get(i.getSize()-1-o),u=t.TYPE_INFO_COORDINATES[o],l=u[0],c=u[1];if(n.setBoolean(l,c,s),o<8){var h=n.getWidth()-o-1,d=8;n.setBoolean(h,d,s)}else{var h=8,d=n.getHeight()-7+(o-8);n.setBoolean(h,d,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new yt;t.makeVersionInfoBits(e,n);for(var i=6*3-1,o=0;o<6;++o)for(var a=0;a<3;++a){var s=n.get(i);i--,r.setBoolean(o,r.getHeight()-11+a,s),r.setBoolean(r.getHeight()-11+a,o,s)}}},t.embedDataBits=function(e,r,n){for(var i=0,o=-1,a=n.getWidth()-1,s=n.getHeight()-1;a>0;){for(a===6&&(a-=1);s>=0&&s<n.getHeight();){for(var u=0;u<2;++u){var l=a-u;if(t.isEmpty(n.get(l,s))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,r!==255&&ls.getDataMaskBit(r,l,s)&&(c=!c),n.setBoolean(l,s,c)}}s+=o}o=-o,s+=o,a-=2}if(i!==e.getSize())throw new ke("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-se.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new J("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!I0.isValidMaskPattern(r))throw new ke("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(o,10);var a=new yt;if(a.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(a),n.getSize()!==15)throw new ke("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new ke("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ke;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new ke;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new ke;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)n.setNumber(e+a,r+i,o[a])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)n.setNumber(e+a,r+i,o[a])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],o=0,a=i.length;o!==a;o++){var s=i[o];if(s>=0)for(var u=0;u!==a;u++){var l=i[u];l>=0&&t.isEmpty(r.get(l,s))&&t.embedPositionAdjustmentPattern(l-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),Wb=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),Py=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return ls.applyMaskPenaltyRule1(e)+ls.applyMaskPenaltyRule2(e)+ls.applyMaskPenaltyRule3(e)+ls.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,o=n!==null&&n.get(dl.CHARACTER_SET)!==void 0;o&&(i=n.get(dl.CHARACTER_SET).toString());var a=this.chooseMode(e,i),s=new yt;if(a===Me.BYTE&&(o||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=st.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,s)}this.appendModeInfo(a,s);var l=new yt;this.appendBytes(e,a,l,i);var c;if(n!==null&&n.get(dl.QR_VERSION)!==void 0){var h=Number.parseInt(n.get(dl.QR_VERSION).toString(),10);c=$i.getVersionForNumber(h);var d=this.calculateBitsNeeded(a,s,l,c);if(!this.willFit(d,c,r))throw new ke("Data too big for requested version")}else c=this.recommendVersion(r,a,s,l);var p=new yt;p.appendBitArray(s);var m=a===Me.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(m,c,a,p),p.appendBitArray(l);var w=c.getECBlocksForLevel(r),x=c.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(x,p);var v=this.interleaveWithECBytes(p,c.getTotalCodewords(),x,w.getNumBlocks()),y=new I0;y.setECLevel(r),y.setMode(a),y.setVersion(c);var E=c.getDimensionForVersion(),I=new zb(E,E),b=this.chooseMaskPattern(v,r,c,I);return y.setMaskPattern(b),Ry.buildMatrix(v,r,c,b,I),y.setMatrix(I),y},t.recommendVersion=function(e,r,n,i){var o=this.calculateBitsNeeded(r,n,i,$i.getVersionForNumber(1)),a=this.chooseVersion(o,e),s=this.calculateBitsNeeded(r,n,i,a);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),st.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Me.KANJI;for(var n=!1,i=!1,o=0,a=e.length;o<a;++o){var s=e.charAt(o);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Me.BYTE}return i?Me.ALPHANUMERIC:n?Me.NUMERIC:Me.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Sr.encode(e,st.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var o=r[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var o=Number.MAX_SAFE_INTEGER,a=-1,s=0;s<I0.NUM_MASK_PATTERNS;s++){Ry.buildMatrix(e,r,n,s,i);var u=this.calculateMaskPenalty(i);u<o&&(o=u,a=s)}return a},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=$i.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new ke("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),o=r.getECBlocksForLevel(n),a=o.getTotalECCodewords(),s=i-a,u=(e+7)/8;return s>=u},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new ke("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var o=r.getSize()&7;if(o>0)for(var i=o;i<8;i++)r.appendBit(!1);for(var a=e-r.getSizeInBytes(),i=0;i<a;++i)r.appendBits(i&1?17:236,8);if(r.getSize()!==n)throw new ke("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,o,a){if(i>=n)throw new ke("Block ID too large");var s=e%n,u=n-s,l=Math.floor(e/n),c=l+1,h=Math.floor(r/n),d=h+1,p=l-h,m=c-d;if(p!==m)throw new ke("EC bytes mismatch");if(n!==u+s)throw new ke("RS blocks mismatch");if(e!==(h+p)*u+(d+m)*s)throw new ke("Total bytes mismatch");i<u?(o[0]=h,a[0]=p):(o[0]=d,a[0]=m)},t.interleaveWithECBytes=function(e,r,n,i){var o,a,s,u;if(e.getSizeInBytes()!==n)throw new ke("Number of bits and data bytes does not match");for(var l=0,c=0,h=0,d=new Array,p=0;p<i;++p){var m=new Int32Array(1),w=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,p,m,w);var x=m[0],v=new Uint8Array(x);e.toBytes(8*l,v,0,x);var y=t.generateECBytes(v,w[0]);d.push(new Wb(v,y)),c=Math.max(c,x),h=Math.max(h,y.length),l+=m[0]}if(n!==l)throw new ke("Data bytes does not match offset");for(var E=new yt,p=0;p<c;++p)try{for(var I=(o=void 0,Py(d)),b=I.next();!b.done;b=I.next()){var D=b.value,v=D.getDataBytes();p<v.length&&E.appendBits(v[p],8)}}catch(N){o={error:N}}finally{try{b&&!b.done&&(a=I.return)&&a.call(I)}finally{if(o)throw o.error}}for(var p=0;p<h;++p)try{for(var C=(s=void 0,Py(d)),A=C.next();!A.done;A=C.next()){var D=A.value,y=D.getErrorCorrectionBytes();p<y.length&&E.appendBits(y[p],8)}}catch(N){s={error:N}}finally{try{A&&!A.done&&(u=C.return)&&u.call(C)}finally{if(s)throw s.error}}if(r!==E.getSizeInBytes())throw new ke("Interleaving error: "+r+" and "+E.getSizeInBytes()+" differ.");return E},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),o=0;o<n;o++)i[o]=e[o]&255;new jE(ir.QR_CODE_FIELD_256).encode(i,r);for(var a=new Uint8Array(r),o=0;o<r;o++)a[o]=i[n+o];return a},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var o=n.getCharacterCountBits(r);if(e>=1<<o)throw new ke(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},t.appendBytes=function(e,r,n,i){switch(r){case Me.NUMERIC:t.appendNumericBytes(e,n);break;case Me.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Me.BYTE:t.append8BitBytes(e,n,i);break;case Me.KANJI:t.appendKanjiBytes(e,n);break;default:throw new ke("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var o=t.getDigit(e.charAt(i));if(i+2<n){var a=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));r.appendBits(o*100+a*10+s,10),i+=3}else if(i+1<n){var a=t.getDigit(e.charAt(i+1));r.appendBits(o*10+a,7),i+=2}else r.appendBits(o,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var o=t.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new ke;if(i+1<n){var a=t.getAlphanumericCode(e.charCodeAt(i+1));if(a===-1)throw new ke;r.appendBits(o*45+a,11),i+=2}else r.appendBits(o,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=Sr.encode(e,n)}catch(u){throw new ke(u)}for(var o=0,a=i.length;o!==a;o++){var s=i[o];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Sr.encode(e,st.SJIS)}catch(h){throw new ke(h)}for(var i=n.length,o=0;o<i;o+=2){var a=n[o]&255,s=n[o+1]&255,u=a<<8&4294967295|s,l=-1;if(u>=33088&&u<=40956?l=u-33088:u>=57408&&u<=60351&&(l=u-49472),l===-1)throw new ke("Invalid byte sequence");var c=(l>>8)*192+(l&255);r.appendBits(c,13)}},t.appendECI=function(e,r){r.appendBits(Me.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=st.UTF8.getName(),t})();var Gb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Gb(e,t);function e(r,n,i,o,a,s,u,l){var c=t.call(this,s,u)||this;if(c.yuvData=r,c.dataWidth=n,c.dataHeight=i,c.left=o,c.top=a,o+s>n||a+u>i)throw new J("Crop rectangle does not fit within image data.");return l&&c.reverseHorizontal(s,u),c}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new J("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(r+this.top)*this.dataWidth+this.left;return Pe.arraycopy(this.yuvData,o,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Pe.arraycopy(this.yuvData,a,o,0,i),o;for(var s=0;s<n;s++){var u=s*r;Pe.arraycopy(this.yuvData,a,o,u,r),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,o,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),o=this.yuvData,a=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var u=s*r,l=0;l<r;l++){var c=o[a+l*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+l]=4278190080|c*65793}a+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,o=0,a=this.top*this.dataWidth+this.left;o<n;o++,a+=this.dataWidth)for(var s=a+r/2,u=a,l=a+r-1;u<s;u++,l--){var c=i[u];i[u]=i[l],i[l]=c}},e.prototype.invert=function(){return new Rf(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Eu);var $b=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){$b(e,t);function e(r,n,i,o,a,s,u){var l=t.call(this,n,i)||this;if(l.dataWidth=o,l.dataHeight=a,l.left=s,l.top=u,r.BYTES_PER_ELEMENT===4){for(var c=n*i,h=new Uint8ClampedArray(c),d=0;d<c;d++){var p=r[d],m=p>>16&255,w=p>>7&510,x=p&255;h[d]=(m+w+x)/4&255}l.luminances=h}else l.luminances=r;if(o===void 0&&(l.dataWidth=n),a===void 0&&(l.dataHeight=i),s===void 0&&(l.left=0),u===void 0&&(l.top=0),l.left+n>l.dataWidth||l.top+i>l.dataHeight)throw new J("Crop rectangle does not fit within image data.");return l}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new J("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(r+this.top)*this.dataWidth+this.left;return Pe.arraycopy(this.luminances,o,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Pe.arraycopy(this.luminances,a,o,0,i),o;for(var s=0;s<n;s++){var u=s*r;Pe.arraycopy(this.luminances,a,o,u,r),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Rf(this)},e})(Eu);var Xb=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kb=function(t){Xb(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(st),qb=function(){function t(){}return t.ISO_8859_1=st.ISO8859_1,t}(),C0,Yb=301,Qb=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=Yb);return{LOG:t,ALOG:e}};C0=Qb([],[]),C0.LOG;C0.ALOG;var Ny;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Ny||(Ny={}));var Oy=129,zE=230,Zb=231,Jb=235,eD=236,tD=237,rD=238,nD=239,iD=240,Gh=254,oD=254,by="[)>05",Dy="[)>06",ky="",Ee=0,Et=1,Yt=2,it=3,pt=4,Bt=5,aD=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ee},t.prototype.encode=function(e){var r=Fr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=Fr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Bt:e.writeCodeword(Zb),e.signalEncoderChange(Bt);return;case Et:e.writeCodeword(zE),e.signalEncoderChange(Et);return;case it:e.writeCodeword(rD),e.signalEncoderChange(it);break;case Yt:e.writeCodeword(nD),e.signalEncoderChange(Yt);break;case pt:e.writeCodeword(iD),e.signalEncoderChange(pt);break;default:throw new Error("Illegal mode: "+i)}else Fr.isExtendedASCII(n)?(e.writeCodeword(Jb),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Fr.isDigit(e)&&Fr.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),sD=function(){function t(){}return t.prototype.getEncodingMode=function(){return Bt},t.prototype.encode=function(e){var r=new ae;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=Fr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Ee);break}}var o=r.length()-1,a=1,s=e.getCodewordCount()+o+a;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||u)if(o<=249)r.setCharAt(0,he.getCharAt(o));else if(o<=1555)r.setCharAt(0,he.getCharAt(Math.floor(o/250)+249)),r.insert(1,he.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var l=0,n=r.length();l<n;l++)e.writeCodeword(this.randomize255State(r.charAt(l).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t}(),Ap=function(){function t(){}return t.prototype.getEncodingMode=function(){return Et},t.prototype.encodeMaximal=function(e){for(var r=new ae,n=0,i=e.pos,o=0;e.hasMoreCharacters();){var a=e.getCurrentChar();e.pos++,n=this.encodeChar(a,r),r.length()%3===0&&(i=e.pos,o=r.length())}if(o!==r.length()){var s=Math.floor(r.length()/3*2),u=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(u);var l=e.getSymbolInfo().getDataCapacity()-u,c=Math.floor(r.length()%3);(c===2&&l!==2||c===1&&(n>3||l!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(zE),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new ae;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),o=Math.floor(r.length()/3)*2,a=e.getCodewordCount()+o;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(!e.hasMoreCharacters()){var u=new ae;for(r.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,r,u,i));r.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,r,u,i);break}var l=r.length();if(l%3===0){var c=Fr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(Ee);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var o=r.length(),a=r.toString().substring(0,o-i);r.setLengthToZero(),r.append(a),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(Gh)}else if(a===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(Gh),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(a>0||e.hasMoreCharacters())&&e.writeCodeword(Gh)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ee)},t.prototype.encodeChar=function(e,r){if(e===" ".charCodeAt(0))return r.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return r.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return r.append(e-65+14),1;if(e<" ".charCodeAt(0))return r.append(0),r.append(e),2;if(e<="/".charCodeAt(0))return r.append(1),r.append(e-33),2;if(e<="@".charCodeAt(0))return r.append(1),r.append(e-58+15),2;if(e<="_".charCodeAt(0))return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,o=new ae;return o.append(n),o.append(i),o.toString()},t}(),uD=function(){function t(){}return t.prototype.getEncodingMode=function(){return pt},t.prototype.encode=function(e){for(var r=new ae;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var o=r.toString().substring(4);r.setLengthToZero(),r.append(o);var a=Fr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Ee);break}}}r.append(he.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var a=n-1,s=this.encodeToCodewords(r.toString()),u=!e.hasMoreCharacters(),l=u&&a<=2;if(a<=2){e.updateSymbolInfo(e.getCodewordCount()+a);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(l=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}l?(e.resetSymbolInfo(),e.pos-=a):e.writeCodewords(s)}finally{e.signalEncoderChange(Ee)}},t.prototype.encodeChar=function(e,r){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?r.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?r.append(he.getCharAt(e-64)):Fr.illegalCharacter(he.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,o=r>=3?e.charAt(2).charCodeAt(0):0,a=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(o<<6)+a,u=s>>16&255,l=s>>8&255,c=s&255,h=new ae;return h.append(u),r>=2&&h.append(l),r>=3&&h.append(c),h.toString()},t}(),lD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cD=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_e=function(){function t(e,r,n,i,o,a,s,u){s===void 0&&(s=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=a,this.rsBlockData=s,this.rsBlockError=u}return t.lookup=function(e,r,n,i,o){var a,s;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var u=cD(hD),l=u.next();!l.done;l=u.next()){var c=l.value;if(!(r===1&&c.rectangular)&&!(r===2&&!c.rectangular)&&!(n!=null&&(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(h){a={error:h}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),fD=function(t){lD(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(_e),hD=[new _e(!1,3,5,8,8,1),new _e(!1,5,7,10,10,1),new _e(!0,5,7,16,6,1),new _e(!1,8,10,12,12,1),new _e(!0,10,11,14,6,2),new _e(!1,12,12,14,14,1),new _e(!0,16,14,24,10,1),new _e(!1,18,14,16,16,1),new _e(!1,22,18,18,18,1),new _e(!0,22,18,16,10,2),new _e(!1,30,20,20,20,1),new _e(!0,32,24,16,14,2),new _e(!1,36,24,22,22,1),new _e(!1,44,28,24,24,1),new _e(!0,49,28,22,14,2),new _e(!1,62,36,14,14,4),new _e(!1,86,42,16,16,4),new _e(!1,114,48,18,18,4),new _e(!1,144,56,20,20,4),new _e(!1,174,68,22,22,4),new _e(!1,204,84,24,24,4,102,42),new _e(!1,280,112,14,14,16,140,56),new _e(!1,368,144,16,16,16,92,36),new _e(!1,456,192,18,18,16,114,48),new _e(!1,576,224,20,20,16,144,56),new _e(!1,696,272,22,22,16,174,68),new _e(!1,816,336,24,24,16,136,56),new _e(!1,1050,408,18,18,36,175,68),new _e(!1,1304,496,20,20,36,163,62),new fD],dD=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new ae,i=0,o=r.length;i<o;i++){var a=String.fromCharCode(r[i]&255);if(a==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(a)}this.msg=n.toString(),this.shape=0,this.codewords=new ae,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=_e.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),pD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gD=function(t){pD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return it},e.prototype.encode=function(r){for(var n=new ae;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var o=n.length();if(o%3===0){this.writeNextTriplet(r,n);var a=Fr.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){r.signalEncoderChange(Ee);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case"*".charCodeAt(0):n.append(1);break;case">".charCodeAt(0):n.append(2);break;case" ".charCodeAt(0):n.append(3);break;default:r>="0".charCodeAt(0)&&r<="9".charCodeAt(0)?n.append(r-48+4):r>="A".charCodeAt(0)&&r<="Z".charCodeAt(0)?n.append(r-65+14):Fr.illegalCharacter(he.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),o=n.length();r.pos-=o,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(oD),r.getNewEncoding()<0&&r.signalEncoderChange(Ee)},e}(Ap),vD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mD=function(t){vD(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Yt},e.prototype.encodeChar=function(r,n){if(r===" ".charCodeAt(0))return n.append(3),1;if(r>="0".charCodeAt(0)&&r<="9".charCodeAt(0))return n.append(r-48+4),1;if(r>="a".charCodeAt(0)&&r<="z".charCodeAt(0))return n.append(r-97+14),1;if(r<" ".charCodeAt(0))return n.append(0),n.append(r),2;if(r<="/".charCodeAt(0))return n.append(1),n.append(r-33),2;if(r<="@".charCodeAt(0))return n.append(1),n.append(r-58+15),2;if(r>="[".charCodeAt(0)&&r<="_".charCodeAt(0))return n.append(1),n.append(r-91+22),2;if(r==="`".charCodeAt(0))return n.append(2),n.append(0),2;if(r<="Z".charCodeAt(0))return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e}(Ap),yD=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=Oy+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,o){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!1);var a=new Ap,s=[new aD,a,new mD,new gD,new uD,new sD],u=new dD(e);u.setSymbolShape(r),u.setSizeConstraints(n,i),e.startsWith(by)&&e.endsWith(ky)?(u.writeCodeword(eD),u.setSkipAtEnd(2),u.pos+=by.length):e.startsWith(Dy)&&e.endsWith(ky)&&(u.writeCodeword(tD),u.setSkipAtEnd(2),u.pos+=Dy.length);var l=Ee;for(o&&(a.encodeMaximal(u),l=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)s[l].encode(u),u.getNewEncoding()>=0&&(l=u.getNewEncoding(),u.resetEncoderSignal());var c=u.getCodewordCount();u.updateSymbolInfo();var h=u.getSymbolInfo().getDataCapacity();c<h&&l!==Ee&&l!==Bt&&l!==pt&&u.writeCodeword("þ");var d=u.getCodewords();for(d.length()<h&&d.append(Oy);d.length()<h;)d.append(this.randomize253State(d.length()+1));return u.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===it&&i===it){for(var o=Math.min(r+3,e.length),a=r;a<o;a++)if(!this.isNativeX12(e.charCodeAt(a)))return Ee}else if(n===pt&&i===pt){for(var o=Math.min(r+4,e.length),a=r;a<o;a++)if(!this.isNativeEDIFACT(e.charCodeAt(a)))return Ee}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===Ee?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var o=0,a=new Uint8Array(6),s=[];;){if(r+o===e.length){ut.fill(a,0),ut.fill(s,0);var u=this.findMinimums(i,s,se.MAX_VALUE,a),l=this.getMinimumCount(a);if(s[Ee]===u)return Ee;if(l===1){if(a[Bt]>0)return Bt;if(a[pt]>0)return pt;if(a[Yt]>0)return Yt;if(a[it]>0)return it}return Et}var c=e.charCodeAt(r+o);if(o++,this.isDigit(c)?i[Ee]+=.5:this.isExtendedASCII(c)?(i[Ee]=Math.ceil(i[Ee]),i[Ee]+=2):(i[Ee]=Math.ceil(i[Ee]),i[Ee]++),this.isNativeC40(c)?i[Et]+=2/3:this.isExtendedASCII(c)?i[Et]+=8/3:i[Et]+=4/3,this.isNativeText(c)?i[Yt]+=2/3:this.isExtendedASCII(c)?i[Yt]+=8/3:i[Yt]+=4/3,this.isNativeX12(c)?i[it]+=2/3:this.isExtendedASCII(c)?i[it]+=13/3:i[it]+=10/3,this.isNativeEDIFACT(c)?i[pt]+=3/4:this.isExtendedASCII(c)?i[pt]+=17/4:i[pt]+=13/4,this.isSpecialB256(c)?i[Bt]+=4:i[Bt]++,o>=4){if(ut.fill(a,0),ut.fill(s,0),this.findMinimums(i,s,se.MAX_VALUE,a),s[Ee]<this.min(s[Bt],s[Et],s[Yt],s[it],s[pt]))return Ee;if(s[Bt]<s[Ee]||s[Bt]+1<this.min(s[Et],s[Yt],s[it],s[pt]))return Bt;if(s[pt]+1<this.min(s[Bt],s[Et],s[Yt],s[it],s[Ee]))return pt;if(s[Yt]+1<this.min(s[Bt],s[Et],s[pt],s[it],s[Ee]))return Yt;if(s[it]+1<this.min(s[Bt],s[Et],s[pt],s[Yt],s[Ee]))return it;if(s[Et]+1<this.min(s[Ee],s[Bt],s[pt],s[Yt])){if(s[Et]<s[it])return Et;if(s[Et]===s[it]){for(var h=r+o+1;h<e.length;){var d=e.charCodeAt(h);if(this.isX12TermSep(d))return it;if(!this.isNativeX12(d))break;h++}return Et}}}}},t.min=function(e,r,n,i,o){var a=Math.min(e,Math.min(r,Math.min(n,i)));return o===void 0?a:Math.min(a,o)},t.findMinimums=function(e,r,n,i){for(var o=0;o<6;o++){var a=r[o]=Math.ceil(e[o]);n>a&&(n=a,ut.fill(i,0)),n===a&&(i[o]=i[o]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isX12TermSep=function(e){return e===13||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},t.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=se.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}();const Fr=yD;var $h=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},My=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Sr.encode(e,this.charset)!=null}catch{return!1}},t}(),_D=function(){function t(e,r,n){var i,o,a,s,u,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(R){return new My(Kb.forName(R))}),this.encoders=[];var c=[];c.push(new My(qb.ISO_8859_1));for(var h=r!=null&&r.name.startsWith("UTF"),d=0;d<e.length;d++){var p=!1;try{for(var m=(i=void 0,$h(c)),w=m.next();!w.done;w=m.next()){var x=w.value,v=e.charAt(d),y=v.charCodeAt(0);if(y===n||x.canEncode(v)){p=!0;break}}}catch(R){i={error:R}}finally{try{w&&!w.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!p)try{for(var E=(a=void 0,$h(this.ENCODERS)),I=E.next();!I.done;I=E.next()){var x=I.value;if(x.canEncode(e.charAt(d))){c.push(x),p=!0;break}}}catch(R){a={error:R}}finally{try{I&&!I.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}p||(h=!0)}if(c.length===1&&!h)this.encoders=[c[0]];else{this.encoders=[];var b=0;try{for(var D=$h(c),C=D.next();!C.done;C=D.next()){var x=C.value;this.encoders[b++]=x}}catch(R){u={error:R}}finally{try{C&&!C.done&&(l=D.return)&&l.call(D)}finally{if(u)throw u.error}}}var A=-1;if(r!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&r.name===this.encoders[d].name){A=d;break}}this.priorityEncoderIndex=A}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Sr.encode(he.getCharAt(e),this.encoders[r].name)},t}(),wD=3,xD=function(){function t(e,r,n){this.fnc1=n;var i=new _D(e,r,n);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var a=e.charAt(o).charCodeAt(0);this.bytes[o]=a===n?1e3:a}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new ae,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,o,a){var s=e.charAt(i).charCodeAt(0),u=0,l=r.length();r.getPriorityEncoderIndex()>=0&&(s===a||r.canEncode(s,r.getPriorityEncoderIndex()))&&(u=r.getPriorityEncoderIndex(),l=u+1);for(var c=u;c<l;c++)(s===a||r.canEncode(s,c))&&this.addEdge(n,i+1,new Ly(s,r,c,o,a))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,o=new Ly[i+1][r.length()];this.addEdges(e,r,o,0,null,n);for(var a=1;a<=i;a++){for(var s=0;s<r.length();s++)o[a][s]!=null&&a<i&&this.addEdges(e,r,o,a,o[a][s],n);for(var s=0;s<r.length();s++)o[a-1][s]=null}for(var u=-1,l=se.MAX_VALUE,s=0;s<r.length();s++)if(o[i][s]!=null){var c=o[i][s];c.cachedTotalSize<l&&(l=c.cachedTotalSize,u=s)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],d=o[i][u];d!=null;){if(d.isFNC1())h.unshift(1e3);else for(var p=r.encode(d.c,d.encoderIndex),a=p.length-1;a>=0;a--)h.unshift(p[a]&255);var m=d.previous===null?0:d.previous.encoderIndex;m!==d.encoderIndex&&h.unshift(256+r.getECIValue(d.encoderIndex)),d=d.previous}for(var w=[],a=0;a<w.length;a++)w[a]=h[a];return w},t}(),Ly=function(){function t(e,r,n,i,o){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var a=this.isFNC1()?1:r.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(a+=wD),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),ED=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();globalThis&&globalThis.__values;var AD=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};globalThis&&globalThis.__spread;var Fy;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(Fy||(Fy={}));(function(t){ED(e,t);function e(r,n,i,o,a){var s=t.call(this,r,n,i)||this;return s.shape=o,s.macroId=a,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(xD);var ID=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),By=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),CD=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),TD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ip=function(t){TD(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.value=n,o.bitCount=i,o}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+se.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(CD),SD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RD=function(t){SD(e,t);function e(r,n,i){var o=t.call(this,r,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Ip);function PD(t,e,r){return new RD(t,e,r)}function Ya(t,e,r){return new Ip(t,e,r)}var ND=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],pi=0,Mc=1,Ir=2,HE=3,Xr=4,OD=new Ip(null,0,0),Xh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])],bD=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function DD(t){var e,r;try{for(var n=bD(t),i=n.next();!i.done;i=n.next()){var o=i.value;ut.fill(o,-1)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[pi][Xr]=0,t[Mc][Xr]=0,t[Mc][pi]=28,t[HE][Xr]=0,t[Ir][Xr]=0,t[Ir][pi]=15,t}var WE=DD(ut.createInt32Array(6,6)),kD=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MD=function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var o=Xh[this.mode][e];i=Ya(i,o&65535,o>>16),n+=o>>16}var a=e===Ir?4:5;return i=Ya(i,r,a),new t(i,e,0,n+a)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===Ir?4:5;return n=Ya(n,WE[this.mode][e],i),n=Ya(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===Xr||this.mode===Ir){var o=Xh[n][pi];r=Ya(r,o&65535,o>>16),i+=o>>16,n=pi}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,i+a);return s.binaryShiftByteCount===2047+31&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=PD(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(Xh[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var a=new yt;try{for(var s=kD(i),u=s.next();!u.done;u=s.next()){var l=u.value;l.appendTo(a,e)}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.prototype.toString=function(){return he.format("%s bits=%d bytes=%d",ND[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(OD,pi,0,0),t}();function LD(t){var e=he.getCharCode(" "),r=he.getCharCode("."),n=he.getCharCode(",");t[pi][e]=1;for(var i=he.getCharCode("Z"),o=he.getCharCode("A"),a=o;a<=i;a++)t[pi][a]=a-o+2;t[Mc][e]=1;for(var s=he.getCharCode("z"),u=he.getCharCode("a"),a=u;a<=s;a++)t[Mc][a]=a-u+2;t[Ir][e]=1;for(var l=he.getCharCode("9"),c=he.getCharCode("0"),a=c;a<=l;a++)t[Ir][a]=a-c+2;t[Ir][n]=12,t[Ir][r]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<h.length;d++)t[HE][he.getCharCode(h[d])]=d;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<p.length;d++)he.getCharCode(p[d])>0&&(t[Xr][he.getCharCode(p[d])]=d);return t}var Kh=LD(ut.createInt32Array(5,256)),pl=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FD=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=he.getCharCode(" "),r=he.getCharCode(`
`),n=By.singletonList(MD.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case he.getCharCode("\r"):o=a===r?2:0;break;case he.getCharCode("."):o=a===e?3:0;break;case he.getCharCode(","):o=a===e?4:0;break;case he.getCharCode(":"):o=a===e?5:0;break;default:o=0}o>0?(n=t.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}var s=By.min(n,function(u,l){return u.getBitCount()-l.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,o=[];try{for(var a=pl(e),s=a.next();!s.done;s=a.next()){var u=s.value;this.updateStateForChar(u,r,o)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return t.simplifyStates(o)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,o=Kh[e.getMode()][i]>0,a=null,s=0;s<=Xr;s++){var u=Kh[s][i];if(u>0){if(a==null&&(a=e.endBinaryShift(r)),!o||s===e.getMode()||s===Ir){var l=a.latchAndAppend(s,u);n.push(l)}if(!o&&WE[e.getMode()][s]>=0){var c=a.shiftAndAppend(s,u);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||Kh[e.getMode()][i]===0){var h=e.addBinaryShiftChar(r);n.push(h)}},t.updateStateListForPair=function(e,r,n){var i,o,a=[];try{for(var s=pl(e),u=s.next();!u.done;u=s.next()){var l=u.value;this.updateStateForPair(l,r,n,a)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(a)},t.updateStateForPair=function(e,r,n,i){var o=e.endBinaryShift(r);if(i.push(o.latchAndAppend(Xr,n)),e.getMode()!==Xr&&i.push(o.shiftAndAppend(Xr,n)),n===3||n===4){var a=o.latchAndAppend(Ir,16-n).latchAndAppend(Ir,1);i.push(a)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(s)}},t.simplifyStates=function(e){var r,n,i,o,a=[];try{for(var s=pl(e),u=s.next();!u.done;u=s.next()){var l=u.value,c=!0,h=function(x){if(x.isBetterThanOrEqualTo(l))return c=!1,"break";l.isBetterThanOrEqualTo(x)&&(a=a.filter(function(v){return v!==x}))};try{for(var d=(i=void 0,pl(a)),p=d.next();!p.done;p=d.next()){var m=p.value,w=h(m);if(w==="break")break}}catch(x){i={error:x}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}c&&a.push(l)}}catch(x){r={error:x}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t}(),BD=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new FD(e).encode(),o=se.truncDivision(i.getSize()*r,100)+11,a=i.getSize()+o,s,u,l,c,h;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,u=Math.abs(n),u>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new J(he.format("Illegal value %s for layers",n));l=t.totalBitsInLayer(u,s),c=t.WORD_SIZE[u];var d=l-l%c;if(h=t.stuffBits(i,c),h.getSize()+o>d)throw new J("Data to large for user specified layer");if(s&&h.getSize()>c*64)throw new J("Data to large for user specified layer")}else{c=0,h=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new J("Data too large for an Aztec code");if(s=p<=3,u=s?p+1:p,l=t.totalBitsInLayer(u,s),!(a>l)){(h==null||c!==t.WORD_SIZE[u])&&(c=t.WORD_SIZE[u],h=t.stuffBits(i,c));var d=l-l%c;if(!(s&&h.getSize()>c*64)&&h.getSize()+o<=d)break}}}var m=t.generateCheckWords(h,l,c),w=h.getSize()/c,x=t.generateModeMessage(s,u,w),v=(s?11:14)+u*4,y=new Int32Array(v),E;if(s){E=v;for(var p=0;p<y.length;p++)y[p]=p}else{E=v+1+2*se.truncDivision(se.truncDivision(v,2)-1,15);for(var I=se.truncDivision(v,2),b=se.truncDivision(E,2),p=0;p<I;p++){var D=p+se.truncDivision(p,15);y[I-p-1]=b-D-1,y[I+p]=b+D+1}}for(var C=new rn(E),p=0,A=0;p<u;p++){for(var R=(u-p)*4+(s?9:12),N=0;N<R;N++)for(var k=N*2,M=0;M<2;M++)m.get(A+k+M)&&C.set(y[p*2+M],y[p*2+N]),m.get(A+R*2+k+M)&&C.set(y[p*2+N],y[v-1-p*2-M]),m.get(A+R*4+k+M)&&C.set(y[v-1-p*2-M],y[v-1-p*2-N]),m.get(A+R*6+k+M)&&C.set(y[v-1-p*2-N],y[p*2+M]);A+=R*8}if(t.drawModeMessage(C,s,E,x),s)t.drawBullsEye(C,se.truncDivision(E,2),5);else{t.drawBullsEye(C,se.truncDivision(E,2),7);for(var p=0,N=0;p<se.truncDivision(v,2)-1;p+=15,N+=16)for(var M=se.truncDivision(E,2)&1;M<E;M+=2)C.set(se.truncDivision(E,2)-N,M),C.set(se.truncDivision(E,2)+N,M),C.set(M,se.truncDivision(E,2)-N),C.set(M,se.truncDivision(E,2)+N)}var O=new ID;return O.setCompact(s),O.setSize(E),O.setLayers(u),O.setCodeWords(w),O.setMatrix(C),O},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var o=r-i;o<=r+i;o++)e.set(o,r-i),e.set(o,r+i),e.set(r-i,o),e.set(r+i,o);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new yt;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var o=se.truncDivision(n,2);if(r)for(var a=0;a<7;a++){var s=o-3+a;i.get(a)&&e.set(s,o-5),i.get(a+7)&&e.set(o+5,s),i.get(20-a)&&e.set(s,o+5),i.get(27-a)&&e.set(o-5,s)}else for(var a=0;a<10;a++){var s=o-5+a+se.truncDivision(a,5);i.get(a)&&e.set(s,o-7),i.get(a+10)&&e.set(o+7,s),i.get(29-a)&&e.set(s,o+7),i.get(39-a)&&e.set(o-7,s)}},t.generateCheckWords=function(e,r,n){var i,o,a=e.getSize()/n,s=new jE(t.getGF(n)),u=se.truncDivision(r,n),l=t.bitsToWords(e,n,u);s.encode(l,u-a);var c=r%n,h=new yt;h.appendBits(0,c);try{for(var d=BD(Array.from(l)),p=d.next();!p.done;p=d.next()){var m=p.value;h.appendBits(m,n)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return h},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),o,a;for(o=0,a=e.getSize()/r;o<a;o++){for(var s=0,u=0;u<r;u++)s|=e.get(o*r+u)?1<<r-u-1:0;i[o]=s}return i},t.getGF=function(e){switch(e){case 4:return ir.AZTEC_PARAM;case 6:return ir.AZTEC_DATA_6;case 8:return ir.AZTEC_DATA_8;case 10:return ir.AZTEC_DATA_10;case 12:return ir.AZTEC_DATA_12;default:throw new J("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new yt,i=e.getSize(),o=(1<<r)-2,a=0;a<i;a+=r){for(var s=0,u=0;u<r;u++)(a+u>=i||e.get(a+u))&&(s|=1<<r-1-u);(s&o)===o?(n.appendBits(s&o,r),a--):s&o?n.appendBits(s,r):(n.appendBits(s|1,r),a--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var VD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UD=function(t){VD(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var i=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,i){for(var o=new Uint8ClampedArray(n*i),a=0,s=0,u=r.length;a<u;a+=4,s++){var l=void 0,c=r[a+3];if(c===0)l=255;else{var h=r[a],d=r[a+1],p=r[a+2];l=306*h+601*d+117*p+512>>10}o[s]=l}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new J("Requested row is outside the image: "+r);var i=this.getWidth(),o=r*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return t.prototype.crop.call(this,r,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Rf(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var i=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*a),u=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*a);n.width=s,n.height=u;var l=n.getContext("2d");if(!l)throw new Error("Could not create a Canvas Context element.");return l.translate(s/2,u/2),l.rotate(i),l.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Eu);function GE(){return typeof navigator<"u"}function jD(){return GE()&&!!navigator.mediaDevices}function zD(){return!!(jD()&&navigator.mediaDevices.enumerateDevices)}var Lo=globalThis&&globalThis.__assign||function(){return Lo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lo.apply(this,arguments)},Ue=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{l(n.next(c))}catch(h){a(h)}}function u(c){try{l(n.throw(c))}catch(h){a(h)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},je=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},qh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HD={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Ia=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Lo(Lo({},HD),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Ne.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return Ue(this,void 0,void 0,function(){return je(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,i=e.getVideoTracks();try{for(var o=qh(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(t.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ye("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ye("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new UD(e),n=new PE(r);return new RE(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Ye("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),i=n.width,o=n.height;return r.style.width=i+"px",r.style.height=o+"px",r.width=i,r.height=o,r},t.tryPlayVideo=function(e){return Ue(this,void 0,void 0,function(){var r;return je(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Ue(this,void 0,void 0,function(){var e,r,n,i,o,a,s,u,l,c,h,d;return je(this,function(p){switch(p.label){case 0:if(!GE())throw new Error("Can't enumerate devices, navigator is not present.");if(!zD())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=qh(e),i=n.next();!i.done;i=n.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,u=o.label||"Video device ".concat(r.length+1),l=o.groupId,c={deviceId:s,label:u,kind:a,groupId:l},r.push(c))}catch(m){h={error:m}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return[2,r]}})})},t.findDeviceById=function(e){return Ue(this,void 0,void 0,function(){var r;return je(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return Ue(this,void 0,void 0,function(){var n;return je(this,function(i){switch(i.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=i.sent(),n?[2,!0]:[2,new Promise(function(o,a){var s=setTimeout(function(){t.isVideoPlaying(e)||(a(!1),e.removeEventListener("canplay",u))},r),u=function(){t.tryPlayVideo(e).then(function(l){clearTimeout(s),e.removeEventListener("canplay",u),o(l)})};e.addEventListener("canplay",u)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),Ue(this,void 0,void 0,function(){var i;return je(this,function(o){switch(o.label){case 0:return i=t.prepareVideoElement(r),t.addVideoSource(i,e),[4,t.playVideoOnLoadAsync(i,n)];case 1:return o.sent(),[2,i]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var i=1e4,o=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",a),n())},i),a=function(){clearTimeout(o),e.removeEventListener("load",a),r()};e.addEventListener("load",a)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Ye("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return Ue(this,void 0,void 0,function(){var r;return je(this,function(n){switch(n.label){case 0:if(!e)throw new Ye("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Ue(this,void 0,void 0,function(){var r;return je(this,function(n){switch(n.label){case 0:if(!e)throw new Ye("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Ue(this,void 0,void 0,function(){var i,o;return je(this,function(a){switch(a.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(i,r,n)];case 3:return[2,a.sent()];case 4:throw o=a.sent(),t.disposeMediaStream(i),o;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return Ue(this,void 0,void 0,function(){var i,o,a,s,u,l,c,h,d,p=this;return je(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),i=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,i)];case 1:return o=m.sent(),a=function(){t.disposeMediaStream(e),t.cleanVideoSource(o)},s=this.scan(o,n,a),u=e.getVideoTracks(),l=Lo(Lo({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(w,x){return Ue(this,void 0,void 0,function(){var v,y,E,I,b,D,C;return je(this,function(A){switch(A.label){case 0:v=x?u.filter(x):u,A.label=1;case 1:A.trys.push([1,6,7,8]),y=qh(v),E=y.next(),A.label=2;case 2:return E.done?[3,5]:(I=E.value,[4,I.applyConstraints(w)]);case 3:A.sent(),A.label=4;case 4:return E=y.next(),[3,2];case 5:return[3,8];case 6:return b=A.sent(),D={error:b},[3,8];case 7:try{E&&!E.done&&(C=y.return)&&C.call(y)}finally{if(D)throw D.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(w){return u.find(w).getConstraints()},streamVideoSettingsGet:function(w){return u.find(w).getSettings()},streamVideoCapabilitiesGet:function(w){return u.find(w).getCapabilities()}}),c=t.mediaStreamIsTorchCompatible(e),c&&(h=u==null?void 0:u.find(function(w){return t.mediaStreamIsTorchCompatibleTrack(w)}),d=function(w){return Ue(p,void 0,void 0,function(){return je(this,function(x){switch(x.label){case 0:return[4,t.mediaStreamSetTorch(h,w)];case 1:return x.sent(),[2]}})})},l.switchTorch=d,l.stop=function(){return Ue(p,void 0,void 0,function(){return je(this,function(w){switch(w.label){case 0:return s.stop(),[4,d(!1)];case 1:return w.sent(),[2]}})})}),[2,l]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Ue(this,void 0,void 0,function(){var i,o;return je(this,function(a){switch(a.label){case 0:return t.checkCallbackFnOrThrow(n),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return Ue(this,void 0,void 0,function(){var n,i;return je(this,function(o){switch(o.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ye("A video element must be provided.");return n=t.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,i)];case 1:return o.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return Ue(this,void 0,void 0,function(){var n,i,o,a;return je(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Ye("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,i=function(){t.cleanVideoSource(n)},o=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,o)];case 1:return s.sent(),a=this.scan(n,r,i),[2,a]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Ue(this,void 0,void 0,function(){var n;return je(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Ue(this,void 0,void 0,function(){var n,i,o;return je(this,function(a){switch(a.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=a.sent(),[2,o];case 4:return n||t.cleanVideoSource(i),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Ue(this,void 0,void 0,function(){var n,i;return je(this,function(o){switch(o.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Ue(this,void 0,void 0,function(){var r,n;return je(this,function(i){switch(i.label){case 0:if(!e)throw new Ye("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return i.sent(),[4,this.scanOneResult(r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Ue(this,void 0,void 0,function(){var r,n;return je(this,function(i){switch(i.label){case 0:if(!e)throw new Ye("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n];case 2:return[2,i.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,i){var o=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),new Promise(function(a,s){o.scan(e,function(u,l,c){if(u){a(u),c.stop();return}if(l){if(l instanceof V&&r||l instanceof rt&&n||l instanceof W&&i)return;c.stop(),s(l)}})})},t.prototype.scan=function(e,r,n){var i=this;t.checkCallbackFnOrThrow(r);var o=t.createCaptureCanvas(e),a;try{a=o.getContext("2d",{willReadFrequently:!0})}catch{a=o.getContext("2d")}if(!a)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){a=void 0,o=void 0},u=!1,l,c=function(){u=!0,clearTimeout(l),s(),n&&n()},h={stop:c},d=function(){if(!u)try{t.drawImageOnCanvas(a,e);var p=i.decodeFromCanvas(o);r(p,void 0,h),l=setTimeout(d,i.options.delayBetweenScanSuccess)}catch(v){r(void 0,v,h);var m=v instanceof rt,w=v instanceof W,x=v instanceof V;if(m||w||x){l=setTimeout(d,i.options.delayBetweenScanAttempts);return}s(),n&&n(v)}};return d(),h},t.prototype._decodeOnLoadImage=function(e){return Ue(this,void 0,void 0,function(){var r;return je(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Ue(this,void 0,void 0,function(){var r;return je(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),WD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){WD(e,t);function e(r,n){return t.call(this,new Nc,r,n)||this}return e})(Ia);var GD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){GD(e,t);function e(r,n){return t.call(this,new ko(r),r,n)||this}return e})(Ia);var $D=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){$D(e,t);function e(r,n){return t.call(this,new bc,r,n)||this}return e})(Ia);var XD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KD=function(t){XD(e,t);function e(r,n){var i=this,o=new UE;return o.setHints(r),i=t.call(this,o,r,n)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Ne.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(Ia),qD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){qD(e,t);function e(r,n){return t.call(this,new kc,r,n)||this}return e})(Ia);var YD=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){YD(e,t);function e(r,n){return t.call(this,new Dc,r,n)||this}return e})(Ia);function QD(){const t=U.useRef(null),e=U.useRef(null),r=U.useRef(!1),n=au(),i=()=>{const o=t.current;o!=null&&o.srcObject&&(o.srcObject.getTracks().forEach(a=>a.stop()),o.srcObject=null)};return U.useEffect(()=>{const o=new KD;return e.current=o,(async()=>{var s;try{const l=(await navigator.mediaDevices.enumerateDevices()).filter(d=>d.kind==="videoinput"),c=l.find(d=>d.label.toLowerCase().includes("back")),h=(c==null?void 0:c.deviceId)||((s=l[0])==null?void 0:s.deviceId);console.log("📸 Starting decodeFromVideoDevice with ID:",h),await o.decodeFromVideoDevice(h,t.current,(d,p)=>{if(d&&!r.current){r.current=!0;const m=d.getText();console.log("✅ Scanned VIN:",m),i(),o.reset(),setTimeout(()=>{n("/checkin",{state:{vin:m}})},300)}})}catch(u){console.error("Scanner error:",u),n("/checkin")}})(),()=>{o.reset(),i()}},[n]),S.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-50",children:[S.jsx("video",{ref:t,className:"w-full max-w-md rounded",autoPlay:!0,muted:!0,playsInline:!0,style:{backgroundColor:"black"},children:"Camera access required."}),S.jsx("button",{onClick:()=>n("/checkin"),className:"mt-6 px-4 py-2 bg-red-600 text-white rounded",children:"Cancel"})]})}function ZD(){const t=Si();return S.jsxs(VT,{children:[S.jsx(cn,{path:"/",element:t?S.jsx(XP,{}):S.jsx(go,{})}),S.jsx(cn,{path:"/scan-vin",element:S.jsx(QD,{})}),S.jsx(cn,{path:"/checkin",element:t?S.jsx(eN,{}):S.jsx(go,{})}),S.jsx(cn,{path:"/inspections",element:t?S.jsx(ZP,{}):S.jsx(go,{})}),S.jsx(cn,{path:"/inspection",element:t?S.jsx(YP,{}):S.jsx(go,{})}),S.jsx(cn,{path:"/clients",element:t?S.jsx(KP,{}):S.jsx(go,{})}),S.jsx(cn,{path:"/shop",element:t?S.jsx(qP,{}):S.jsx(go,{})})," ",S.jsx(cn,{path:"*",element:S.jsx(tN,{})})]})}Yh.createRoot(document.getElementById("root")).render(S.jsx(qy.StrictMode,{children:S.jsx(XT,{children:S.jsx($P,{children:S.jsx(ZD,{})})})}));
